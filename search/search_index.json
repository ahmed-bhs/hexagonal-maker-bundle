{"config":{"lang":["en"],"separator":"[\\s\\-\\.]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Hexagonal Maker Bundle","text":"<p> Symfony Maker Bundle for Hexagonal Architecture (Ports &amp; Adapters) </p> <p> </p> <p>   \u2728 19 maker commands | \ud83d\udc8e Pure Domain | \ud83c\udfaf CQRS Pattern | \ud83c\udfd7\ufe0f Full Layer Coverage </p>"},{"location":"#why-hexagonal-architecture","title":"Why Hexagonal Architecture?","text":"<p>Hexagonal architecture (aka Ports &amp; Adapters) helps you build maintainable, testable applications by:</p> <ul> <li>\ud83d\udc8e Pure Domain Isolation - Business logic independent of frameworks</li> <li>\ud83c\udfaf Dependency Control - Infrastructure depends on domain, not vice versa</li> <li>\u26a1 Testing Speed - Unit tests run 1000x faster (no database needed)</li> <li>\ud83d\udd04 Technology Freedom - Swap databases, frameworks without touching business logic</li> <li>\ud83d\udcb0 Cost Predictability - Features cost consistent time, no technical debt tax</li> </ul> <p>Read the complete guide \u2192</p>"},{"location":"#quick-start-2-minutes","title":"\u26a1 Quick Start (2 minutes)","text":"<p>Step 1: Install</p> <pre><code>composer require ahmed-bhs/hexagonal-maker-bundle --dev\n</code></pre> <p>Step 2: Generate your first module</p> <pre><code># Create a User Registration module\nbin/console make:hexagonal:entity user/account User\nbin/console make:hexagonal:repository user/account User\nbin/console make:hexagonal:command user/account register --factory\nbin/console make:hexagonal:controller user/account RegisterUser /users/register\n</code></pre> <p>Step 3: Configure Doctrine mapping</p> <pre><code># config/packages/doctrine.yaml\ndoctrine:\n    orm:\n        mappings:\n            UserAccount:\n                type: yml\n                dir: '%kernel.project_dir%/src/User/Account/Infrastructure/Persistence/Doctrine/Orm/Mapping'\n                prefix: 'App\\User\\Account\\Domain\\Model'\n</code></pre> <p>Result: Complete hexagonal module with pure domain, CQRS commands, and web controllers! \ud83d\ude80</p> <p>Full installation guide \u2192</p>"},{"location":"#features","title":"Features","text":""},{"location":"#19-maker-commands","title":"19 Maker Commands","text":"<p>Generate complete hexagonal architecture with a single command:</p> Layer Maker What it generates Domain <code>make:hexagonal:entity</code> Pure PHP entities + YAML mapping Domain <code>make:hexagonal:value-object</code> Immutable value objects Domain <code>make:hexagonal:exception</code> Business exceptions Application <code>make:hexagonal:command</code> CQRS commands + handlers Application <code>make:hexagonal:query</code> CQRS queries + handlers + responses Application <code>make:hexagonal:repository</code> Repository port + Doctrine adapter UI <code>make:hexagonal:controller</code> Web controllers UI <code>make:hexagonal:form</code> Symfony forms UI <code>make:hexagonal:cli-command</code> Console commands Tests <code>make:hexagonal:use-case-test</code> Use case tests Rapid <code>make:hexagonal:crud</code> Complete CRUD module (20+ files) <p>See all 19 commands \u2192</p>"},{"location":"#example-complete-user-module","title":"Example: Complete User Module","text":"Step 1: DomainStep 2: ApplicationStep 3: InfrastructureStep 4: UI <p>Generate pure domain entities</p> <pre><code>bin/console make:hexagonal:entity user/account User\nbin/console make:hexagonal:value-object user/account Email\nbin/console make:hexagonal:exception user/account InvalidEmailException\n</code></pre> <p>Generated: - <code>Domain/Model/User.php</code> (pure PHP) - <code>Domain/ValueObject/Email.php</code> - <code>Domain/Exception/InvalidEmailException.php</code></p> <p>Generate use cases and commands</p> <pre><code>bin/console make:hexagonal:repository user/account User\nbin/console make:hexagonal:command user/account register --factory\nbin/console make:hexagonal:query user/account find-by-id\n</code></pre> <p>Generated: - <code>Domain/Port/UserRepositoryInterface.php</code> - <code>Application/Register/RegisterCommand.php</code> - <code>Application/Register/RegisterCommandHandler.php</code> - <code>Application/FindById/FindByIdQuery.php</code></p> <p>Auto-generated adapters</p> <pre><code># Already generated with repository command!\n</code></pre> <p>Generated: - <code>Infrastructure/Persistence/Doctrine/DoctrineUserRepository.php</code> - <code>Infrastructure/Persistence/Doctrine/Orm/Mapping/User.orm.yml</code></p> <p>Generate controllers and forms</p> <pre><code>bin/console make:hexagonal:controller user/account RegisterUser /users/register\nbin/console make:hexagonal:form user/account User\n</code></pre> <p>Generated: - <code>UI/Http/Web/Controller/RegisterUserController.php</code> - <code>UI/Http/Web/Form/UserType.php</code></p>"},{"location":"#architecture-layers","title":"Architecture Layers","text":"<pre><code>%%{init: {'theme':'base', 'themeVariables': { 'fontSize':'14px'}}}%%\ngraph TB\n    subgraph UI[\"\ud83c\udfae UI LAYER\"]\n        HTTP[\"HTTP Controllers\"]\n        CLI[\"CLI Commands\"]\n    end\n\n    subgraph APP[\"\u2699\ufe0f APPLICATION LAYER\"]\n        Commands[\"Commands &amp; Queries\"]\n    end\n\n    subgraph DOMAIN[\"\ud83d\udc8e DOMAIN LAYER\"]\n        Entities[\"Entities &amp; Value Objects\"]\n        Ports[\"Ports (Interfaces)\"]\n    end\n\n    subgraph INFRA[\"\ud83d\udd0c INFRASTRUCTURE LAYER\"]\n        Adapters[\"Adapters (Implementations)\"]\n    end\n\n    UI ==&gt;|uses| APP\n    APP ==&gt;|depends on| DOMAIN\n    INFRA -.-&gt;|implements| Ports\n\n    style DOMAIN fill:#C8E6C9,stroke:#2E7D32,stroke-width:4px\n    style APP fill:#B3E5FC,stroke:#0277BD,stroke-width:3px\n    style INFRA fill:#F8BBD0,stroke:#C2185B,stroke-width:3px\n    style UI fill:#E1BEE7,stroke:#6A1B9A,stroke-width:3px</code></pre> <p>Dependency Rule: All dependencies point inward. Domain has zero dependencies.</p> <p>Architecture guide \u2192</p>"},{"location":"#crud-in-1-command","title":"CRUD in 1 Command \u26a1","text":"<p>Generate complete CRUD module with all layers:</p> <pre><code>bin/console make:hexagonal:crud blog/post Post --with-tests --with-id-vo\n</code></pre> <p>Generated (30+ files): - Entity + ValueObjects + Repository - 5 Use Cases (Create, Update, Delete, Get, List) - 5 Controllers + Form - All tests (Use Case + Controller) - Doctrine YAML mapping</p> <p>CRUD examples \u2192</p>"},{"location":"#documentation","title":"Documentation","text":"Guide Description Quick Start Install and generate your first module in 2 minutes Maker Commands Complete reference for all 19 maker commands Architecture Guide Deep dive into hexagonal architecture patterns Why Hexagonal Business case and technical benefits SOLID Principles How hexagonal architecture enforces SOLID Examples Real-world examples and use cases"},{"location":"#requirements","title":"Requirements","text":"<ul> <li>PHP 8.1+</li> <li>Symfony 6.4+ or 7.x</li> <li>Composer</li> </ul>"},{"location":"#contributing","title":"Contributing","text":"<p>We welcome contributions! See our Contributing Guide.</p>"},{"location":"#license","title":"License","text":"<p>MIT License - see LICENSE for details.</p> <p>Created by Ahmed EBEN HASSINE</p> <p> </p>"},{"location":"ARCHITECTURE/","title":"Architecture Hexagonale - Guide Complet","text":""},{"location":"ARCHITECTURE/#table-des-matieres","title":"Table des mati\u00e8res","text":"<ol> <li>Vue d'ensemble</li> <li>Les 3 Couches</li> <li>Ports vs Adapters</li> <li>CQRS Pattern</li> <li>Testabilit\u00e9</li> <li>Structure de r\u00e9pertoires</li> <li>Bonnes pratiques</li> <li>Design Patterns Favoris\u00e9s</li> <li>8.1 Patterns de Cr\u00e9ation - Factory, Builder, Singleton</li> <li>8.2 Patterns Structuraux - Adapter, Repository, DTO</li> <li>8.3 Patterns Comportementaux - Strategy, Command, Observer</li> <li>8.4 Autres Patterns - Specification, Null Object</li> <li>Migration progressive</li> <li>Ressources</li> </ol>"},{"location":"ARCHITECTURE/#1-vue-densemble","title":"1. Vue d'ensemble","text":"<p>L'architecture hexagonale (aussi appel\u00e9e Ports and Adapters) est un pattern architectural qui vise \u00e0 isoler la logique m\u00e9tier des pr\u00e9occupations techniques (framework, base de donn\u00e9es, API externes, etc.).</p>"},{"location":"ARCHITECTURE/#11-principe-fondamental","title":"1.1 Principe fondamental","text":"<p>Les d\u00e9pendances pointent toujours vers l'int\u00e9rieur (vers le domaine)</p> <pre><code>%%{init: {'theme':'base', 'themeVariables': { 'fontSize':'16px'}}}%%\ngraph LR\n    Infra[\"\ud83d\udd0c Infrastructure&lt;br/&gt;&lt;small&gt;Adapters&lt;/small&gt;\"]\n    App[\"\u2699\ufe0f Application&lt;br/&gt;&lt;small&gt;Use Cases&lt;/small&gt;\"]\n    Domain[\"\ud83d\udc8e Domain&lt;br/&gt;&lt;small&gt;Business Logic&lt;/small&gt;\"]\n\n    Infra ==&gt;|\"depends on\"| App\n    App ==&gt;|\"depends on\"| Domain\n\n    style Domain fill:#C8E6C9,stroke:#2E7D32,stroke-width:4px,color:#000\n    style App fill:#B3E5FC,stroke:#0277BD,stroke-width:3px,color:#000\n    style Infra fill:#F8BBD0,stroke:#C2185B,stroke-width:3px,color:#000</code></pre>"},{"location":"ARCHITECTURE/#2-les-3-couches","title":"2. Les 3 Couches","text":""},{"location":"ARCHITECTURE/#21-domain-cur-hexagone","title":"2.1 Domain (C\u0153ur - Hexagone)","text":"<p>Responsabilit\u00e9: Logique m\u00e9tier pure, r\u00e8gles de gestion, invariants</p> <p>Contient: - <code>Model/</code> - Entit\u00e9s avec identit\u00e9 et cycle de vie - <code>ValueObject/</code> - Objets immuables d\u00e9finis par leurs valeurs - <code>Port/</code> - Interfaces (contrats) pour les d\u00e9pendances externes</p> <p>R\u00e8gles strictes: - AUCUNE d\u00e9pendance vers les couches externes - AUCUNE annotation/attribut Symfony/Doctrine - PHP pur uniquement - Ind\u00e9pendant du framework</p> <p>Exemple Entity: <pre><code>namespace App\\User\\Account\\Domain\\Model;\n\nfinal class User\n{\n    public function __construct(\n        private UserId $id,\n        private Email $email,\n        private bool $isActive = false,\n    ) {\n    }\n\n    // Business logic\n    public function activate(): void\n    {\n        if ($this-&gt;isActive) {\n            throw new UserAlreadyActiveException();\n        }\n        $this-&gt;isActive = true;\n    }\n}\n</code></pre></p> <p>Exemple Value Object: <pre><code>namespace App\\User\\Account\\Domain\\ValueObject;\n\nfinal readonly class Email\n{\n    public function __construct(public string $value)\n    {\n        if (!filter_var($value, FILTER_VALIDATE_EMAIL)) {\n            throw new InvalidEmailException($value);\n        }\n    }\n}\n</code></pre></p> <p>Exemple Port (Interface): <pre><code>namespace App\\User\\Account\\Domain\\Port;\n\ninterface UserRepositoryInterface\n{\n    public function save(User $user): void;\n    public function findById(UserId $id): ?User;\n}\n</code></pre></p>"},{"location":"ARCHITECTURE/#22-application-orchestration","title":"2.2 Application (Orchestration)","text":"<p>Responsabilit\u00e9: Cas d'utilisation, orchestration des op\u00e9rations m\u00e9tier</p> <p>Contient: - <code>Command/</code> - Commandes CQRS (\u00e9critures) - <code>Query/</code> - Requ\u00eates CQRS (lectures) - Handlers - Logique d'orchestration</p> <p>R\u00e8gles: - D\u00e9pend du Domain uniquement - Utilise les Ports (interfaces) - Coordonne les op\u00e9rations - Ne contient PAS de logique m\u00e9tier</p> <p>Command: <pre><code>namespace App\\User\\Account\\Application\\Register;\n\nfinal readonly class RegisterCommand\n{\n    public function __construct(\n        public string $email,\n        public string $password,\n    ) {\n    }\n}\n</code></pre></p> <p>Command Handler: <pre><code>namespace App\\User\\Account\\Application\\Register;\n\nuse App\\User\\Account\\Domain\\Port\\UserRepositoryInterface;\nuse Symfony\\Component\\Messenger\\Attribute\\AsMessageHandler;\n\n#[AsMessageHandler]\nfinal readonly class RegisterCommandHandler\n{\n    public function __construct(\n        private UserRepositoryInterface $repository,\n        private PasswordHasherInterface $hasher,\n    ) {\n    }\n\n    public function __invoke(RegisterCommand $command): void\n    {\n        // Orchestration only, no business logic\n        $user = new User(\n            id: UserId::generate(),\n            email: new Email($command-&gt;email),\n            password: $this-&gt;hasher-&gt;hash($command-&gt;password),\n        );\n\n        $this-&gt;repository-&gt;save($user);\n    }\n}\n</code></pre></p>"},{"location":"ARCHITECTURE/#23-infrastructure-details-techniques","title":"2.3 Infrastructure (D\u00e9tails techniques)","text":"<p>Responsabilit\u00e9: Impl\u00e9mentations concr\u00e8tes, d\u00e9tails techniques</p> <p>Contient: - <code>Persistence/</code> - Adapters pour la persistance (Doctrine, etc.) - <code>Messaging/</code> - Adapters pour la messagerie - <code>ExternalAPI/</code> - Adapters pour les APIs externes</p> <p>R\u00e8gles: - Impl\u00e9mente les Ports (interfaces du Domain) - Contient les d\u00e9tails techniques - Peut d\u00e9pendre de Domain et Application - Utilise Doctrine, HTTP clients, etc.</p> <p>Adapter Doctrine: <pre><code>namespace App\\User\\Account\\Infrastructure\\Persistence\\Doctrine;\n\nuse App\\User\\Account\\Domain\\Model\\User;\nuse App\\User\\Account\\Domain\\Port\\UserRepositoryInterface;\nuse Doctrine\\ORM\\EntityManagerInterface;\n\nfinal class DoctrineUserRepository implements UserRepositoryInterface\n{\n    public function __construct(\n        private readonly EntityManagerInterface $em,\n    ) {\n    }\n\n    public function save(User $user): void\n    {\n        $this-&gt;em-&gt;persist($user);\n        $this-&gt;em-&gt;flush();\n    }\n\n    public function findById(UserId $id): ?User\n    {\n        return $this-&gt;em-&gt;find(User::class, $id-&gt;value);\n    }\n}\n</code></pre></p>"},{"location":"ARCHITECTURE/#3-ports-vs-adapters","title":"3. Ports vs Adapters","text":"<pre><code>%%{init: {'theme':'base', 'themeVariables': { 'fontSize':'15px'}}}%%\ngraph LR\n    subgraph Primary[\"\ud83c\udfae Primary Adapters (Driving)\"]\n        HTTP[\"\ud83c\udf10 HTTP Controller\"]\n        CLI[\"\u2328\ufe0f CLI Command\"]\n        GraphQL[\"\ud83d\udcca GraphQL Resolver\"]\n    end\n\n    subgraph Core[\"\ud83d\udc8e Core - Domain + Application\"]\n        UseCases[\"\u2699\ufe0f Use Cases&lt;br/&gt;&lt;small&gt;Handlers&lt;/small&gt;\"]\n        Ports[\"\ud83d\udd17 Ports&lt;br/&gt;&lt;small&gt;Interfaces&lt;/small&gt;\"]\n    end\n\n    subgraph Secondary[\"\ud83d\udd0c Secondary Adapters (Driven)\"]\n        Doctrine[\"\ud83d\uddc4\ufe0f Doctrine&lt;br/&gt;&lt;small&gt;Repository&lt;/small&gt;\"]\n        Redis[\"\u26a1 Redis&lt;br/&gt;&lt;small&gt;Cache&lt;/small&gt;\"]\n        SMTP[\"\ud83d\udce7 SMTP&lt;br/&gt;&lt;small&gt;Mailer&lt;/small&gt;\"]\n    end\n\n    Primary ==&gt;|\"calls\"| UseCases\n    UseCases ==&gt;|\"uses\"| Ports\n    Secondary -.-&gt;|\"\ud83c\udfaf implements\"| Ports\n\n    style Core fill:#C8E6C9,stroke:#2E7D32,stroke-width:4px,color:#000\n    style Primary fill:#E1BEE7,stroke:#6A1B9A,stroke-width:3px,color:#000\n    style Secondary fill:#F8BBD0,stroke:#C2185B,stroke-width:3px,color:#000</code></pre>"},{"location":"ARCHITECTURE/#31-port-interface","title":"3.1 Port (Interface)","text":"<p>Un Port est une interface d\u00e9finie dans le Domain qui repr\u00e9sente un besoin.</p> <p>Types de Ports:</p> <ol> <li>Ports Primaires (Driving/Primary) - Ce que l'application offre</li> <li>Exemple : Use case handlers</li> <li> <p>Appel\u00e9s par les adapters primaires (UI)</p> </li> <li> <p>Ports Secondaires (Driven/Secondary) - Ce que l'application requiert</p> </li> <li>Exemple : <code>RepositoryInterface</code>, <code>EmailSenderInterface</code></li> <li>Impl\u00e9ment\u00e9s par les adapters secondaires (Infrastructure)</li> </ol>"},{"location":"ARCHITECTURE/#32-adapter-implementation","title":"3.2 Adapter (Impl\u00e9mentation)","text":"<p>Un Adapter est une impl\u00e9mentation concr\u00e8te d'un Port dans l'Infrastructure.</p> <p>Exemples d'Adapters:</p> <pre><code>// Port (Domain)\ninterface UserRepositoryInterface\n{\n    public function save(User $user): void;\n}\n\n// Adapter 1 - Doctrine (Infrastructure)\nclass DoctrineUserRepository implements UserRepositoryInterface\n{\n    public function save(User $user): void\n    {\n        $this-&gt;em-&gt;persist($user);\n        $this-&gt;em-&gt;flush();\n    }\n}\n\n// Adapter 2 - In Memory (Infrastructure/Tests)\nclass InMemoryUserRepository implements UserRepositoryInterface\n{\n    private array $users = [];\n\n    public function save(User $user): void\n    {\n        $this-&gt;users[$user-&gt;getId()-&gt;value] = $user;\n    }\n}\n</code></pre>"},{"location":"ARCHITECTURE/#4-cqrs-pattern","title":"4. CQRS Pattern","text":"<pre><code>%%{init: {'theme':'base', 'themeVariables': { 'fontSize':'14px'}}}%%\ngraph TB\n    UI[\"\ud83c\udfae UI Layer&lt;br/&gt;&lt;small&gt;Controller/CLI&lt;/small&gt;\"]\n\n    subgraph Write[\"\u270d\ufe0f Write Side - Commands\"]\n        CMD[\"\ud83d\udcdd Command&lt;br/&gt;&lt;small&gt;RegisterUserCommand&lt;/small&gt;\"]\n        CMDH[\"\u2699\ufe0f Command Handler&lt;br/&gt;&lt;small&gt;RegisterUserCommandHandler&lt;/small&gt;\"]\n        WriteRepo[\"\ud83d\udcbe Write Repository&lt;br/&gt;&lt;small&gt;Save/Update/Delete&lt;/small&gt;\"]\n    end\n\n    subgraph Read[\"\ud83d\udcd6 Read Side - Queries\"]\n        QRY[\"\ud83d\udd0d Query&lt;br/&gt;&lt;small&gt;FindUserQuery&lt;/small&gt;\"]\n        QRYH[\"\u2699\ufe0f Query Handler&lt;br/&gt;&lt;small&gt;FindUserQueryHandler&lt;/small&gt;\"]\n        ReadRepo[\"\ud83d\udcda Read Repository&lt;br/&gt;&lt;small&gt;Find/List/Search&lt;/small&gt;\"]\n        RESP[\"\ud83d\udccb Response&lt;br/&gt;&lt;small&gt;FindUserResponse&lt;/small&gt;\"]\n    end\n\n    UI ==&gt;|\"dispatch\"| CMD\n    UI ==&gt;|\"dispatch\"| QRY\n\n    CMD ==&gt; CMDH\n    CMDH ==&gt;|\"uses\"| WriteRepo\n\n    QRY ==&gt; QRYH\n    QRYH ==&gt;|\"uses\"| ReadRepo\n    QRYH ==&gt;|\"returns\"| RESP\n\n    style Write fill:#FFCDD2,stroke:#C62828,stroke-width:3px,color:#000\n    style Read fill:#B3E5FC,stroke:#0277BD,stroke-width:3px,color:#000\n    style UI fill:#E1BEE7,stroke:#6A1B9A,stroke-width:3px,color:#000</code></pre>"},{"location":"ARCHITECTURE/#41-command-ecriture","title":"4.1 Command (\u00c9criture)","text":"<p>Caract\u00e9ristiques: - Intention de modifier l'\u00e9tat - Retourne <code>void</code> - Nom au pr\u00e9sent : <code>RegisterUser</code>, <code>PublishArticle</code></p> <pre><code>final readonly class PublishArticleCommand\n{\n    public function __construct(\n        public string $articleId,\n        public \\DateTimeImmutable $publishedAt,\n    ) {\n    }\n}\n</code></pre>"},{"location":"ARCHITECTURE/#42-query-lecture","title":"4.2 Query (Lecture)","text":"<p>Caract\u00e9ristiques: - Intention de lire des donn\u00e9es - Retourne un <code>Response</code> - Nom descriptif : <code>FindUserById</code>, <code>ListArticles</code></p> <pre><code>final readonly class FindUserByIdQuery\n{\n    public function __construct(\n        public string $userId,\n    ) {\n    }\n}\n\nfinal readonly class FindUserByIdResponse\n{\n    public function __construct(\n        public string $id,\n        public string $email,\n        public bool $isActive,\n    ) {\n    }\n}\n</code></pre>"},{"location":"ARCHITECTURE/#43-separation-stricte","title":"4.3 S\u00e9paration stricte","text":"<pre><code>// MAUVAIS - Retourne une valeur\nclass RegisterUserCommand\n{\n    public function __invoke(RegisterCommand $cmd): User { ... }\n}\n\n// BON - Void uniquement\nclass RegisterUserCommandHandler\n{\n    public function __invoke(RegisterCommand $cmd): void { ... }\n}\n\n// BON - Query retourne les donn\u00e9es\nclass FindUserQueryHandler\n{\n    public function __invoke(FindUserQuery $q): FindUserResponse { ... }\n}\n</code></pre>"},{"location":"ARCHITECTURE/#5-testabilite","title":"5. Testabilit\u00e9","text":"<p>L'architecture hexagonale facilite grandement les tests :</p> <pre><code>graph TB\n    subgraph Pyramid[\"Pyramide des Tests\"]\n        E2E[Tests E2E&lt;br/&gt;Lents - Peu nombreux&lt;br/&gt;Full stack avec DB]\n        Integration[Tests d'Int\u00e9gration&lt;br/&gt;Moyens - Mod\u00e9r\u00e9s&lt;br/&gt;Avec Symfony Kernel]\n        Unit[Tests Unitaires&lt;br/&gt;Rapides - Nombreux&lt;br/&gt;InMemory - Mocks]\n    end\n\n    subgraph Layers[\"Couches Test\u00e9es\"]\n        UnitTests[Domain + Application&lt;br/&gt;Tests unitaires&lt;br/&gt;InMemoryRepository]\n        IntTests[Handlers + Adapters&lt;br/&gt;Tests d'int\u00e9gration&lt;br/&gt;DoctrineRepository]\n        E2ETests[UI \u2192 DB&lt;br/&gt;Tests E2E&lt;br/&gt;Parcours complet]\n    end\n\n    Unit -.-&gt;|teste| UnitTests\n    Integration -.-&gt;|teste| IntTests\n    E2E -.-&gt;|teste| E2ETests\n\n    style Unit fill:#90EE90,stroke:#333,stroke-width:2px\n    style Integration fill:#87CEEB,stroke:#333,stroke-width:2px\n    style E2E fill:#FFB6C1,stroke:#333,stroke-width:2px</code></pre>"},{"location":"ARCHITECTURE/#51-test-du-domain-ultra-rapide","title":"5.1 Test du Domain (ultra rapide)","text":"<pre><code>class UserTest extends TestCase\n{\n    public function testUserCanBeActivated(): void\n    {\n        $user = new User(\n            id: UserId::generate(),\n            email: new Email('test@example.com'),\n        );\n\n        $user-&gt;activate();\n\n        $this-&gt;assertTrue($user-&gt;isActive());\n    }\n}\n</code></pre>"},{"location":"ARCHITECTURE/#52-test-de-lapplication-avec-inmemory","title":"5.2 Test de l'Application avec InMemory","text":"<pre><code>class RegisterCommandHandlerTest extends TestCase\n{\n    public function testUserIsRegistered(): void\n    {\n        $repository = new InMemoryUserRepository();\n        $handler = new RegisterCommandHandler($repository);\n\n        $command = new RegisterCommand(\n            email: 'test@example.com',\n            password: 'secret',\n        );\n\n        $handler($command);\n\n        $this-&gt;assertCount(1, $repository-&gt;all());\n    }\n}\n</code></pre>"},{"location":"ARCHITECTURE/#6-structure-de-repertoires","title":"6. Structure de r\u00e9pertoires","text":"<pre><code>src/\n\u2514\u2500\u2500 User/                          # Bounded Context\n    \u2514\u2500\u2500 Account/                   # Module\n        \u251c\u2500\u2500 Application/           # Couche Application\n        \u2502   \u251c\u2500\u2500 Register/\n        \u2502   \u2502   \u251c\u2500\u2500 RegisterCommand.php\n        \u2502   \u2502   \u251c\u2500\u2500 RegisterCommandHandler.php\n        \u2502   \u2502   \u2514\u2500\u2500 AccountFactory.php\n        \u2502   \u2514\u2500\u2500 Find/\n        \u2502       \u251c\u2500\u2500 FindQuery.php\n        \u2502       \u251c\u2500\u2500 FindQueryHandler.php\n        \u2502       \u2514\u2500\u2500 FindResponse.php\n        \u2502\n        \u251c\u2500\u2500 Domain/                # Couche Domain (C\u0153ur)\n        \u2502   \u251c\u2500\u2500 Model/\n        \u2502   \u2502   \u2514\u2500\u2500 User.php\n        \u2502   \u251c\u2500\u2500 ValueObject/\n        \u2502   \u2502   \u251c\u2500\u2500 Email.php\n        \u2502   \u2502   \u2514\u2500\u2500 UserId.php\n        \u2502   \u2514\u2500\u2500 Port/\n        \u2502       \u2514\u2500\u2500 UserRepositoryInterface.php\n        \u2502\n        \u2514\u2500\u2500 Infrastructure/        # Couche Infrastructure\n            \u251c\u2500\u2500 Persistence/\n            \u2502   \u251c\u2500\u2500 Doctrine/\n            \u2502   \u2502   \u251c\u2500\u2500 DoctrineUserRepository.php\n            \u2502   \u2502   \u2514\u2500\u2500 Mapping/\n            \u2502   \u2502       \u2514\u2500\u2500 User.orm.xml\n            \u2502   \u2514\u2500\u2500 InMemory/\n            \u2502       \u2514\u2500\u2500 InMemoryUserRepository.php\n            \u2514\u2500\u2500 Messaging/\n                \u2514\u2500\u2500 SymfonyMessengerAdapter.php\n</code></pre>"},{"location":"ARCHITECTURE/#7-bonnes-pratiques","title":"7. Bonnes pratiques","text":""},{"location":"ARCHITECTURE/#71-domain-pur","title":"7.1 Domain pur","text":"<pre><code>// MAUVAIS - D\u00e9pendance \u00e0 Doctrine\nuse Doctrine\\ORM\\Mapping as ORM;\n\n#[ORM\\Entity]\nclass User { }\n\n// BON - PHP pur\nclass User\n{\n    public function __construct(\n        private UserId $id,\n        private Email $email,\n    ) {\n    }\n}\n</code></pre>"},{"location":"ARCHITECTURE/#72-value-objects-immuables","title":"7.2 Value Objects immuables","text":"<pre><code>// MAUVAIS - Mutable\nclass Email\n{\n    public string $value;\n\n    public function setValue(string $value): void\n    {\n        $this-&gt;value = $value;\n    }\n}\n\n// BON - Immutable avec readonly\nfinal readonly class Email\n{\n    public function __construct(\n        public string $value,\n    ) {\n        if (!filter_var($value, FILTER_VALIDATE_EMAIL)) {\n            throw new InvalidEmailException();\n        }\n    }\n}\n</code></pre>"},{"location":"ARCHITECTURE/#73-ports-dans-le-domain","title":"7.3 Ports dans le Domain","text":"<pre><code>// MAUVAIS - Adapter dans le Domain\nnamespace App\\Domain;\n\nuse Doctrine\\ORM\\EntityManagerInterface;\n\nclass UserService\n{\n    public function __construct(\n        private EntityManagerInterface $em\n    ) {}\n}\n\n// BON - Port (interface) dans le Domain\nnamespace App\\Domain\\Port;\n\ninterface UserRepositoryInterface\n{\n    public function save(User $user): void;\n}\n\nnamespace App\\Application;\n\nclass RegisterHandler\n{\n    public function __construct(\n        private UserRepositoryInterface $repository\n    ) {}\n}\n</code></pre>"},{"location":"ARCHITECTURE/#74-factories-pour-creation-complexe","title":"7.4 Factories pour cr\u00e9ation complexe","text":"<pre><code>final readonly class OrderFactory\n{\n    public function __construct(\n        private IdGeneratorInterface $idGenerator,\n        private ClockInterface $clock,\n    ) {\n    }\n\n    public function create(CreateOrderCommand $command): Order\n    {\n        return new Order(\n            id: new OrderId($this-&gt;idGenerator-&gt;generate()),\n            customerId: new CustomerId($command-&gt;customerId),\n            items: $this-&gt;createOrderItems($command-&gt;items),\n            createdAt: $this-&gt;clock-&gt;now(),\n        );\n    }\n}\n</code></pre>"},{"location":"ARCHITECTURE/#8-design-patterns-favorises","title":"8. Design Patterns Favoris\u00e9s","text":"<p>L'architecture hexagonale encourage naturellement l'utilisation de nombreux design patterns \u00e9prouv\u00e9s. Cette section explore comment l'hexagonal facilite et favorise ces patterns.</p> <pre><code>graph TB\n    subgraph Creational[\"Patterns de Cr\u00e9ation (Creational)\"]\n        Factory[Factory Pattern]\n        Builder[Builder Pattern]\n        Singleton[Singleton Pattern]\n    end\n\n    subgraph Structural[\"Patterns Structuraux (Structural)\"]\n        Adapter[Adapter Pattern]\n        Repository[Repository Pattern]\n        DTO[DTO Pattern]\n    end\n\n    subgraph Behavioral[\"Patterns Comportementaux (Behavioral)\"]\n        Strategy[Strategy Pattern]\n        Observer[Observer Pattern]\n        Command[Command Pattern]\n    end\n\n    subgraph Hexagonal[\"Architecture Hexagonale\"]\n        Domain[Domain Layer]\n        App[Application Layer]\n        Infra[Infrastructure Layer]\n    end\n\n    Factory -.-&gt;|cr\u00e9e| Domain\n    Builder -.-&gt;|construit| Domain\n    Adapter -.-&gt;|impl\u00e9mente ports| Infra\n    Repository -.-&gt;|abstrait persistance| Domain\n    DTO -.-&gt;|transf\u00e8re donn\u00e9es| App\n    Strategy -.-&gt;|s\u00e9lection impl\u00e9mentation| Infra\n    Command -.-&gt;|encapsule intention| App\n\n    style Creational fill:#FFD700,stroke:#333,stroke-width:2px\n    style Structural fill:#87CEEB,stroke:#333,stroke-width:2px\n    style Behavioral fill:#FFB6C1,stroke:#333,stroke-width:2px\n    style Hexagonal fill:#90EE90,stroke:#333,stroke-width:2px</code></pre>"},{"location":"ARCHITECTURE/#81-patterns-de-creation-creational-patterns","title":"8.1 Patterns de Cr\u00e9ation (Creational Patterns)","text":""},{"location":"ARCHITECTURE/#811-factory-pattern","title":"8.1.1 Factory Pattern","text":"<p>Pourquoi l'hexagonal le favorise: - La cr\u00e9ation d'entit\u00e9s complexes n\u00e9cessite souvent plusieurs Value Objects - Validation et logique m\u00e9tier doivent \u00eatre centralis\u00e9es - Le Domain ne doit pas d\u00e9pendre de l'Infrastructure</p> <p>Exemple: <pre><code>&lt;?php\n\ndeclare(strict_types=1);\n\nnamespace App\\User\\Account\\Application\\Register;\n\nuse App\\User\\Account\\Domain\\Model\\User;\nuse App\\User\\Account\\Domain\\ValueObject\\Email;\nuse App\\User\\Account\\Domain\\ValueObject\\UserId;\nuse App\\User\\Account\\Domain\\ValueObject\\HashedPassword;\nuse App\\Shared\\Domain\\Service\\IdGeneratorInterface;\nuse App\\Shared\\Domain\\Service\\PasswordHasherInterface;\n\n/**\n * Factory Pattern - Cr\u00e9e des entit\u00e9s complexes du Domain\n */\nfinal readonly class UserFactory\n{\n    public function __construct(\n        private IdGeneratorInterface $idGenerator,\n        private PasswordHasherInterface $passwordHasher,\n    ) {\n    }\n\n    public function createFromCommand(RegisterCommand $command): User\n    {\n        return new User(\n            id: new UserId($this-&gt;idGenerator-&gt;generate()),\n            email: new Email($command-&gt;email),\n            password: new HashedPassword(\n                $this-&gt;passwordHasher-&gt;hash($command-&gt;password)\n            ),\n            createdAt: new \\DateTimeImmutable(),\n        );\n    }\n}\n</code></pre></p> <p>Avantages dans l'hexagonal: - Encapsule la logique de cr\u00e9ation complexe - Isole les d\u00e9pendances (ID generator, hasher) de l'entit\u00e9 - Facilite les tests (mock de la factory)</p>"},{"location":"ARCHITECTURE/#812-builder-pattern","title":"8.1.2 Builder Pattern","text":"<p>Utilisation: - Construction progressive d'objets complexes - Configurations avec nombreuses options</p> <p>Exemple: <pre><code>&lt;?php\n\ndeclare(strict_types=1);\n\nnamespace App\\Order\\Domain\\Builder;\n\nuse App\\Order\\Domain\\Model\\Order;\nuse App\\Order\\Domain\\ValueObject\\OrderId;\nuse App\\Order\\Domain\\ValueObject\\OrderItem;\n\n/**\n * Builder Pattern - Construction progressive d'une commande\n */\nfinal class OrderBuilder\n{\n    private ?OrderId $id = null;\n    private ?string $customerId = null;\n    private array $items = [];\n    private ?string $shippingAddress = null;\n    private ?string $billingAddress = null;\n\n    public function withId(OrderId $id): self\n    {\n        $this-&gt;id = $id;\n        return $this;\n    }\n\n    public function forCustomer(string $customerId): self\n    {\n        $this-&gt;customerId = $customerId;\n        return $this;\n    }\n\n    public function addItem(OrderItem $item): self\n    {\n        $this-&gt;items[] = $item;\n        return $this;\n    }\n\n    public function withShippingAddress(string $address): self\n    {\n        $this-&gt;shippingAddress = $address;\n        return $this;\n    }\n\n    public function build(): Order\n    {\n        if ($this-&gt;id === null || $this-&gt;customerId === null) {\n            throw new \\LogicException('Order must have id and customer');\n        }\n\n        return new Order(\n            id: $this-&gt;id,\n            customerId: $this-&gt;customerId,\n            items: $this-&gt;items,\n            shippingAddress: $this-&gt;shippingAddress,\n            billingAddress: $this-&gt;billingAddress ?? $this-&gt;shippingAddress,\n        );\n    }\n}\n\n// Utilisation dans un test\n$order = (new OrderBuilder())\n    -&gt;withId(OrderId::generate())\n    -&gt;forCustomer('customer-123')\n    -&gt;addItem(new OrderItem('product-1', 2))\n    -&gt;addItem(new OrderItem('product-2', 1))\n    -&gt;withShippingAddress('123 Main St')\n    -&gt;build();\n</code></pre></p>"},{"location":"ARCHITECTURE/#813-singleton-pattern-port-registry","title":"8.1.3 Singleton Pattern (Port Registry)","text":"<p>Cas d'usage limit\u00e9 mais pertinent: - Registre de ports disponibles - Configuration globale</p> <pre><code>&lt;?php\n\ndeclare(strict_types=1);\n\nnamespace App\\Shared\\Infrastructure\\Registry;\n\n/**\n * Singleton - Registre des adapters disponibles\n */\nfinal class AdapterRegistry\n{\n    private static ?self $instance = null;\n    private array $adapters = [];\n\n    private function __construct() {}\n\n    public static function getInstance(): self\n    {\n        if (self::$instance === null) {\n            self::$instance = new self();\n        }\n\n        return self::$instance;\n    }\n\n    public function register(string $portName, object $adapter): void\n    {\n        $this-&gt;adapters[$portName] = $adapter;\n    }\n\n    public function get(string $portName): object\n    {\n        return $this-&gt;adapters[$portName] ?? throw new \\RuntimeException(\n            \"No adapter registered for port: {$portName}\"\n        );\n    }\n}\n</code></pre>"},{"location":"ARCHITECTURE/#82-patterns-structuraux-structural-patterns","title":"8.2 Patterns Structuraux (Structural Patterns)","text":""},{"location":"ARCHITECTURE/#821-adapter-pattern-cur-de-lhexagonal","title":"8.2.1 Adapter Pattern (C\u0153ur de l'Hexagonal)","text":"<p>C'est LE pattern central de l'architecture hexagonale!</p> <p>Pourquoi: - Traduit les interfaces externes vers les Ports du Domain - Permet de changer d'infrastructure sans toucher au Domain</p> <p>Exemple complet: <pre><code>&lt;?php\n\ndeclare(strict_types=1);\n\n// PORT (Domain Layer)\nnamespace App\\User\\Account\\Domain\\Port;\n\nuse App\\User\\Account\\Domain\\Model\\User;\nuse App\\User\\Account\\Domain\\ValueObject\\UserId;\n\ninterface UserRepositoryInterface\n{\n    public function save(User $user): void;\n    public function findById(UserId $id): ?User;\n    public function findByEmail(string $email): ?User;\n}\n\n// ADAPTER 1 - Doctrine (Infrastructure)\nnamespace App\\User\\Account\\Infrastructure\\Persistence\\Doctrine;\n\nuse App\\User\\Account\\Domain\\Model\\User;\nuse App\\User\\Account\\Domain\\Port\\UserRepositoryInterface;\nuse App\\User\\Account\\Domain\\ValueObject\\UserId;\nuse Doctrine\\ORM\\EntityManagerInterface;\n\n/**\n * Adapter Pattern - Adapte Doctrine vers notre Port\n */\nfinal readonly class DoctrineUserRepository implements UserRepositoryInterface\n{\n    public function __construct(\n        private EntityManagerInterface $entityManager,\n    ) {\n    }\n\n    public function save(User $user): void\n    {\n        $this-&gt;entityManager-&gt;persist($user);\n        $this-&gt;entityManager-&gt;flush();\n    }\n\n    public function findById(UserId $id): ?User\n    {\n        return $this-&gt;entityManager-&gt;find(User::class, $id-&gt;value);\n    }\n\n    public function findByEmail(string $email): ?User\n    {\n        return $this-&gt;entityManager\n            -&gt;getRepository(User::class)\n            -&gt;findOneBy(['email.value' =&gt; $email]);\n    }\n}\n\n// ADAPTER 2 - MongoDB (Infrastructure)\nnamespace App\\User\\Account\\Infrastructure\\Persistence\\MongoDB;\n\nuse App\\User\\Account\\Domain\\Model\\User;\nuse App\\User\\Account\\Domain\\Port\\UserRepositoryInterface;\nuse MongoDB\\Client;\n\n/**\n * Adapter Pattern - Adapte MongoDB vers le m\u00eame Port\n */\nfinal readonly class MongoUserRepository implements UserRepositoryInterface\n{\n    private const COLLECTION = 'users';\n\n    public function __construct(\n        private Client $mongoClient,\n        private string $databaseName,\n    ) {\n    }\n\n    public function save(User $user): void\n    {\n        $collection = $this-&gt;mongoClient\n            -&gt;selectDatabase($this-&gt;databaseName)\n            -&gt;selectCollection(self::COLLECTION);\n\n        $collection-&gt;updateOne(\n            ['_id' =&gt; $user-&gt;getId()-&gt;value],\n            ['$set' =&gt; $this-&gt;serialize($user)],\n            ['upsert' =&gt; true]\n        );\n    }\n\n    // ... autres m\u00e9thodes\n}\n\n// ADAPTER 3 - InMemory (Tests)\nnamespace Tests\\Unit\\User\\Account\\Infrastructure\\Persistence\\InMemory;\n\nuse App\\User\\Account\\Domain\\Model\\User;\nuse App\\User\\Account\\Domain\\Port\\UserRepositoryInterface;\n\n/**\n * Adapter Pattern - Impl\u00e9mentation en m\u00e9moire pour tests rapides\n */\nfinal class InMemoryUserRepository implements UserRepositoryInterface\n{\n    private array $users = [];\n\n    public function save(User $user): void\n    {\n        $this-&gt;users[$user-&gt;getId()-&gt;value] = $user;\n    }\n\n    public function findById(UserId $id): ?User\n    {\n        return $this-&gt;users[$id-&gt;value] ?? null;\n    }\n\n    public function findByEmail(string $email): ?User\n    {\n        foreach ($this-&gt;users as $user) {\n            if ($user-&gt;getEmail()-&gt;value === $email) {\n                return $user;\n            }\n        }\n\n        return null;\n    }\n\n    // Helper pour les tests\n    public function clear(): void\n    {\n        $this-&gt;users = [];\n    }\n}\n</code></pre></p> <p>B\u00e9n\u00e9fices: - 3 adapters diff\u00e9rents pour le m\u00eame port - Le Domain ne change jamais - L'Application ne change jamais - Changement de DB = changer l'adapter dans <code>services.yaml</code></p>"},{"location":"ARCHITECTURE/#822-repository-pattern","title":"8.2.2 Repository Pattern","text":"<p>Int\u00e9gration naturelle: - Les Ports d\u00e9finissent les interfaces de Repository - Les Adapters impl\u00e9mentent la persistance</p> <p>Exemple avec m\u00e9thodes m\u00e9tier: <pre><code>&lt;?php\n\ndeclare(strict_types=1);\n\n// Port avec m\u00e9thodes m\u00e9tier\nnamespace App\\Product\\Domain\\Port;\n\nuse App\\Product\\Domain\\Model\\Product;\n\ninterface ProductRepositoryInterface\n{\n    public function save(Product $product): void;\n    public function findById(string $id): ?Product;\n\n    // M\u00e9thodes m\u00e9tier (pas technique)\n    public function findActiveProducts(): array;\n    public function findProductsLowInStock(int $threshold): array;\n    public function findBestSellers(int $limit): array;\n}\n\n// Adapter Doctrine\nnamespace App\\Product\\Infrastructure\\Persistence\\Doctrine;\n\nuse App\\Product\\Domain\\Model\\Product;\nuse App\\Product\\Domain\\Port\\ProductRepositoryInterface;\n\nfinal readonly class DoctrineProductRepository implements ProductRepositoryInterface\n{\n    public function findActiveProducts(): array\n    {\n        return $this-&gt;entityManager\n            -&gt;createQueryBuilder()\n            -&gt;select('p')\n            -&gt;from(Product::class, 'p')\n            -&gt;where('p.isActive = :active')\n            -&gt;setParameter('active', true)\n            -&gt;getQuery()\n            -&gt;getResult();\n    }\n\n    public function findProductsLowInStock(int $threshold): array\n    {\n        return $this-&gt;entityManager\n            -&gt;createQueryBuilder()\n            -&gt;select('p')\n            -&gt;from(Product::class, 'p')\n            -&gt;where('p.stock &lt; :threshold')\n            -&gt;setParameter('threshold', $threshold)\n            -&gt;orderBy('p.stock', 'ASC')\n            -&gt;getQuery()\n            -&gt;getResult();\n    }\n}\n</code></pre></p>"},{"location":"ARCHITECTURE/#823-dto-pattern-data-transfer-object","title":"8.2.3 DTO Pattern (Data Transfer Object)","text":"<p>Utilisation syst\u00e9matique dans l'hexagonal:</p> <p>1. Commands (Write) - DTOs immuables <pre><code>&lt;?php\n\ndeclare(strict_types=1);\n\nnamespace App\\User\\Account\\Application\\Register;\n\n/**\n * DTO Pattern - Command = DTO immutable pour l'\u00e9criture\n */\nfinal readonly class RegisterCommand\n{\n    public function __construct(\n        public string $email,\n        public string $password,\n        public string $firstName,\n        public string $lastName,\n    ) {\n    }\n}\n</code></pre></p> <p>2. Queries Response - DTOs de lecture <pre><code>&lt;?php\n\ndeclare(strict_types=1);\n\nnamespace App\\User\\Account\\Application\\FindById;\n\n/**\n * DTO Pattern - Response = DTO pour la lecture\n */\nfinal readonly class FindByIdResponse\n{\n    public function __construct(\n        public string $id,\n        public string $email,\n        public string $firstName,\n        public string $lastName,\n        public bool $isActive,\n        public string $createdAt,\n    ) {\n    }\n\n    public static function fromUser(User $user): self\n    {\n        return new self(\n            id: $user-&gt;getId()-&gt;value,\n            email: $user-&gt;getEmail()-&gt;value,\n            firstName: $user-&gt;getFirstName(),\n            lastName: $user-&gt;getLastName(),\n            isActive: $user-&gt;isActive(),\n            createdAt: $user-&gt;getCreatedAt()-&gt;format('Y-m-d H:i:s'),\n        );\n    }\n}\n</code></pre></p> <p>3. API DTOs - S\u00e9paration UI/Application <pre><code>&lt;?php\n\ndeclare(strict_types=1);\n\nnamespace App\\UI\\Http\\DTO;\n\n/**\n * DTO Pattern - DTO sp\u00e9cifique \u00e0 l'API HTTP\n */\nfinal readonly class RegisterUserRequest\n{\n    public function __construct(\n        public string $email,\n        public string $password,\n        public string $first_name,  // snake_case pour API\n        public string $last_name,\n    ) {\n    }\n\n    public function toCommand(): RegisterCommand\n    {\n        return new RegisterCommand(\n            email: $this-&gt;email,\n            password: $this-&gt;password,\n            firstName: $this-&gt;first_name,  // Conversion vers Domain\n            lastName: $this-&gt;last_name,\n        );\n    }\n}\n</code></pre></p> <p>Flux complet: <pre><code>HTTP Request (JSON)\n    \u2192 RegisterUserRequest (DTO API)\n    \u2192 RegisterCommand (DTO Application)\n    \u2192 User (Domain Entity)\n    \u2192 Persistence\n</code></pre></p>"},{"location":"ARCHITECTURE/#83-patterns-comportementaux-behavioral-patterns","title":"8.3 Patterns Comportementaux (Behavioral Patterns)","text":""},{"location":"ARCHITECTURE/#831-strategy-pattern","title":"8.3.1 Strategy Pattern","text":"<p>Usage naturel dans l'hexagonal: - S\u00e9lection dynamique d'adapters - Algorithmes de calcul interchangeables</p> <p>Exemple - Multiple payment strategies: <pre><code>&lt;?php\n\ndeclare(strict_types=1);\n\n// Port (Interface = Strategy)\nnamespace App\\Payment\\Domain\\Port;\n\nuse App\\Payment\\Domain\\Model\\Payment;\n\ninterface PaymentGatewayInterface\n{\n    public function process(Payment $payment): bool;\n    public function refund(Payment $payment): bool;\n}\n\n// Strategy 1 - Stripe\nnamespace App\\Payment\\Infrastructure\\Gateway;\n\nuse App\\Payment\\Domain\\Port\\PaymentGatewayInterface;\nuse Stripe\\StripeClient;\n\nfinal readonly class StripePaymentGateway implements PaymentGatewayInterface\n{\n    public function __construct(\n        private StripeClient $stripe,\n    ) {\n    }\n\n    public function process(Payment $payment): bool\n    {\n        $result = $this-&gt;stripe-&gt;charges-&gt;create([\n            'amount' =&gt; $payment-&gt;getAmount()-&gt;inCents(),\n            'currency' =&gt; $payment-&gt;getAmount()-&gt;currency,\n            'source' =&gt; $payment-&gt;getToken(),\n        ]);\n\n        return $result-&gt;status === 'succeeded';\n    }\n\n    public function refund(Payment $payment): bool\n    {\n        // Stripe refund logic\n    }\n}\n\n// Strategy 2 - PayPal\nnamespace App\\Payment\\Infrastructure\\Gateway;\n\nuse App\\Payment\\Domain\\Port\\PaymentGatewayInterface;\n\nfinal readonly class PayPalPaymentGateway implements PaymentGatewayInterface\n{\n    public function process(Payment $payment): bool\n    {\n        // PayPal logic\n    }\n}\n\n// Context - Utilisation de la strat\u00e9gie\nnamespace App\\Payment\\Application\\ProcessPayment;\n\nuse App\\Payment\\Domain\\Port\\PaymentGatewayInterface;\n\n#[AsMessageHandler]\nfinal readonly class ProcessPaymentCommandHandler\n{\n    public function __construct(\n        private PaymentGatewayInterface $paymentGateway,  // Strategy inject\u00e9e\n    ) {\n    }\n\n    public function __invoke(ProcessPaymentCommand $command): void\n    {\n        $payment = $this-&gt;createPayment($command);\n\n        // La strat\u00e9gie est utilis\u00e9e sans savoir laquelle c'est\n        $success = $this-&gt;paymentGateway-&gt;process($payment);\n\n        if (!$success) {\n            throw new PaymentFailedException();\n        }\n    }\n}\n</code></pre></p> <p>Configuration Symfony (choix de strat\u00e9gie): <pre><code># config/services.yaml\nservices:\n    # Strat\u00e9gie par d\u00e9faut\n    App\\Payment\\Domain\\Port\\PaymentGatewayInterface:\n        class: App\\Payment\\Infrastructure\\Gateway\\StripePaymentGateway\n\n    # Ou selon environnement\n    App\\Payment\\Domain\\Port\\PaymentGatewayInterface:\n        class: '%env(PAYMENT_GATEWAY)%'\n        # PAYMENT_GATEWAY=App\\Payment\\Infrastructure\\Gateway\\PayPalPaymentGateway\n</code></pre></p>"},{"location":"ARCHITECTURE/#832-command-pattern-cqrs","title":"8.3.2 Command Pattern (CQRS)","text":"<p>Impl\u00e9mentation native dans l'hexagonal:</p> <pre><code>&lt;?php\n\ndeclare(strict_types=1);\n\nnamespace App\\Order\\Application\\PlaceOrder;\n\n/**\n * Command Pattern - Encapsule une requ\u00eate comme un objet\n */\nfinal readonly class PlaceOrderCommand\n{\n    public function __construct(\n        public string $customerId,\n        public array $items,\n        public string $shippingAddress,\n    ) {\n    }\n}\n\n// Handler = Receiver\n#[AsMessageHandler]\nfinal readonly class PlaceOrderCommandHandler\n{\n    public function __construct(\n        private OrderRepositoryInterface $orderRepository,\n        private OrderFactory $orderFactory,\n    ) {\n    }\n\n    public function __invoke(PlaceOrderCommand $command): void\n    {\n        $order = $this-&gt;orderFactory-&gt;createFromCommand($command);\n        $this-&gt;orderRepository-&gt;save($order);\n    }\n}\n\n// Invoker\nnamespace App\\UI\\Http\\Controller;\n\nuse Symfony\\Component\\Messenger\\MessageBusInterface;\n\nfinal class OrderController\n{\n    public function __construct(\n        private MessageBusInterface $commandBus,  // Invoker\n    ) {\n    }\n\n    #[Route('/orders', methods: ['POST'])]\n    public function placeOrder(Request $request): Response\n    {\n        $command = new PlaceOrderCommand(\n            customerId: $request-&gt;get('customer_id'),\n            items: $request-&gt;get('items'),\n            shippingAddress: $request-&gt;get('shipping_address'),\n        );\n\n        // Invocation du command\n        $this-&gt;commandBus-&gt;dispatch($command);\n\n        return new JsonResponse(['status' =&gt; 'success']);\n    }\n}\n</code></pre> <p>Avantages: - Historique des commandes (event sourcing possible) - Annulation/Redo possible - Validation centralis\u00e9e - Asynchrone facilement (via message queue)</p>"},{"location":"ARCHITECTURE/#833-observer-pattern-domain-events","title":"8.3.3 Observer Pattern (Domain Events)","text":"<p>\u00c9v\u00e9nements du Domain:</p> <pre><code>&lt;?php\n\ndeclare(strict_types=1);\n\n// Event\nnamespace App\\User\\Account\\Domain\\Event;\n\nfinal readonly class UserRegisteredEvent\n{\n    public function __construct(\n        public string $userId,\n        public string $email,\n        public \\DateTimeImmutable $occurredAt,\n    ) {\n    }\n}\n\n// Entity qui dispatche l'\u00e9v\u00e9nement\nnamespace App\\User\\Account\\Domain\\Model;\n\nfinal class User\n{\n    private array $domainEvents = [];\n\n    public function register(): void\n    {\n        // Logique m\u00e9tier\n        $this-&gt;isActive = true;\n\n        // Enregistre l'\u00e9v\u00e9nement\n        $this-&gt;domainEvents[] = new UserRegisteredEvent(\n            userId: $this-&gt;id-&gt;value,\n            email: $this-&gt;email-&gt;value,\n            occurredAt: new \\DateTimeImmutable(),\n        );\n    }\n\n    public function pullDomainEvents(): array\n    {\n        $events = $this-&gt;domainEvents;\n        $this-&gt;domainEvents = [];\n        return $events;\n    }\n}\n\n// Observer 1 - Envoyer email\nnamespace App\\User\\Account\\Application\\EventSubscriber;\n\nuse Symfony\\Component\\Messenger\\Attribute\\AsMessageHandler;\n\n#[AsMessageHandler]\nfinal readonly class SendWelcomeEmailOnUserRegistered\n{\n    public function __construct(\n        private MailerInterface $mailer,\n    ) {\n    }\n\n    public function __invoke(UserRegisteredEvent $event): void\n    {\n        $this-&gt;mailer-&gt;send(\n            new WelcomeEmail($event-&gt;email)\n        );\n    }\n}\n\n// Observer 2 - Logger\n#[AsMessageHandler]\nfinal readonly class LogUserRegistration\n{\n    public function __construct(\n        private LoggerInterface $logger,\n    ) {\n    }\n\n    public function __invoke(UserRegisteredEvent $event): void\n    {\n        $this-&gt;logger-&gt;info('New user registered', [\n            'user_id' =&gt; $event-&gt;userId,\n            'email' =&gt; $event-&gt;email,\n        ]);\n    }\n}\n\n// Observer 3 - Cr\u00e9er profil\n#[AsMessageHandler]\nfinal readonly class CreateUserProfileOnUserRegistered\n{\n    public function __invoke(UserRegisteredEvent $event): void\n    {\n        // Cr\u00e9er le profil utilisateur\n    }\n}\n</code></pre> <p>B\u00e9n\u00e9fices: - D\u00e9couplage total entre modules - Extensibilit\u00e9 - ajouter observer = nouvelle classe - Single Responsibility - chaque observer fait une chose</p>"},{"location":"ARCHITECTURE/#84-autres-patterns-importants","title":"8.4 Autres Patterns Importants","text":""},{"location":"ARCHITECTURE/#841-specification-pattern","title":"8.4.1 Specification Pattern","text":"<p>Pour les requ\u00eates complexes:</p> <pre><code>&lt;?php\n\ndeclare(strict_types=1);\n\nnamespace App\\Product\\Domain\\Specification;\n\nuse App\\Product\\Domain\\Model\\Product;\n\ninterface ProductSpecificationInterface\n{\n    public function isSatisfiedBy(Product $product): bool;\n}\n\nfinal readonly class ActiveProductSpecification implements ProductSpecificationInterface\n{\n    public function isSatisfiedBy(Product $product): bool\n    {\n        return $product-&gt;isActive();\n    }\n}\n\nfinal readonly class InStockSpecification implements ProductSpecificationInterface\n{\n    public function isSatisfiedBy(Product $product): bool\n    {\n        return $product-&gt;getStock() &gt; 0;\n    }\n}\n\n// Composite Specification\nfinal readonly class AndSpecification implements ProductSpecificationInterface\n{\n    public function __construct(\n        private ProductSpecificationInterface $spec1,\n        private ProductSpecificationInterface $spec2,\n    ) {\n    }\n\n    public function isSatisfiedBy(Product $product): bool\n    {\n        return $this-&gt;spec1-&gt;isSatisfiedBy($product)\n            &amp;&amp; $this-&gt;spec2-&gt;isSatisfiedBy($product);\n    }\n}\n\n// Utilisation\n$activeAndInStock = new AndSpecification(\n    new ActiveProductSpecification(),\n    new InStockSpecification()\n);\n\n$filteredProducts = array_filter(\n    $products,\n    fn(Product $p) =&gt; $activeAndInStock-&gt;isSatisfiedBy($p)\n);\n</code></pre>"},{"location":"ARCHITECTURE/#842-null-object-pattern","title":"8.4.2 Null Object Pattern","text":"<p>Pour \u00e9viter les null checks:</p> <pre><code>&lt;?php\n\ndeclare(strict_types=1);\n\nnamespace App\\User\\Account\\Domain\\Model;\n\n// Interface\ninterface UserInterface\n{\n    public function getId(): UserId;\n    public function getEmail(): Email;\n    public function isActive(): bool;\n}\n\n// User r\u00e9el\nfinal class User implements UserInterface\n{\n    // ... impl\u00e9mentation normale\n}\n\n// Null User\nfinal class NullUser implements UserInterface\n{\n    public function getId(): UserId\n    {\n        return new UserId('null');\n    }\n\n    public function getEmail(): Email\n    {\n        return new Email('null@example.com');\n    }\n\n    public function isActive(): bool\n    {\n        return false;\n    }\n}\n\n// Repository\nfinal class DoctrineUserRepository\n{\n    public function findById(UserId $id): UserInterface\n    {\n        $user = $this-&gt;entityManager-&gt;find(User::class, $id-&gt;value);\n\n        // Retourne NullUser au lieu de null\n        return $user ?? new NullUser();\n    }\n}\n\n// Utilisation - pas de null check!\n$user = $repository-&gt;findById($userId);\nif ($user-&gt;isActive()) {  // Pas de null check n\u00e9cessaire\n    // ...\n}\n</code></pre>"},{"location":"ARCHITECTURE/#85-tableau-recapitulatif","title":"8.5 Tableau R\u00e9capitulatif","text":"Pattern Cat\u00e9gorie Couche Hexagonale Usage Principal Factory Creational Application/Domain Cr\u00e9ation d'entit\u00e9s complexes Builder Creational Domain/Tests Construction progressive Singleton Creational Infrastructure Registres, configurations Adapter Structural Infrastructure CORE - Impl\u00e9mente les ports Repository Structural Domain (Port) + Infra (Adapter) Abstraction persistance DTO Structural Application Commands, Queries, Responses Strategy Behavioral Infrastructure Algorithmes interchangeables Command Behavioral Application CQRS - Use cases Observer Behavioral Application Domain Events Specification Domain Domain R\u00e8gles m\u00e9tier complexes Null Object Special Domain \u00c9viter null checks"},{"location":"ARCHITECTURE/#86-anti-patterns-a-eviter","title":"8.6 Anti-Patterns \u00e0 \u00c9viter","text":""},{"location":"ARCHITECTURE/#service-locator-dans-le-domain","title":"\ud83c\udf2a\ufe0f Service Locator dans le Domain","text":"<pre><code>// MAUVAIS\nclass User\n{\n    public function save(): void\n    {\n        $repository = ServiceLocator::get(UserRepositoryInterface::class);\n        $repository-&gt;save($this);\n    }\n}\n\n// BON - Injection de d\u00e9pendances\nclass RegisterCommandHandler\n{\n    public function __construct(\n        private UserRepositoryInterface $repository\n    ) {}\n}\n</code></pre>"},{"location":"ARCHITECTURE/#god-object-anemic-domain","title":"\ud83c\udf2a\ufe0f God Object / Anemic Domain","text":"<pre><code>// MAUVAIS - Anemic\nclass User\n{\n    public string $email;\n    public string $password;\n    // Pas de logique\n}\n\nclass UserService\n{\n    public function register(User $user): void\n    {\n        // Toute la logique ici\n    }\n}\n\n// BON - Rich Domain\nclass User\n{\n    public function register(Email $email, HashedPassword $password): void\n    {\n        // Validation et logique m\u00e9tier ici\n    }\n}\n</code></pre>"},{"location":"ARCHITECTURE/#9-migration-progressive","title":"9. Migration progressive","text":""},{"location":"ARCHITECTURE/#91-etape-1-extraire-le-domain","title":"9.1 \u00c9tape 1 : Extraire le Domain","text":"<pre><code>// Avant\nclass UserController\n{\n    public function register(Request $request): Response\n    {\n        $user = new User();\n        $user-&gt;setEmail($request-&gt;get('email'));\n        $this-&gt;em-&gt;persist($user);\n        $this-&gt;em-&gt;flush();\n    }\n}\n\n// Apr\u00e8s\nclass UserController\n{\n    public function register(Request $request): Response\n    {\n        $command = new RegisterCommand($request-&gt;get('email'));\n        $this-&gt;commandBus-&gt;dispatch($command);\n    }\n}\n</code></pre>"},{"location":"ARCHITECTURE/#92-etape-2-creer-les-ports","title":"9.2 \u00c9tape 2 : Cr\u00e9er les Ports","text":"<pre><code>// Domain/Port\ninterface UserRepositoryInterface\n{\n    public function save(User $user): void;\n}\n</code></pre>"},{"location":"ARCHITECTURE/#93-etape-3-creer-les-adapters","title":"9.3 \u00c9tape 3 : Cr\u00e9er les Adapters","text":"<pre><code>// Infrastructure\nclass DoctrineUserRepository implements UserRepositoryInterface\n{\n    public function save(User $user): void\n    {\n        $this-&gt;em-&gt;persist($user);\n        $this-&gt;em-&gt;flush();\n    }\n}\n</code></pre>"},{"location":"ARCHITECTURE/#10-ressources","title":"10. Ressources","text":"<ul> <li>Hexagonal Architecture par Alistair Cockburn</li> <li>Clean Architecture par Robert C. Martin</li> <li>DDD par Eric Evans</li> <li>CQRS Pattern</li> </ul> <p>Ce bundle vous aide \u00e0 mettre en \u0153uvre ces principes facilement avec Symfony !</p>"},{"location":"SOLID/","title":"Architecture Hexagonale &amp; Principes SOLID","text":"<p>Ce document explique en d\u00e9tail comment l'architecture hexagonale respecte les principes SOLID, ses avantages par rapport \u00e0 une architecture en couches traditionnelle, et les risques d'une mauvaise architecture.</p>"},{"location":"SOLID/#table-des-matieres","title":"Table des mati\u00e8res","text":"<ol> <li>Les Principes SOLID</li> <li>Architecture Hexagonale vs Architecture en Couches</li> <li>Comment l'Hexagonal Respecte SOLID</li> <li>Les Risques d'une Mauvaise Architecture</li> <li>Cas Concrets et Exemples</li> </ol>"},{"location":"SOLID/#1-les-principes-solid","title":"1. Les Principes SOLID","text":""},{"location":"SOLID/#11-single-responsibility-principle-srp","title":"1.1 Single Responsibility Principle (SRP)","text":"<p>\"Une classe ne devrait avoir qu'une seule raison de changer\"</p>"},{"location":"SOLID/#violation-architecture-traditionnelle","title":"Violation (Architecture traditionnelle)","text":"<pre><code>class UserController\n{\n    public function register(Request $request): Response\n    {\n        // 1. Validation\n        if (!filter_var($request-&gt;get('email'), FILTER_VALIDATE_EMAIL)) {\n            throw new Exception('Invalid email');\n        }\n\n        // 2. Logique m\u00e9tier\n        $user = new User();\n        $user-&gt;setEmail($request-&gt;get('email'));\n        $user-&gt;setPassword(password_hash($request-&gt;get('password'), PASSWORD_BCRYPT));\n\n        // 3. Persistance\n        $this-&gt;entityManager-&gt;persist($user);\n        $this-&gt;entityManager-&gt;flush();\n\n        // 4. Envoi email\n        $this-&gt;mailer-&gt;send(new WelcomeEmail($user));\n\n        return new JsonResponse(['status' =&gt; 'ok']);\n    }\n}\n</code></pre> <p>Probl\u00e8mes: - Le contr\u00f4leur a 4 responsabilit\u00e9s diff\u00e9rentes - Si la validation change \u2192 modification du contr\u00f4leur - Si la base de donn\u00e9es change \u2192 modification du contr\u00f4leur - Si l'email change \u2192 modification du contr\u00f4leur - Impossible \u00e0 tester unitairement</p>"},{"location":"SOLID/#avec-architecture-hexagonale","title":"Avec Architecture Hexagonale","text":"<pre><code>// Controller (UI Layer) - Responsabilit\u00e9: Traduire HTTP en Command\nclass UserController\n{\n    public function register(Request $request): Response\n    {\n        $command = new RegisterCommand(\n            email: $request-&gt;get('email'),\n            password: $request-&gt;get('password')\n        );\n\n        $this-&gt;commandBus-&gt;dispatch($command);\n\n        return new JsonResponse(['status' =&gt; 'ok']);\n    }\n}\n\n// Command Handler (Application Layer) - Responsabilit\u00e9: Orchestrer\n#[AsMessageHandler]\nclass RegisterCommandHandler\n{\n    public function __invoke(RegisterCommand $command): void\n    {\n        $user = $this-&gt;factory-&gt;create($command);\n        $this-&gt;repository-&gt;save($user);\n        $this-&gt;eventDispatcher-&gt;dispatch(new UserRegistered($user));\n    }\n}\n\n// Entity (Domain Layer) - Responsabilit\u00e9: Logique m\u00e9tier\nclass User\n{\n    public function __construct(\n        private Email $email,    // Value Object avec validation\n        private HashedPassword $password\n    ) {}\n}\n\n// Repository Adapter (Infrastructure) - Responsabilit\u00e9: Persistance\nclass DoctrineUserRepository implements UserRepositoryInterface\n{\n    public function save(User $user): void\n    {\n        $this-&gt;em-&gt;persist($user);\n        $this-&gt;em-&gt;flush();\n    }\n}\n</code></pre> <p>Avantages: - Chaque classe a UNE SEULE responsabilit\u00e9 - Facile \u00e0 tester ind\u00e9pendamment - Changement isol\u00e9 \u00e0 un seul endroit</p>"},{"location":"SOLID/#12-openclosed-principle-ocp","title":"1.2 Open/Closed Principle (OCP)","text":"<p>\"Ouvert \u00e0 l'extension, ferm\u00e9 \u00e0 la modification\"</p>"},{"location":"SOLID/#violation","title":"Violation","text":"<pre><code>class NotificationService\n{\n    public function send(User $user, string $type): void\n    {\n        if ($type === 'email') {\n            // Logique email\n            $this-&gt;mailer-&gt;send(...);\n        } elseif ($type === 'sms') {\n            // Logique SMS\n            $this-&gt;smsClient-&gt;send(...);\n        } elseif ($type === 'push') {\n            // Logique Push\n            $this-&gt;pushService-&gt;send(...);\n        }\n        // Si on ajoute Slack, il faut MODIFIER cette classe !\n    }\n}\n</code></pre> <p>Probl\u00e8me: Pour ajouter un nouveau canal, on doit modifier le code existant.</p>"},{"location":"SOLID/#avec-architecture-hexagonale-ports-adapters","title":"Avec Architecture Hexagonale (Ports &amp; Adapters)","text":"<pre><code>// Port (Domain) - Interface stable\ninterface NotificationSenderInterface\n{\n    public function send(Notification $notification): void;\n    public function supports(NotificationChannel $channel): bool;\n}\n\n// Adapter 1 - Email\nclass EmailNotificationSender implements NotificationSenderInterface\n{\n    public function send(Notification $notification): void\n    {\n        $this-&gt;mailer-&gt;send(...);\n    }\n\n    public function supports(NotificationChannel $channel): bool\n    {\n        return $channel === NotificationChannel::EMAIL;\n    }\n}\n\n// Adapter 2 - SMS\nclass SmsNotificationSender implements NotificationSenderInterface\n{\n    public function send(Notification $notification): void\n    {\n        $this-&gt;smsClient-&gt;send(...);\n    }\n\n    public function supports(NotificationChannel $channel): bool\n    {\n        return $channel === NotificationChannel::SMS;\n    }\n}\n\n// Adapter 3 - Slack (NOUVEAU - sans modifier le code existant!)\nclass SlackNotificationSender implements NotificationSenderInterface\n{\n    public function send(Notification $notification): void\n    {\n        $this-&gt;slackClient-&gt;send(...);\n    }\n\n    public function supports(NotificationChannel $channel): bool\n    {\n        return $channel === NotificationChannel::SLACK;\n    }\n}\n\n// Application Layer - Utilise les adapters\nclass SendNotificationHandler\n{\n    /** @param NotificationSenderInterface[] $senders */\n    public function __construct(private iterable $senders) {}\n\n    public function __invoke(SendNotificationCommand $cmd): void\n    {\n        foreach ($this-&gt;senders as $sender) {\n            if ($sender-&gt;supports($cmd-&gt;channel)) {\n                $sender-&gt;send($notification);\n                return;\n            }\n        }\n    }\n}\n</code></pre> <p>Avantages: - Ajouter Slack = cr\u00e9er une nouvelle classe, aucune modification du code existant - Chaque adapter est ind\u00e9pendant - Pas de risque de r\u00e9gression</p>"},{"location":"SOLID/#13-liskov-substitution-principle-lsp","title":"1.3 Liskov Substitution Principle (LSP)","text":"<p>\"Les objets doivent pouvoir \u00eatre remplac\u00e9s par des instances de leurs sous-types sans alt\u00e9rer le comportement\"</p>"},{"location":"SOLID/#avec-architecture-hexagonale_1","title":"Avec Architecture Hexagonale","text":"<pre><code>// Port (contrat stable)\ninterface UserRepositoryInterface\n{\n    public function save(User $user): void;\n    public function findById(UserId $id): ?User;\n}\n\n// Adapter 1 - Production (Doctrine)\nclass DoctrineUserRepository implements UserRepositoryInterface\n{\n    public function save(User $user): void\n    {\n        $this-&gt;em-&gt;persist($user);\n        $this-&gt;em-&gt;flush();\n    }\n\n    public function findById(UserId $id): ?User\n    {\n        return $this-&gt;em-&gt;find(User::class, $id-&gt;value);\n    }\n}\n\n// Adapter 2 - Tests (In Memory)\nclass InMemoryUserRepository implements UserRepositoryInterface\n{\n    private array $users = [];\n\n    public function save(User $user): void\n    {\n        $this-&gt;users[$user-&gt;getId()-&gt;value] = $user;\n    }\n\n    public function findById(UserId $id): ?User\n    {\n        return $this-&gt;users[$id-&gt;value] ?? null;\n    }\n}\n\n// Adapter 3 - Cache\nclass CachedUserRepository implements UserRepositoryInterface\n{\n    public function __construct(\n        private UserRepositoryInterface $decorated,\n        private CacheInterface $cache\n    ) {}\n\n    public function findById(UserId $id): ?User\n    {\n        return $this-&gt;cache-&gt;get(\n            'user_' . $id-&gt;value,\n            fn() =&gt; $this-&gt;decorated-&gt;findById($id)\n        );\n    }\n\n    public function save(User $user): void\n    {\n        $this-&gt;decorated-&gt;save($user);\n        $this-&gt;cache-&gt;delete('user_' . $user-&gt;getId()-&gt;value);\n    }\n}\n\n// Application - Fonctionne avec N'IMPORTE quel adapter\nclass RegisterUserHandler\n{\n    public function __construct(\n        private UserRepositoryInterface $repository // Peut \u00eatre n'importe quelle impl\u00e9mentation\n    ) {}\n\n    public function __invoke(RegisterCommand $cmd): void\n    {\n        $user = new User(...);\n        $this-&gt;repository-&gt;save($user); // Fonctionne avec les 3 adapters !\n    }\n}\n</code></pre> <p>Avantages: - Interchangeabilit\u00e9 totale des adapters - Tests avec <code>InMemoryUserRepository</code> (rapide, pas de DB) - Production avec <code>DoctrineUserRepository</code> - Cache transparent avec <code>CachedUserRepository</code> - Le handler ne sait pas et ne doit pas savoir quel adapter est utilis\u00e9</p>"},{"location":"SOLID/#14-interface-segregation-principle-isp","title":"1.4 Interface Segregation Principle (ISP)","text":"<p>\"Ne pas forcer un client \u00e0 d\u00e9pendre d'interfaces qu'il n'utilise pas\"</p>"},{"location":"SOLID/#violation_1","title":"Violation","text":"<pre><code>interface UserRepositoryInterface\n{\n    public function save(User $user): void;\n    public function findById(int $id): ?User;\n    public function findAll(): array;\n    public function search(array $criteria): array;\n    public function count(): int;\n    public function export(string $format): string;\n    public function import(string $data): void;\n    public function backup(): void;\n    public function restore(string $backup): void;\n}\n\n// Un handler qui veut juste sauvegarder doit d\u00e9pendre de 9 m\u00e9thodes !\nclass RegisterUserHandler\n{\n    public function __construct(\n        private UserRepositoryInterface $repository // Trop de m\u00e9thodes inutiles\n    ) {}\n\n    public function __invoke(RegisterCommand $cmd): void\n    {\n        $user = new User(...);\n        $this-&gt;repository-&gt;save($user); // Utilise seulement 1/9 des m\u00e9thodes\n    }\n}\n</code></pre>"},{"location":"SOLID/#avec-architecture-hexagonale-ports-specialises","title":"Avec Architecture Hexagonale (Ports sp\u00e9cialis\u00e9s)","text":"<pre><code>// Port 1 - Pour l'\u00e9criture\ninterface UserWriterInterface\n{\n    public function save(User $user): void;\n}\n\n// Port 2 - Pour la lecture simple\ninterface UserReaderInterface\n{\n    public function findById(UserId $id): ?User;\n}\n\n// Port 3 - Pour la recherche\ninterface UserSearchInterface\n{\n    public function search(UserSearchCriteria $criteria): array;\n}\n\n// Handlers utilisent UNIQUEMENT ce dont ils ont besoin\nclass RegisterUserHandler\n{\n    public function __construct(\n        private UserWriterInterface $writer // Seulement 1 m\u00e9thode\n    ) {}\n}\n\nclass FindUserHandler\n{\n    public function __construct(\n        private UserReaderInterface $reader // Seulement 1 m\u00e9thode\n    ) {}\n}\n\nclass SearchUsersHandler\n{\n    public function __construct(\n        private UserSearchInterface $searcher // M\u00e9thodes de recherche uniquement\n    ) {}\n}\n\n// Un adapter peut impl\u00e9menter plusieurs ports\nclass DoctrineUserRepository implements\n    UserWriterInterface,\n    UserReaderInterface,\n    UserSearchInterface\n{\n    public function save(User $user): void { ... }\n    public function findById(UserId $id): ?User { ... }\n    public function search(UserSearchCriteria $criteria): array { ... }\n}\n</code></pre> <p>Avantages: - Chaque handler d\u00e9pend uniquement de ce qu'il utilise - Interfaces petites et coh\u00e9rentes - Facile \u00e0 mocker pour les tests</p>"},{"location":"SOLID/#15-dependency-inversion-principle-dip","title":"1.5 Dependency Inversion Principle (DIP)","text":"<p>\"D\u00e9pendre d'abstractions, pas d'impl\u00e9mentations concr\u00e8tes\"</p> <p>C'est le principe central de l'architecture hexagonale !</p>"},{"location":"SOLID/#violation-1-dependance-a-des-classes-concretes","title":"Violation 1 - D\u00e9pendance \u00e0 des classes concr\u00e8tes","text":"<pre><code>// Violation DIRECTE du DIP - D\u00e9pend de classes concr\u00e8tes\nclass RegisterUserService\n{\n    public function __construct(\n        private EntityManager $em,              // Classe concr\u00e8te Doctrine\n        private Mailer $mailer,                 // Classe concr\u00e8te Symfony\n        private FileLogger $logger              // Classe concr\u00e8te\n    ) {}\n\n    public function register(string $email, string $password): void\n    {\n        $user = new User();\n        $user-&gt;setEmail($email);\n\n        $this-&gt;em-&gt;persist($user);\n        $this-&gt;em-&gt;flush();\n\n        $this-&gt;mailer-&gt;send(...);\n    }\n}\n</code></pre> <p>Probl\u00e8mes: - D\u00e9pend de classes concr\u00e8tes au lieu d'abstractions - Impossible de mocker pour les tests - Impossible de changer l'impl\u00e9mentation</p>"},{"location":"SOLID/#violation-2-abstractions-definies-par-linfrastructure-plus-subtil","title":"Violation 2 - Abstractions d\u00e9finies par l'infrastructure (plus subtil)","text":"<pre><code>// Violation ARCHITECTURALE du DIP - Utilise des interfaces,\n// MAIS d\u00e9finies par l'infrastructure, pas par le Domain\nclass RegisterUserService\n{\n    public function __construct(\n        private EntityManagerInterface $em,        // Interface d\u00e9finie par Doctrine\n        private MailerInterface $mailer,           // Interface d\u00e9finie par Symfony\n        private LoggerInterface $logger            // Interface d\u00e9finie par PSR\n    ) {}\n\n    public function register(string $email, string $password): void\n    {\n        $user = new User();\n        $user-&gt;setEmail($email);\n\n        $this-&gt;em-&gt;persist($user);   // API Doctrine (persist/flush)\n        $this-&gt;em-&gt;flush();\n\n        $this-&gt;mailer-&gt;send(...);    // API Symfony Mailer\n    }\n}\n</code></pre> <p>Probl\u00e8me subtil mais critique: - Bon point: Utilise des interfaces (mieux que des classes concr\u00e8tes) - MAIS: Ces interfaces sont d\u00e9finies par l'infrastructure (Doctrine/Symfony), pas par votre Domain - Votre Application d\u00e9pend de l'infrastructure pour conna\u00eetre les contrats - Direction de d\u00e9pendance incorrecte: Application \u2192 Infrastructure - L'Application utilise le vocabulaire technique de Doctrine (<code>persist()</code>, <code>flush()</code>) au lieu du vocabulaire m\u00e9tier (<code>save()</code>) - Changer de Doctrine \u00e0 autre chose n\u00e9cessite de modifier tout le code qui utilise <code>persist()/flush()</code></p> <p>Pourquoi c'est une violation du DIP: <pre><code>\ud83d\udce6 Domain/Application (haut niveau)\n        \u2193 d\u00e9pend de\n\ud83d\udd0c Infrastructure (bas niveau)\n</code></pre></p> <p>Le DIP dit: Les modules de haut niveau ne doivent PAS d\u00e9pendre des modules de bas niveau. Les deux doivent d\u00e9pendre d'abstractions.</p> <p>Ici, votre Application (haut niveau) d\u00e9pend de Doctrine/Symfony (bas niveau) pour d\u00e9finir les contrats.</p>"},{"location":"SOLID/#avec-architecture-hexagonale-dip-correct","title":"Avec Architecture Hexagonale (DIP Correct)","text":"<pre><code>// 1\ufe0f\u20e3 Domain Layer - D\u00c9FINIT ses propres abstractions (PORTS)\nnamespace App\\User\\Domain\\Port;\n\ninterface UserRepositoryInterface  // Interface d\u00e9finie par le DOMAIN\n{\n    public function save(User $user): void;           // Vocabulaire m\u00e9tier\n    public function ofId(UserId $id): ?User;          // Vocabulaire m\u00e9tier\n}\n\ninterface EmailSenderInterface     // Interface d\u00e9finie par le DOMAIN\n{\n    public function sendWelcomeEmail(User $user): void;  // Vocabulaire m\u00e9tier\n}\n\n// 2\ufe0f\u20e3 Application Layer - D\u00e9pend UNIQUEMENT des abstractions du Domain\nnamespace App\\User\\Application;\n\nclass RegisterUserHandler\n{\n    public function __construct(\n        private UserRepositoryInterface $repository,  // Port du Domain\n        private EmailSenderInterface $emailSender     // Port du Domain\n    ) {}\n\n    public function __invoke(RegisterCommand $cmd): void\n    {\n        $user = User::register(\n            new Email($cmd-&gt;email),\n            HashedPassword::fromPlain($cmd-&gt;password)\n        );\n\n        $this-&gt;repository-&gt;save($user);              // Vocabulaire m\u00e9tier\n        $this-&gt;emailSender-&gt;sendWelcomeEmail($user); // Vocabulaire m\u00e9tier\n    }\n}\n\n// 3\ufe0f\u20e3 Infrastructure Layer - IMPL\u00c9MENTE les abstractions du Domain\nnamespace App\\User\\Infrastructure\\Persistence;\n\nclass DoctrineUserRepository implements UserRepositoryInterface  // Impl\u00e9mente le port\n{\n    public function __construct(\n        private EntityManagerInterface $em  // Doctrine utilis\u00e9 ICI seulement\n    ) {}\n\n    public function save(User $user): void\n    {\n        $this-&gt;em-&gt;persist($user);   // D\u00e9tails techniques cach\u00e9s ici\n        $this-&gt;em-&gt;flush();\n    }\n\n    public function ofId(UserId $id): ?User\n    {\n        return $this-&gt;em-&gt;find(User::class, $id-&gt;value());\n    }\n}\n\nnamespace App\\User\\Infrastructure\\Messaging;\n\nclass SymfonyEmailSender implements EmailSenderInterface  // Impl\u00e9mente le port\n{\n    public function __construct(\n        private MailerInterface $mailer  // Symfony Mailer utilis\u00e9 ICI seulement\n    ) {}\n\n    public function sendWelcomeEmail(User $user): void\n    {\n        $email = (new Email())\n            -&gt;to($user-&gt;email()-&gt;value())\n            -&gt;subject('Welcome!')\n            -&gt;html('...');\n\n        $this-&gt;mailer-&gt;send($email);  // D\u00e9tails techniques cach\u00e9s ici\n    }\n}\n</code></pre> <p>Direction des d\u00e9pendances (CORRECTE): <pre><code>\ud83d\udd0c Infrastructure (DoctrineUserRepository, SymfonyEmailSender)\n        \u2193 implements\n\ud83d\udd17 Domain Ports (UserRepositoryInterface, EmailSenderInterface)\n        \u2191 uses\n\u2699\ufe0f Application (RegisterUserHandler)\n        \u2191 uses\n\ud83d\udc8e Domain (User, Email, HashedPassword)\n</code></pre></p> <p>Tous les modules d\u00e9pendent du Domain, pas l'inverse !</p> <p>Flux de d\u00e9pendances:</p> <pre><code>%%{init: {'theme':'base', 'themeVariables': { 'fontSize':'15px'}}}%%\ngraph BT\n    Infra[\"\ud83d\udd0c Infrastructure Adapters&lt;br/&gt;&lt;small&gt;DoctrineUserRepository&lt;/small&gt;\"]\n    Port[\"\ud83d\udd17 Domain Ports&lt;br/&gt;&lt;small&gt;UserRepositoryInterface&lt;/small&gt;\"]\n    App[\"\u2699\ufe0f Application&lt;br/&gt;&lt;small&gt;RegisterUserHandler&lt;/small&gt;\"]\n\n    Infra -.-&gt;|\"\ud83c\udfaf implements\"| Port\n    App ==&gt;|\"uses\"| Port\n\n    style Port fill:#FFF9C4,stroke:#F57F17,stroke-width:3px,color:#000\n    style App fill:#B3E5FC,stroke:#0277BD,stroke-width:3px,color:#000\n    style Infra fill:#F8BBD0,stroke:#C2185B,stroke-width:3px,color:#000</code></pre> <p>L'Infrastructure d\u00e9pend du Domain, PAS l'inverse !</p> <p>Avantages: - Le Domain ne d\u00e9pend de RIEN (z\u00e9ro d\u00e9pendance externe) - L'Application d\u00e9pend uniquement du Domain (pas de l'infrastructure) - L'Infrastructure d\u00e9pend du Domain et impl\u00e9mente ses ports - Les interfaces sont d\u00e9finies par le Domain (votre m\u00e9tier), pas par Doctrine/Symfony - Le code utilise le vocabulaire m\u00e9tier (<code>save()</code>, <code>ofId()</code>) au lieu du vocabulaire technique (<code>persist()</code>, <code>flush()</code>) - Changement d'infrastructure = cr\u00e9er un nouvel adapter, z\u00e9ro modification du Domain/Application</p> <p>Comparaison concr\u00e8te:</p> Aspect Violation DIP Hexagonal (DIP Correct) Qui d\u00e9finit l'interface? Doctrine/Symfony Votre Domain Direction d\u00e9pendance App \u2192 Infrastructure Infrastructure \u2192 Domain Vocabulaire utilis\u00e9 Technique (<code>persist</code>, <code>flush</code>) M\u00e9tier (<code>save</code>, <code>ofId</code>) Changer Doctrine Modifier tout le code Cr\u00e9er nouvel adapter Tests D\u00e9pend de Doctrine In-memory (rapide) Framework upgrade Casse l'application Modifier adapters seulement"},{"location":"SOLID/#2-architecture-hexagonale-vs-architecture-en-couches","title":"2. Architecture Hexagonale vs Architecture en Couches","text":""},{"location":"SOLID/#architecture-en-couches-traditionnelle-layered","title":"Architecture en Couches Traditionnelle (Layered)","text":"<pre><code>%%{init: {'theme':'base', 'themeVariables': { 'fontSize':'15px'}}}%%\ngraph TD\n    Presentation[\"\ud83c\udfae Presentation Layer&lt;br/&gt;&lt;small&gt;Controllers&lt;/small&gt;\"]\n    Business[\"\u2699\ufe0f Business Layer&lt;br/&gt;&lt;small&gt;Services&lt;/small&gt;\"]\n    DataAccess[\"\ud83d\uddc4\ufe0f Data Access Layer&lt;br/&gt;&lt;small&gt;Repositories, ORM&lt;/small&gt;\"]\n    Database[\"\ud83d\udcbe Database\"]\n\n    Presentation ==&gt;|\"\ud83c\udf2a\ufe0f depends on\"| Business\n    Business ==&gt;|\"\ud83c\udf2a\ufe0f depends on\"| DataAccess\n    DataAccess ==&gt;|\"\ud83c\udf2a\ufe0f depends on\"| Database\n\n    style Presentation fill:#E1BEE7,stroke:#6A1B9A,stroke-width:3px,color:#000\n    style Business fill:#FFF9C4,stroke:#F57C00,stroke-width:3px,color:#000\n    style DataAccess fill:#FFCCBC,stroke:#D84315,stroke-width:3px,color:#000\n    style Database fill:#FFCDD2,stroke:#C62828,stroke-width:4px,color:#000</code></pre>"},{"location":"SOLID/#211-problemes-de-larchitecture-en-couches","title":"2.1.1 Probl\u00e8mes de l'Architecture en Couches","text":"<p>1. D\u00e9pendance vers le bas (Database Centric) <pre><code>// Business Layer d\u00e9pend de la Data Layer\nclass UserService\n{\n    public function __construct(\n        private EntityManagerInterface $em  // Coupl\u00e9 \u00e0 Doctrine\n    ) {}\n\n    public function registerUser(string $email): void\n    {\n        $user = new User();  // Entity Doctrine avec annotations\n        $user-&gt;setEmail($email);\n\n        $this-&gt;em-&gt;persist($user);\n        $this-&gt;em-&gt;flush();\n    }\n}\n</code></pre></p> <p>Cons\u00e9quences: - Impossible de tester sans base de donn\u00e9es - Changement de base de donn\u00e9es = r\u00e9\u00e9criture du Business Layer - La logique m\u00e9tier est coupl\u00e9e \u00e0 la technologie de persistance - Les Entities contiennent des annotations Doctrine (pas de Domain pur)</p> <p>2. Logique m\u00e9tier dilu\u00e9e <pre><code>// Entity avec annotations Doctrine - PAS un vrai Domain Model\nuse Doctrine\\ORM\\Mapping as ORM;\n\n#[ORM\\Entity]\n#[ORM\\Table(name: 'users')]\nclass User\n{\n    #[ORM\\Id]\n    #[ORM\\GeneratedValue]\n    #[ORM\\Column(type: 'integer')]\n    private int $id;\n\n    #[ORM\\Column(type: 'string')]\n    private string $email;\n\n    // Getters/Setters - PAS de logique m\u00e9tier\n    public function setEmail(string $email): void\n    {\n        $this-&gt;email = $email;  // Pas de validation\n    }\n}\n\n// Service contient toute la logique\nclass UserService\n{\n    public function registerUser(string $email): void\n    {\n        // Validation dans le service (devrait \u00eatre dans le domain)\n        if (!filter_var($email, FILTER_VALIDATE_EMAIL)) {\n            throw new Exception('Invalid email');\n        }\n\n        $user = new User();\n        $user-&gt;setEmail($email);  // Entity = simple conteneur de donn\u00e9es\n\n        $this-&gt;em-&gt;persist($user);\n        $this-&gt;em-&gt;flush();\n    }\n}\n</code></pre></p> <p>Cons\u00e9quences: - Entity = conteneur de donn\u00e9es sans logique (Anemic Domain Model) - Logique m\u00e9tier \u00e9parpill\u00e9e dans les Services - Difficile de comprendre les r\u00e8gles m\u00e9tier - Duplication de la validation dans plusieurs services</p> <p>3. Difficile \u00e0 tester <pre><code>class UserServiceTest extends TestCase\n{\n    public function testRegisterUser(): void\n    {\n        // Besoin d'une vraie base de donn\u00e9es\n        $entityManager = $this-&gt;createEntityManager();\n\n        // Besoin de fixtures\n        $this-&gt;loadFixtures();\n\n        $service = new UserService($entityManager);\n        $service-&gt;registerUser('test@example.com');\n\n        // Test lent (I/O database)\n        $user = $entityManager-&gt;find(User::class, 1);\n        $this-&gt;assertEquals('test@example.com', $user-&gt;getEmail());\n    }\n}\n</code></pre></p>"},{"location":"SOLID/#architecture-hexagonale-ports-adapters","title":"Architecture Hexagonale (Ports &amp; Adapters)","text":"<pre><code>%%{init: {'theme':'base', 'themeVariables': { 'fontSize':'14px'}}}%%\ngraph TB\n    subgraph UI[\"\ud83c\udfae UI - Primary Adapters\"]\n        HTTP[\"\ud83c\udf10 HTTP Controllers\"]\n        CLI[\"\u2328\ufe0f CLI Commands\"]\n        GraphQL[\"\ud83d\udcca GraphQL API\"]\n        gRPC[\"\ud83d\udd04 gRPC Service\"]\n    end\n\n    subgraph APP[\"\u2699\ufe0f Application Layer\"]\n        UseCases[\"\ud83d\udce8 Use Cases&lt;br/&gt;&lt;small&gt;Command Handlers&lt;br/&gt;Query Handlers&lt;/small&gt;\"]\n    end\n\n    subgraph DOMAIN[\"\ud83d\udc8e Domain Layer - CORE\"]\n        Entities[\"\ud83d\udce6 Entities\"]\n        VOs[\"\ud83c\udfaf Value Objects\"]\n        Ports[\"\ud83d\udd17 Ports&lt;br/&gt;&lt;small&gt;Interfaces&lt;/small&gt;\"]\n    end\n\n    subgraph INFRA[\"\ud83d\udd0c Infrastructure - Secondary Adapters\"]\n        Doctrine[\"\ud83d\uddc4\ufe0f Doctrine ORM\"]\n        Redis[\"\u26a1 Redis Cache\"]\n        API[\"\ud83c\udf0d External APIs\"]\n    end\n\n    UI ==&gt;|\"uses\"| APP\n    APP ==&gt;|\"\ud83c\udfaf depends on\"| DOMAIN\n    INFRA -.-&gt;|\"\ud83c\udfaf implements\"| Ports\n\n    style DOMAIN fill:#C8E6C9,stroke:#2E7D32,stroke-width:4px,color:#000\n    style APP fill:#B3E5FC,stroke:#0277BD,stroke-width:3px,color:#000\n    style UI fill:#E1BEE7,stroke:#6A1B9A,stroke-width:3px,color:#000\n    style INFRA fill:#F8BBD0,stroke:#C2185B,stroke-width:3px,color:#000</code></pre>"},{"location":"SOLID/#221-avantages-de-larchitecture-hexagonale","title":"2.2.1 Avantages de l'Architecture Hexagonale","text":"<p>1. Domain ind\u00e9pendant (Domain Centric) <pre><code>// Domain Layer - Pur PHP, AUCUNE d\u00e9pendance\nnamespace App\\User\\Domain\\Model;\n\nfinal class User\n{\n    public function __construct(\n        private UserId $id,\n        private Email $email,  // Value Object avec validation\n        private bool $isActive = false\n    ) {}\n\n    // Logique m\u00e9tier dans le domain\n    public function activate(): void\n    {\n        if ($this-&gt;isActive) {\n            throw new UserAlreadyActiveException();\n        }\n\n        $this-&gt;isActive = true;\n    }\n\n    public function changeEmail(Email $newEmail): void\n    {\n        // R\u00e8gle m\u00e9tier: email doit \u00eatre diff\u00e9rent\n        if ($this-&gt;email-&gt;equals($newEmail)) {\n            throw new SameEmailException();\n        }\n\n        $this-&gt;email = $newEmail;\n    }\n}\n\n// Value Object avec validation\nfinal readonly class Email\n{\n    public function __construct(public string $value)\n    {\n        if (!filter_var($value, FILTER_VALIDATE_EMAIL)) {\n            throw new InvalidEmailException($value);\n        }\n    }\n\n    public function equals(self $other): bool\n    {\n        return $this-&gt;value === $other-&gt;value;\n    }\n}\n</code></pre></p> <p>Avantages: - Logique m\u00e9tier centralis\u00e9e dans le Domain - Z\u00e9ro d\u00e9pendance externe (pas d'annotations) - Validation encapsul\u00e9e dans les Value Objects - R\u00e8gles m\u00e9tier explicites et testables</p> <p>2. Testabilit\u00e9 <pre><code>// Test du Domain - Ultra rapide, aucune d\u00e9pendance\nclass UserTest extends TestCase\n{\n    public function testUserCanBeActivated(): void\n    {\n        $user = new User(\n            id: UserId::generate(),\n            email: new Email('test@example.com')\n        );\n\n        $user-&gt;activate();\n\n        $this-&gt;assertTrue($user-&gt;isActive());\n    }\n\n    public function testCannotActivateTwice(): void\n    {\n        $user = new User(\n            id: UserId::generate(),\n            email: new Email('test@example.com')\n        );\n\n        $user-&gt;activate();\n\n        $this-&gt;expectException(UserAlreadyActiveException::class);\n        $user-&gt;activate();  // Should throw\n    }\n}\n\n// Test du Handler avec In-Memory repository\nclass RegisterUserHandlerTest extends TestCase\n{\n    public function testUserIsRegistered(): void\n    {\n        $repository = new InMemoryUserRepository();  // Pas de DB\n        $handler = new RegisterUserHandler($repository);\n\n        $command = new RegisterCommand('test@example.com', 'password');\n        $handler($command);\n\n        $this-&gt;assertCount(1, $repository-&gt;all());\n    }\n}\n</code></pre></p> <p>Avantages: - Tests ultra-rapides (pas d'I/O) - Tests isol\u00e9s (pas de DB, pas de fixtures) - Tests du domain sans framework</p> <p>3. Flexibilit\u00e9 technologique <pre><code>// En d\u00e9veloppement: In-Memory\n$container-&gt;set(UserRepositoryInterface::class, InMemoryUserRepository::class);\n\n// En production: Doctrine\n$container-&gt;set(UserRepositoryInterface::class, DoctrineUserRepository::class);\n\n// En production avec cache: Decorator\n$container-&gt;set(UserRepositoryInterface::class, CachedUserRepository::class);\n</code></pre></p> <p>Avantages: - Changement de technologie sans toucher au code m\u00e9tier - Plusieurs impl\u00e9mentations possibles - Stack technology evolutive</p>"},{"location":"SOLID/#3-les-risques-dune-mauvaise-architecture","title":"3. Les Risques d'une Mauvaise Architecture","text":""},{"location":"SOLID/#1-le-modele-anemique-anemic-domain-model","title":"1. Le Mod\u00e8le An\u00e9mique (Anemic Domain Model)","text":""},{"location":"SOLID/#311-anti-pattern","title":"3.1.1 Anti-pattern","text":"<pre><code>// Entity = simple conteneur de donn\u00e9es\nclass Order\n{\n    private int $id;\n    private string $status;\n    private float $total;\n\n    // Getters/Setters uniquement\n    public function setStatus(string $status): void\n    {\n        $this-&gt;status = $status;  // Aucune validation\n    }\n\n    public function setTotal(float $total): void\n    {\n        $this-&gt;total = $total;  // Peut \u00eatre n\u00e9gatif\n    }\n}\n\n// Service contient toute la logique\nclass OrderService\n{\n    public function placeOrder(Order $order): void\n    {\n        // Validation \u00e9parpill\u00e9e dans le service\n        if ($order-&gt;getTotal() &lt; 0) {\n            throw new Exception('Invalid total');\n        }\n\n        $order-&gt;setStatus('confirmed');  // String magic\n\n        $this-&gt;em-&gt;persist($order);\n        $this-&gt;em-&gt;flush();\n    }\n\n    public function cancelOrder(Order $order): void\n    {\n        // Duplication de la logique de validation\n        if ($order-&gt;getStatus() === 'shipped') {\n            throw new Exception('Cannot cancel shipped order');\n        }\n\n        $order-&gt;setStatus('cancelled');\n\n        $this-&gt;em-&gt;flush();\n    }\n}\n</code></pre> <p>Risques: - Duplication de la logique dans plusieurs services - Incoh\u00e9rence (diff\u00e9rents services peuvent avoir des r\u00e8gles diff\u00e9rentes) - Bugs difficiles \u00e0 trouver (pas de validation centralis\u00e9e) - Maintenance cauchemardesque (logique \u00e9parpill\u00e9e)</p>"},{"location":"SOLID/#312-rich-domain-model-hexagonal","title":"3.1.2 Rich Domain Model (Hexagonal)","text":"<pre><code>enum OrderStatus: string\n{\n    case PENDING = 'pending';\n    case CONFIRMED = 'confirmed';\n    case SHIPPED = 'shipped';\n    case CANCELLED = 'cancelled';\n}\n\nfinal class Order\n{\n    public function __construct(\n        private OrderId $id,\n        private Money $total,\n        private OrderStatus $status = OrderStatus::PENDING\n    ) {\n        if ($total-&gt;amount &lt;= 0) {\n            throw new InvalidOrderTotalException();\n        }\n    }\n\n    // Logique m\u00e9tier encapsul\u00e9e\n    public function confirm(): void\n    {\n        if ($this-&gt;status !== OrderStatus::PENDING) {\n            throw new OrderCannotBeConfirmedException($this-&gt;status);\n        }\n\n        $this-&gt;status = OrderStatus::CONFIRMED;\n    }\n\n    public function cancel(): void\n    {\n        if ($this-&gt;status === OrderStatus::SHIPPED) {\n            throw new ShippedOrderCannotBeCancelledException();\n        }\n\n        $this-&gt;status = OrderStatus::CANCELLED;\n    }\n\n    public function ship(): void\n    {\n        if ($this-&gt;status !== OrderStatus::CONFIRMED) {\n            throw new OrderMustBeConfirmedBeforeShippingException();\n        }\n\n        $this-&gt;status = OrderStatus::SHIPPED;\n    }\n}\n\n// Handler = simple orchestration\nclass ConfirmOrderHandler\n{\n    public function __invoke(ConfirmOrderCommand $cmd): void\n    {\n        $order = $this-&gt;repository-&gt;findById($cmd-&gt;orderId);\n        $order-&gt;confirm();  // Logique dans le domain\n        $this-&gt;repository-&gt;save($order);\n    }\n}\n</code></pre> <p>Avantages: - Logique centralis\u00e9e dans l'entity - Impossible de mettre l'objet dans un \u00e9tat invalide - Type-safe (enum au lieu de string) - R\u00e8gles m\u00e9tier explicites</p>"},{"location":"SOLID/#2-le-couplage-fort-tight-coupling","title":"2. Le Couplage Fort (Tight Coupling)","text":""},{"location":"SOLID/#321-couplage-fort","title":"3.2.1 Couplage fort","text":"<pre><code>class UserService\n{\n    public function __construct(\n        private EntityManagerInterface $em,\n        private Swift_Mailer $mailer,  // Coupl\u00e9 \u00e0 SwiftMailer\n        private MonologLogger $logger   // Coupl\u00e9 \u00e0 Monolog\n    ) {}\n\n    public function register(string $email): void\n    {\n        $user = new User();\n        $user-&gt;setEmail($email);\n\n        $this-&gt;em-&gt;persist($user);\n        $this-&gt;em-&gt;flush();\n\n        // Si on veut changer de mailer, il faut modifier tout \u00e7a\n        $message = (new Swift_Message('Welcome'))\n            -&gt;setTo($email)\n            -&gt;setBody('Welcome!');\n\n        $this-&gt;mailer-&gt;send($message);\n    }\n}\n</code></pre> <p>Risques: - Impossible de changer SwiftMailer sans r\u00e9\u00e9crire le code - Tests difficiles (besoin de vraies d\u00e9pendances) - Migration framework impossible (couplage fort)</p>"},{"location":"SOLID/#322-faible-couplage-hexagonal","title":"3.2.2 Faible couplage (Hexagonal)","text":"<pre><code>// Port\ninterface EmailSenderInterface\n{\n    public function send(Email $email): void;\n}\n\n// Domain\nfinal readonly class WelcomeEmail\n{\n    public function __construct(\n        public string $to,\n        public string $subject,\n        public string $body\n    ) {}\n}\n\n// Handler\nclass RegisterUserHandler\n{\n    public function __construct(\n        private UserRepositoryInterface $repository,\n        private EmailSenderInterface $emailSender  // Abstraction\n    ) {}\n\n    public function __invoke(RegisterCommand $cmd): void\n    {\n        $user = new User(...);\n        $this-&gt;repository-&gt;save($user);\n\n        $email = new WelcomeEmail(\n            to: $user-&gt;getEmail()-&gt;value,\n            subject: 'Welcome',\n            body: 'Welcome to our platform!'\n        );\n\n        $this-&gt;emailSender-&gt;send($email);  // Ne sait pas comment\n    }\n}\n\n// Adapter 1 - SwiftMailer\nclass SwiftMailerAdapter implements EmailSenderInterface\n{\n    public function send(Email $email): void\n    {\n        $message = (new Swift_Message($email-&gt;subject))\n            -&gt;setTo($email-&gt;to)\n            -&gt;setBody($email-&gt;body);\n\n        $this-&gt;mailer-&gt;send($message);\n    }\n}\n\n// Adapter 2 - Symfony Mailer (migration facile!)\nclass SymfonyMailerAdapter implements EmailSenderInterface\n{\n    public function send(Email $email): void\n    {\n        $message = (new Email())\n            -&gt;to($email-&gt;to)\n            -&gt;subject($email-&gt;subject)\n            -&gt;text($email-&gt;body);\n\n        $this-&gt;mailer-&gt;send($message);\n    }\n}\n</code></pre> <p>Avantages: - Migration SwiftMailer \u2192 Symfony Mailer sans toucher au handler - Tests avec <code>FakeEmailSender</code> - Peut avoir plusieurs adapters (email + SMS)</p>"},{"location":"SOLID/#3-le-big-ball-of-mud","title":"3. Le Big Ball of Mud","text":""},{"location":"SOLID/#331-sans-architecture","title":"3.3.1 Sans architecture","text":"<pre><code>// Tout est m\u00e9lang\u00e9 dans le controller\nclass OrderController\n{\n    public function create(Request $request): Response\n    {\n        // Validation\n        if (empty($request-&gt;get('items'))) {\n            return new JsonResponse(['error' =&gt; 'No items'], 400);\n        }\n\n        // Calcul m\u00e9tier\n        $total = 0;\n        foreach ($request-&gt;get('items') as $item) {\n            $product = $this-&gt;em-&gt;find(Product::class, $item['id']);\n            $total += $product-&gt;getPrice() * $item['quantity'];\n        }\n\n        // Cr\u00e9ation\n        $order = new Order();\n        $order-&gt;setTotal($total);\n        $order-&gt;setStatus('pending');\n\n        // Persistance\n        $this-&gt;em-&gt;persist($order);\n        $this-&gt;em-&gt;flush();\n\n        // Email\n        $this-&gt;mailer-&gt;send(...);\n\n        // Log\n        $this-&gt;logger-&gt;info('Order created: ' . $order-&gt;getId());\n\n        // Envoi \u00e9v\u00e9nement\n        $this-&gt;eventBus-&gt;dispatch(new OrderCreated($order));\n\n        return new JsonResponse(['id' =&gt; $order-&gt;getId()]);\n    }\n}\n</code></pre> <p>Risques: - Impossible \u00e0 tester (trop de d\u00e9pendances) - Impossible \u00e0 maintenir (tout est m\u00e9lang\u00e9) - Impossible \u00e0 r\u00e9utiliser (coupl\u00e9 au HTTP) - Impossible d'ajouter une API GraphQL (logique dans le controller)</p>"},{"location":"SOLID/#332-avec-hexagonal","title":"3.3.2 Avec Hexagonal","text":"<pre><code>// Controller = adapter HTTP\nclass OrderController\n{\n    public function create(Request $request): Response\n    {\n        $command = new CreateOrderCommand(\n            items: $request-&gt;get('items'),\n            customerId: $request-&gt;get('customer_id')\n        );\n\n        $orderId = $this-&gt;commandBus-&gt;dispatch($command);\n\n        return new JsonResponse(['id' =&gt; $orderId]);\n    }\n}\n\n// GraphQL = adapter GraphQL (r\u00e9utilise la m\u00eame logique!)\nclass OrderMutation\n{\n    public function createOrder(array $items, string $customerId): string\n    {\n        $command = new CreateOrderCommand($items, $customerId);\n        return $this-&gt;commandBus-&gt;dispatch($command);\n    }\n}\n\n// CLI = adapter CLI (m\u00eame logique!)\nclass CreateOrderCommand extends Command\n{\n    protected function execute(InputInterface $input, OutputInterface $output): int\n    {\n        $command = new CreateOrderCommand(\n            items: json_decode($input-&gt;getArgument('items'), true),\n            customerId: $input-&gt;getArgument('customer-id')\n        );\n\n        $this-&gt;commandBus-&gt;dispatch($command);\n\n        return Command::SUCCESS;\n    }\n}\n</code></pre> <p>Avantages: - Une seule impl\u00e9mentation r\u00e9utilis\u00e9e par HTTP, GraphQL, CLI - Testable ind\u00e9pendamment - \u00c9volutif (ajouter gRPC = nouvel adapter)</p>"},{"location":"SOLID/#4-tableau-comparatif","title":"4. Tableau Comparatif","text":"Aspect Architecture Layered Architecture Hexagonale D\u00e9pendances Vers le bas (DB-centric) Vers le centre (Domain-centric) Testabilit\u00e9 Tests lents (DB requise) Tests rapides (in-memory) Logique m\u00e9tier \u00c9parpill\u00e9e dans services Centralis\u00e9e dans Domain Couplage Fort (framework, ORM) Faible (ports/adapters) Changement techno R\u00e9\u00e9criture massive Nouveau adapter R\u00e9utilisabilit\u00e9 Difficile Facile (m\u00eame use case, plusieurs adapters) Principe SOLID Violations fr\u00e9quentes Respect total Complexit\u00e9 initiale Faible Moyenne Maintenabilit\u00e9 long terme Difficile Excellente"},{"location":"SOLID/#5-conclusion","title":"5. Conclusion","text":""},{"location":"SOLID/#quand-utiliser-larchitecture-hexagonale","title":"Quand utiliser l'Architecture Hexagonale ?","text":"<p>Utiliser Hexagonal si: - Projet complexe avec beaucoup de logique m\u00e9tier - Projet long terme (maintenance sur plusieurs ann\u00e9es) - \u00c9quipe qui grandit - Besoin de plusieurs interfaces (API REST, GraphQL, CLI) - Tests automatis\u00e9s critiques - Stack technologique susceptible d'\u00e9voluer</p> <p>Ne pas utiliser si: - Prototype rapide - CRUD simple sans logique m\u00e9tier - Projet jetable (&lt; 6 mois) - \u00c9quipe tr\u00e8s junior (courbe d'apprentissage)</p>"},{"location":"SOLID/#principes-solid-fondation-de-lhexagonal","title":"Principes SOLID = Fondation de l'Hexagonal","text":"<p>L'architecture hexagonale n'est pas \"en plus\" de SOLID, c'est l'application concr\u00e8te des principes SOLID \u00e0 l'\u00e9chelle d'une application :</p> <pre><code>%%{init: {'theme':'base', 'themeVariables': { 'fontSize':'14px'}}}%%\ngraph TB\n    subgraph SOLID[\"\ud83d\udcda Principes SOLID\"]\n        SRP[\"\ud83c\udfaf Single Responsibility&lt;br/&gt;&lt;small&gt;Une responsabilit\u00e9 par classe&lt;/small&gt;\"]\n        OCP[\"\ud83d\udd13 Open/Closed&lt;br/&gt;&lt;small&gt;Ouvert extension, ferm\u00e9 modification&lt;/small&gt;\"]\n        LSP[\"\ud83d\udd04 Liskov Substitution&lt;br/&gt;&lt;small&gt;Contrats respect\u00e9s&lt;/small&gt;\"]\n        ISP[\"\u2702\ufe0f Interface Segregation&lt;br/&gt;&lt;small&gt;Interfaces sp\u00e9cialis\u00e9es&lt;/small&gt;\"]\n        DIP[\"\u2b06\ufe0f Dependency Inversion&lt;br/&gt;&lt;small&gt;D\u00e9pendre d'abstractions&lt;/small&gt;\"]\n    end\n\n    subgraph HEX[\"\ud83c\udfdb\ufe0f Architecture Hexagonale\"]\n        Layers[\"\ud83d\udcca S\u00e9paration en couches\"]\n        Ports[\"\ud83d\udd17 Ports - Interfaces\"]\n        Adapters[\"\ud83d\udd0c Adapters - Impl\u00e9mentations\"]\n        Core[\"\ud83d\udc8e Domain - C\u0153ur isol\u00e9\"]\n    end\n\n    SRP ==&gt;|\"appliqu\u00e9 \u00e0\"| Layers\n    OCP ==&gt;|\"permis par\"| Adapters\n    LSP ==&gt;|\"garanti par\"| Adapters\n    ISP ==&gt;|\"impl\u00e9ment\u00e9 via\"| Ports\n    DIP ==&gt;|\"mat\u00e9rialis\u00e9 par\"| Core\n\n    style SOLID fill:#B3E5FC,stroke:#0277BD,stroke-width:3px,color:#000\n    style HEX fill:#C8E6C9,stroke:#2E7D32,stroke-width:3px,color:#000\n    style Core fill:#FFF9C4,stroke:#F57F17,stroke-width:3px,color:#000</code></pre> <p>Correspondances:</p> <ul> <li>SRP \u2192 Chaque couche a une responsabilit\u00e9</li> <li>OCP \u2192 Nouveaux adapters sans modifier le code existant</li> <li>LSP \u2192 Adapters interchangeables</li> <li>ISP \u2192 Ports sp\u00e9cialis\u00e9s</li> <li>DIP \u2192 Domain ne d\u00e9pend de rien, Infrastructure d\u00e9pend du Domain</li> </ul> <p>Rappel: Ce bundle vous aide \u00e0 respecter ces principes automatiquement en g\u00e9n\u00e9rant la bonne structure.</p>"},{"location":"WHY-HEXAGONAL/","title":"Why Hexagonal Architecture","text":""},{"location":"WHY-HEXAGONAL/#table-of-contents","title":"Table of Contents","text":"<ul> <li>2.1 The Fundamental Question</li> <li>2.2 Traditional Layered Architecture: The Critical Problems</li> <li>2.3 Hexagonal Architecture: Inverting the Dependency Chain</li> <li>2.4 Real-World Scenarios</li> <li>2.5 Benefits Comparison</li> <li>2.6 Cost Predictability: The \"5-Day Rule\"</li> <li>2.7 Database Migration: The Ultimate Test</li> <li>2.8 Decision Guide</li> <li>2.9 Summary</li> <li>2.10 Hexagonal Architecture &amp; Core Design Principles</li> <li>2.11 Complete Decision Tree</li> </ul>"},{"location":"WHY-HEXAGONAL/#21-the-fundamental-question","title":"2.1 The Fundamental Question","text":"<p>Everything is coupled anyway, so why bother?</p> <p>Your code will always call other code. Repositories, services, databases\u2014everything is connected. The question is not about eliminating coupling (impossible), but about controlling the direction of coupling.</p>"},{"location":"WHY-HEXAGONAL/#22-traditional-layered-architecture-the-critical-problems","title":"2.2 Traditional Layered Architecture: The Critical Problems","text":"<p>In a traditional layered architecture, business logic (Services) depends directly on infrastructure (Database, Framework, Libraries). This creates a dangerous dependency chain with the following critical problems:</p>"},{"location":"WHY-HEXAGONAL/#221-framework-prison","title":"2.2.1 Framework Prison","text":"<ul> <li>Business logic is tightly coupled to Doctrine, Symfony, or any framework</li> <li>Switching from MySQL to MongoDB requires rewriting everything</li> <li>Framework update breaking APIs stops the entire application</li> <li>Real cost: Weeks of rewriting for technology changes</li> </ul>"},{"location":"WHY-HEXAGONAL/#222-testing-complexity","title":"2.2.2 Testing Complexity","text":"<ul> <li>Every test requires a real database, containers, and fixtures</li> <li>Test suite takes 10 minutes instead of 10 seconds</li> <li>Cannot test business rules without booting the entire framework</li> <li>Real cost: Developers wait, lose focus, tests get skipped</li> </ul>"},{"location":"WHY-HEXAGONAL/#223-lost-business-rules","title":"2.2.3 Lost Business Rules","text":"<ul> <li>Rules scattered across controllers, services, entities, templates</li> <li>Question: \"Can we cancel a shipped order?\" requires searching multiple locations</li> <li>Same rule duplicated in 5 different places with slight variations</li> <li>Real cost: Bugs, inconsistencies, impossible maintenance</li> </ul>"},{"location":"WHY-HEXAGONAL/#224-cannot-evolve","title":"2.2.4 Cannot Evolve","text":"<ul> <li>Adding GraphQL API requires duplicating all logic</li> <li>Adding CLI commands requires copy-pasting controllers</li> <li>Planning gRPC requires starting from scratch</li> <li>Real cost: Code duplication, diverging implementations</li> </ul>"},{"location":"WHY-HEXAGONAL/#225-death-by-thousand-cuts","title":"2.2.5 Death by Thousand Cuts","text":"<ul> <li>\"Just one quick change\" touches 20 files</li> <li>Simple features become 3-day tasks</li> <li>Fear of refactoring because everything is interconnected</li> <li>Real cost: Technical debt accumulates until rewrite is the only option</li> </ul>"},{"location":"WHY-HEXAGONAL/#23-hexagonal-architecture-inverting-the-dependency-chain","title":"2.3 Hexagonal Architecture: Inverting the Dependency Chain","text":"<p>Core Principle: Make business logic independent by inverting who depends on whom.</p>"},{"location":"WHY-HEXAGONAL/#230-the-laptop-analogy","title":"2.3.0 The Laptop Analogy \ud83d\udcbb\ud83d\udd0c","text":"<p>Before diving into technical details, let's use a simple, everyday analogy:</p> <p>Your Laptop and USB Devices</p> <p>Think about your laptop and how it connects to external devices:</p> <ul> <li>Your laptop is the core (business logic)</li> <li>Your laptop has USB ports (interfaces/contracts)</li> <li>You can plug in different devices (adapters):</li> <li>USB mouse</li> <li>USB keyboard</li> <li>USB external hard drive</li> <li>USB printer</li> <li>USB phone charger</li> </ul> <p>Key Insight: Your laptop doesn't care WHAT you plug in, as long as it respects the USB standard (interface).</p> <p>What if USB didn't exist? - Every laptop would need a specific Sony mouse port, HP keyboard port, Samsung phone port - Want to change your mouse brand? Buy a new laptop! - This is exactly how traditional layered architecture works \ud83c\udf2a\ufe0f</p> <p>With USB (Ports &amp; Adapters): - Your laptop defines: \"I need a USB port\" - Devices provide: \"I implement USB\" - Change devices anytime without changing the laptop - This is Hexagonal Architecture \ud83c\udfaf</p> <p>Mapping to Software:</p> Real World Software \ud83d\udcbb Laptop Domain (Business Logic) \ud83d\udd0c USB Port Port Interface (Contract) \ud83d\uddb1\ufe0f USB Mouse Doctrine Adapter \u2328\ufe0f USB Keyboard MongoDB Adapter \ud83d\udda8\ufe0f USB Printer Redis Adapter \ud83d\udcf1 USB Phone InMemory Adapter (for tests) <p>The Power: - Your laptop (domain) doesn't know if a mouse, keyboard, or hard drive is plugged in - It just knows: \"Something respecting USB is connected\" - Your domain doesn't know if MySQL, MongoDB, or Redis is used - It just knows: \"Something respecting <code>UserRepositoryInterface</code> is connected\"</p> <p>Real Example in Code:</p> <pre><code>// \ud83c\udf2a\ufe0f Traditional: Domain depends on concrete MySQL\nclass OrderService {\n    public function __construct(\n        private DoctrineRepository $repo  // Tightly coupled!\n    ) {}\n}\n// Problem: Want MongoDB? Rewrite OrderService!\n\n// \ud83c\udfaf Hexagonal: Domain depends on interface (USB port)\nclass PlaceOrderHandler {\n    public function __construct(\n        private OrderRepositoryInterface $repo  // Just a port!\n    ) {}\n}\n// Solution: Want MongoDB? Create MongoOrderRepository implementing the interface!\n</code></pre> <p>Why This Matters:</p> <p>Just like you can use your mouse on any laptop (Windows, Mac, Linux) because they all have USB ports, your business logic works with any database (MySQL, MongoDB, Redis) because they all implement your port interfaces.</p> <p>You control the \"USB standard\" (interface), not the device manufacturers (infrastructure libraries).</p>"},{"location":"WHY-HEXAGONAL/#231-dependency-direction","title":"2.3.1 Dependency Direction","text":"<p>Traditional (Dependencies flow DOWN):</p> <pre><code>%%{init: {'theme':'base', 'themeVariables': { 'fontSize':'16px'}}}%%\ngraph TD\n    A[\"\ud83c\udfae Controllers&lt;br/&gt;&lt;small&gt;UI Layer&lt;/small&gt;\"]\n    B[\"\u2699\ufe0f Services&lt;br/&gt;&lt;small&gt;Business Logic&lt;/small&gt;\"]\n    C[\"\ud83d\udcbe Infrastructure&lt;br/&gt;&lt;small&gt;Doctrine/Database&lt;/small&gt;\"]\n\n    A ==&gt;|\"\ud83c\udf2a\ufe0f depends on\"| B\n    B ==&gt;|\"\ud83c\udf2a\ufe0f depends on\"| C\n\n    style A fill:#E3F2FD,stroke:#1976D2,stroke-width:3px,color:#000\n    style B fill:#FFF9C4,stroke:#F57C00,stroke-width:3px,color:#000\n    style C fill:#FFCDD2,stroke:#C62828,stroke-width:3px,color:#000\n\n    classDef problemArrow stroke:#C62828,stroke-width:3px</code></pre> <p>Problem: Change database = rewrite business logic \ud83c\udf2a\ufe0f</p> <p>Hexagonal (Dependencies flow INWARD):</p> <pre><code>%%{init: {'theme':'base', 'themeVariables': { 'fontSize':'16px'}}}%%\ngraph BT\n    C[\"\ud83d\udd0c Infrastructure&lt;br/&gt;&lt;small&gt;Doctrine/Database&lt;/small&gt;\"]\n    B[\"\ud83d\udd17 Ports&lt;br/&gt;&lt;small&gt;Interfaces&lt;/small&gt;\"]\n    A[\"\ud83d\udc8e Domain&lt;br/&gt;&lt;small&gt;Business Logic - CORE&lt;/small&gt;\"]\n\n    C -.-&gt;|\"\ud83c\udfaf implements\"| B\n    B ==&gt;|\"\ud83c\udfaf defined by\"| A\n\n    style A fill:#C8E6C9,stroke:#2E7D32,stroke-width:4px,color:#000,rx:10,ry:10\n    style B fill:#FFF9C4,stroke:#F9A825,stroke-width:3px,color:#000\n    style C fill:#F8BBD0,stroke:#C2185B,stroke-width:3px,color:#000</code></pre> <p>Solution: Change database = new adapter, business logic untouched \ud83c\udfaf</p>"},{"location":"WHY-HEXAGONAL/#232-practical-implications","title":"2.3.2 Practical Implications","text":"<p>Traditional: <code>Order</code> entity has Doctrine annotations. Remove Doctrine? Domain breaks. - \ud83d\udd34 Like having a laptop with a hardwired Sony mouse - want a Logitech? Buy a new laptop!</p> <p>Hexagonal: <code>Order</code> is pure PHP with business rules. Infrastructure adapts to it. Remove Doctrine? Create a new adapter. - \ud83d\udfe2 Like having a laptop with USB ports - want a different mouse? Just plug it in!</p> <p>Key insight: Business logic doesn't know (and doesn't care) if data is stored in MySQL, MongoDB, Redis, or a text file. It defines WHAT it needs (interfaces/ports), and infrastructure provides HOW (adapters).</p> <p>Back to the Laptop Analogy: - Your laptop doesn't have \"Logitech mouse code\" or \"HP printer code\" inside - It has generic USB port logic: \"Accept anything that implements USB\" - Similarly, your domain doesn't have \"Doctrine code\" or \"MongoDB code\" inside - It has generic port logic: \"Accept anything that implements <code>OrderRepositoryInterface</code>\"</p> <p>The Freedom This Gives You: - \ud83d\udd04 Switch databases like swapping USB devices - \ud83e\uddea Test with in-memory storage (like testing laptop without plugging real devices) - \ud83d\ude80 Deploy with different storage per environment (dev/staging/prod) - \ud83d\udd0c Add new storage types without touching business logic</p>"},{"location":"WHY-HEXAGONAL/#24-real-world-scenarios","title":"2.4 Real-World Scenarios","text":""},{"location":"WHY-HEXAGONAL/#241-framework-update-symfony-4-to-7","title":"2.4.1 Framework Update (Symfony 4 to 7)","text":"<p>Layered Architecture Impact: - Business services depend on Symfony APIs (TokenStorage, Session, etc.) - Framework APIs changed? Business logic needs rewriting - Risk: Breaking changes cascade through entire application - Time: Days to weeks fixing compatibility issues</p> <p>Hexagonal Architecture Impact: - Business handlers depend only on your own interfaces - Framework APIs changed? Update adapters, handlers stay untouched - Risk: Isolated to infrastructure layer - Time: Hours updating specific adapters</p>"},{"location":"WHY-HEXAGONAL/#242-testing-speed-comparison","title":"2.4.2 Testing Speed Comparison","text":"<p>Layered Architecture Reality: - Boot Symfony kernel for every test - Connect to database, load fixtures - Run test with full I/O operations - Time per test: 2-3 seconds - Result: 100 tests = 5 minutes (developers skip tests)</p> <p>Hexagonal Architecture Reality: - Instantiate handler with in-memory repository - Test pure PHP logic with zero I/O - Time per test: 0.001 seconds - Result: 1000 tests = 1 second (developers run tests constantly)</p> <p>Impact: You can run 1000 hexagonal tests in the time layered runs 10 tests.</p> <p>Laptop Analogy for Testing: - \ud83d\udd34 Traditional: Testing laptop functionality requires plugging in real mouse, keyboard, printer, etc.   - Takes forever to set up   - Need physical devices for every test   - If printer is broken, can't test laptop!</p> <ul> <li>\ud83d\udfe2 Hexagonal: Testing laptop functionality with \"mock USB devices\"</li> <li>Instant setup (no physical devices needed)</li> <li>Test laptop logic in isolation</li> <li>Real devices can be broken, laptop tests still pass!</li> </ul> <p>This is exactly what in-memory repositories do - they're \"mock USB devices\" for your tests!</p>"},{"location":"WHY-HEXAGONAL/#243-lost-business-rules","title":"2.4.3 Lost Business Rules","text":"<p>The Question: \"Can we cancel a shipped order?\"</p> <p>Layered Architecture: Rule scattered across: - Controller (validation: <code>if ($status === 'shipped') return error;</code>) - Service (business logic with different check) - Template (UI hiding/showing cancel button with yet another condition) - Repository (queries filtering \"cancelable\" orders)</p> <p>Result: 4 different implementations, slight variations, which one is correct? Nobody knows.</p> <p>Hexagonal Architecture: One method in Domain: <pre><code>Order-&gt;cancel() throws exception if status is SHIPPED\n</code></pre></p> <p>Result: ONE source of truth. Crystal clear. Impossible to miss.</p>"},{"location":"WHY-HEXAGONAL/#244-adding-new-interface-graphql","title":"2.4.4 Adding New Interface (GraphQL)","text":"<p>Layered Architecture Problem: - Business logic mixed in REST controllers - Want GraphQL? Must copy-paste logic - Result: Same business rules duplicated in 2+ places - Maintenance nightmare: change rule = update everywhere</p> <p>Hexagonal Architecture Solution: - Business logic in handler (once) - REST controller dispatches command - GraphQL resolver dispatches same command - CLI command dispatches same command - Result: Write once, use everywhere</p> <p>Laptop Analogy for Multiple Interfaces: - \ud83d\udd34 Traditional: Want to use mouse with desktop, laptop, and tablet?   - Need to buy 3 different mice (one for each device)   - Each mouse has custom logic for its device   - Update mouse firmware? Do it 3 times!</p> <ul> <li>\ud83d\udfe2 Hexagonal: One USB mouse works with ALL devices</li> <li>Same mouse plugs into desktop, laptop, tablet</li> <li>Mouse logic written once</li> <li>Update firmware once, works everywhere!</li> </ul> <p>Your business logic is the \"mouse\" - write it once, plug it into REST/GraphQL/CLI/gRPC!</p>"},{"location":"WHY-HEXAGONAL/#25-benefits-comparison","title":"2.5 Benefits Comparison","text":"Benefit Concrete Impact Time Saved Direction Control Change database, framework, or any infrastructure without touching business logic Weeks to Days Single Source of Truth Business rules in ONE place (Domain), not scattered across 10 files 50% less bugs Lightning Tests 1000x faster (in-memory vs database I/O) 10 min to 10 sec Technology Freedom Swap MySQL to MongoDB, Doctrine to Another ORM in days not months 80% effort reduction Reusability Same business logic for REST, GraphQL, CLI, gRPC, message queue Write once, use everywhere Team Scalability Juniors on adapters (infrastructure), Seniors on domain (business) Clear separation of skill levels Long-term Viability Code survives framework updates, technology shifts, team changes 10 years vs 10 months"},{"location":"WHY-HEXAGONAL/#26-cost-predictability-the-5-day-rule","title":"2.6 Cost Predictability: The \"5-Day Rule\"","text":"<p>In traditional layered architecture, components are tightly coupled. When you add feature \"X\" after two years into the project, you must navigate code where business logic is mixed with database concerns and framework dependencies. Each modification risks breaking hidden dependencies.</p>"},{"location":"WHY-HEXAGONAL/#261-the-layered-architecture-fail","title":"2.6.1 The Layered Architecture \"Fail\"","text":"<p>The Problem: Time spent is no longer dedicated to coding the feature itself, but to: - Doing archaeology in the codebase - Understanding tangled dependencies - Fixing side effects and cascading breakages - Working around technical debt accumulated over time</p> <p>Real Impact: A feature that should take 5 days now takes 15 days because: - 3 days understanding existing code - 5 days implementing the feature - 7 days fixing broken tests and side effects</p>"},{"location":"WHY-HEXAGONAL/#262-the-hexagonal-architecture-advantage","title":"2.6.2 The Hexagonal Architecture Advantage","text":"<p>The Solution: Because the domain is isolated, adding business feature \"X\" happens in a protected environment (the core). Technical complexity (ports and adapters) is pushed to the periphery.</p> <p>Result: Similar features always cost approximately 5 days, because technical \"friction\" doesn't increase with business complexity growth.</p> <p>Why This Works: - \ud83d\udce6 Isolated Domain: Business logic lives in its own protected space - \ud83d\udd0c Peripheral Complexity: Technical concerns stay at the edges - \ud83d\udccf Predictable Costs: No hidden dependencies to unravel - \ud83c\udfaf Focus: Developers code features, not fix technical debt</p>"},{"location":"WHY-HEXAGONAL/#263-tests-the-safety-net-that-accelerates-development","title":"2.6.3 Tests: The Safety Net That Accelerates Development","text":"<p>This is the most powerful technical argument for maintaining the 5-day velocity:</p> <p>High-Fidelity, Fast Tests: - Write unit tests for your domain covering 100% of business rules - Never need to start a database or server - Tests run in milliseconds, not seconds</p> <p>Immediate Feedback: - Developer knows in 10 seconds if new feature \"X\" broke something - In traditional architecture, database-dependent tests are slow or skipped - Bugs discovered later cost 10x-100x more to fix</p> <p>Example: <pre><code>// \ud83c\udfaf Hexagonal: Test in 10ms\n$handler = new PlaceOrderHandler(new InMemoryOrderRepository());\n$result = $handler-&gt;handle($command);\n$this-&gt;assertTrue($result-&gt;isSuccess());\n\n// \ud83c\udf2a\ufe0f Traditional: Test in 2-3 seconds\n// - Boot Symfony kernel\n// - Connect to database\n// - Load fixtures\n// - Execute test\n// - Rollback transaction\n</code></pre></p>"},{"location":"WHY-HEXAGONAL/#264-the-investment-vs-credit-analogy","title":"2.6.4 The Investment vs. Credit Analogy","text":"<p>Layered Architecture is Consumer Credit: - \u2728 Easy and fast at the beginning - \ud83d\udcb8 But interest (technical debt) compounds - \ud83d\udd12 Eventually, debt strangles you - \ud83d\udcb0 Every feature becomes exponentially more expensive</p> <p>Hexagonal Architecture is Investment: - \ud83d\udcaa Pay a bit more upfront (learning curve, initial structure) - \ud83d\udcc8 Each future feature costs its real price - \ud83d\udeab No additional complexity tax - \ud83d\udc8e Value grows over time instead of degrading</p>"},{"location":"WHY-HEXAGONAL/#265-the-long-term-math","title":"2.6.5 The Long-Term Math","text":"<p>Year 1: Both architectures similar speed</p> <p>Year 2: - Layered: Features take 2x longer (archaeology + side effects) - Hexagonal: Features still take baseline time</p> <p>Year 3: - Layered: Features take 3-5x longer (massive technical debt) - Hexagonal: Features still take baseline time</p> <p>Year 5: - Layered: Major refactoring or rewrite required - Hexagonal: Still delivering features at predictable pace</p> <p>The \"5-Day Rule\" in Practice: - Traditional: \"Similar\" feature in Year 3 = 15-25 days - Hexagonal: \"Similar\" feature in Year 3 = 5-7 days - Savings: 10-20 days per feature \u00d7 50 features/year = 500-1000 days saved</p>"},{"location":"WHY-HEXAGONAL/#27-database-migration-the-ultimate-test","title":"2.7 Database Migration: The Ultimate Test","text":"<p>Challenge: Change from MySQL (Doctrine ORM) to MongoDB (Document Database)</p> <p>Laptop Analogy: - \ud83d\udd34 Traditional: Laptop hardwired to Sony mouse - want Logitech? Buy new laptop and reinstall all your software! - \ud83d\udfe2 Hexagonal: Laptop with USB port - want different mouse? Unplug Sony, plug Logitech. Laptop works instantly!</p> <p>This is database migration in a nutshell. Let's see the real impact:</p>"},{"location":"WHY-HEXAGONAL/#layered-architecture-impact","title":"Layered Architecture Impact:","text":"<p>What must change: 1. All Entities with <code>@ORM</code> annotations must be rewritten as documents 2. All Repositories using Doctrine API must be rewritten for MongoDB driver 3. All Services depending on EntityManager must refactor dependencies 4. All Tests with database fixtures must be rewritten for MongoDB 5. All Query Builder usage must be rewritten as MongoDB queries</p> <p>Estimated effort: 2-4 weeks of full-team work Risk level: HIGH - touching 60-80% of codebase Regression probability: Very high - every query must be rewritten and retested</p>"},{"location":"WHY-HEXAGONAL/#hexagonal-architecture-impact","title":"Hexagonal Architecture Impact:","text":"<p>What must change: 1. Create <code>MongoUserRepository implements UserRepositoryInterface</code> 2. Create <code>MongoOrderRepository implements OrderRepositoryInterface</code> 3. Update dependency injection configuration 4. Done.</p> <p>What stays the same: - All Domain entities (pure PHP, no annotations) - All Application handlers (depend on interfaces, not implementations) - All Business rules (in Domain, framework-agnostic) - All Unit tests (use in-memory repositories)</p> <p>Estimated effort: 1-2 days Risk level: LOW - only infrastructure adapters change Regression probability: Minimal - business logic untouched</p> <p>The Math: Hexagonal saves you 10-20x the effort on technology changes.</p>"},{"location":"WHY-HEXAGONAL/#28-decision-guide","title":"2.8 Decision Guide","text":""},{"location":"WHY-HEXAGONAL/#281-choose-hexagonal-architecture-when","title":"2.8.1 Choose Hexagonal Architecture When:","text":"Criterion Why It Matters Long-term project (&gt; 2 years) Architecture ROI pays off over time as tech evolves Growing team (&gt; 3 devs) Clear boundaries help multiple developers work in parallel Complex business rules Need single source of truth for domain logic Multiple interfaces REST + GraphQL + CLI + Events = reusable handlers Tech might change Framework updates, database migrations, cloud migrations Testing is critical Fast, reliable tests enable continuous deployment Enterprise/production Business continuity requires technology independence"},{"location":"WHY-HEXAGONAL/#282-stick-with-simpler-architecture-when","title":"2.8.2 Stick with Simpler Architecture When:","text":"Situation Better Approach Quick prototype (&lt; 3 months) Speed matters more than structure Simple CRUD Little to no business logic = overkill Solo dev, tiny project Overhead not justified Stack 100% frozen If you're SURE nothing will ever change (rarely true)"},{"location":"WHY-HEXAGONAL/#283-the-core-truth-about-decoupling","title":"2.8.3 The Core Truth About Decoupling","text":"<p>What People Think Decoupling Means:</p> <p>\"My code doesn't depend on anything! Zero coupling!\"</p> <p>Reality: Impossible. Your code will always call other code. That's programming.</p> <p>What Decoupling ACTUALLY Means:</p> <p>\"My business logic defines WHAT it needs (interfaces). Infrastructure provides HOW (implementations).\"</p>"},{"location":"WHY-HEXAGONAL/#the-fundamental-shift","title":"The Fundamental Shift","text":"<p>Traditional Mindset:</p> <pre><code>%%{init: {'theme':'base', 'themeVariables': { 'fontSize':'15px'}}}%%\ngraph LR\n    A[\"\ud83e\udd14 What can we do with&lt;br/&gt;the tools we have?\"]\n    B[\"\ud83d\udd12 Business logic limited&lt;br/&gt;by database capabilities\"]\n    C[\"\ud83d\udc40 Rules adapt to&lt;br/&gt;framework constraints\"]\n    D[\"\ud83c\udf2a\ufe0f Domain serves&lt;br/&gt;infrastructure\"]\n\n    A ==&gt; B ==&gt; C ==&gt; D\n\n    style A fill:#FFEBEE,stroke:#C62828,stroke-width:3px,color:#000\n    style B fill:#FFF3E0,stroke:#E65100,stroke-width:3px,color:#000\n    style C fill:#FFF3E0,stroke:#E65100,stroke-width:3px,color:#000\n    style D fill:#FFEBEE,stroke:#C62828,stroke-width:4px,color:#000</code></pre> <p>Hexagonal Mindset:</p> <pre><code>%%{init: {'theme':'base', 'themeVariables': { 'fontSize':'15px'}}}%%\ngraph LR\n    A[\"\ud83d\udca1 What does the&lt;br/&gt;business need?\"]\n    B[\"\ud83d\udccb Define domain&lt;br/&gt;rules first\"]\n    C[\"\ud83d\udd27 Infrastructure adapts&lt;br/&gt;to serve those rules\"]\n    D[\"\ud83c\udfaf Infrastructure&lt;br/&gt;serves domain\"]\n\n    A ==&gt; B ==&gt; C ==&gt; D\n\n    style A fill:#E8F5E9,stroke:#2E7D32,stroke-width:3px,color:#000\n    style B fill:#E8F5E9,stroke:#2E7D32,stroke-width:3px,color:#000\n    style C fill:#E1F5FE,stroke:#0277BD,stroke-width:3px,color:#000\n    style D fill:#E8F5E9,stroke:#2E7D32,stroke-width:4px,color:#000</code></pre>"},{"location":"WHY-HEXAGONAL/#29-summary","title":"2.9 Summary","text":"<p>Hexagonal architecture is not about: - Eliminating all coupling - Making code more complex - Following a trendy pattern</p> <p>Hexagonal architecture IS about: - Direction Control: Your business logic depends on abstractions, infrastructure depends on your business - Stability: Business rules stable while technology changes around them - Clarity: One place for each business rule, impossible to miss - Freedom: Change tech stack in days, not months - Speed: Test suite runs in seconds, not minutes</p> <p>The Question to Ask:</p> <p>\"If we need to change databases, frameworks, or add new interfaces next year, do I want to spend 2 weeks or 2 days?\"</p> <p>If your answer is \"2 days,\" hexagonal architecture is your solution.</p> <p>Remember: The coupling doesn't go away. You're still calling repositories and services. What changes is who is in charge\u2014your business logic or your database.</p>"},{"location":"WHY-HEXAGONAL/#210-hexagonal-architecture-core-design-principles","title":"2.10 Hexagonal Architecture &amp; Core Design Principles","text":"<p>Hexagonal Architecture isn't just a pattern\u2014it's the natural embodiment of fundamental software engineering principles. Here's how it adheres to and enforces the most important design principles:</p>"},{"location":"WHY-HEXAGONAL/#2101-dry-dont-repeat-yourself","title":"2.10.1 DRY (Don't Repeat Yourself)","text":"<p>The Principle: Every piece of knowledge should have a single, unambiguous representation in your system.</p> <p>How Hexagonal Enforces DRY:</p> <p>Traditional Layered Architecture - DRY Violations: <pre><code>// Controller\nif ($order-&gt;getStatus() === 'shipped') {\n    throw new Exception('Cannot cancel shipped order');\n}\n\n// Service\nif ($order-&gt;getStatus() === 'shipped') {\n    return false; // Same rule, different implementation\n}\n\n// Template\n{% if order.status != 'shipped' %}\n    &lt;button&gt;Cancel&lt;/button&gt;  {# Same rule, third place #}\n{% endif %}\n</code></pre></p> <p>Hexagonal Architecture - Single Source of Truth: <pre><code>// Domain/Entity/Order.php - ONE place\npublic function cancel(): void\n{\n    if ($this-&gt;status-&gt;isShipped()) {\n        throw new CannotCancelShippedOrder();\n    }\n    $this-&gt;status = OrderStatus::cancelled();\n}\n\n// Everywhere else just calls: $order-&gt;cancel()\n</code></pre></p> <p>Impact: - Business rules written once in the Domain - Controllers, CLI commands, GraphQL resolvers all use the same logic - Change rule once, applies everywhere - No diverging implementations</p>"},{"location":"WHY-HEXAGONAL/#2102-kiss-keep-it-simple-stupid","title":"2.10.2 KISS (Keep It Simple, Stupid)","text":"<p>The Principle: Simplicity should be a key goal; unnecessary complexity should be avoided.</p> <p>How Hexagonal Enforces KISS:</p> <p>The Clarity: - Domain entities are pure PHP (no annotations, no framework magic) - Handlers do one thing (single responsibility) - Ports are simple interfaces (clear contracts) - Each layer has one purpose (no mixed concerns)</p> <p>Example - Simple Domain Entity: <pre><code>// Simple, readable, no framework coupling\nfinal class Order\n{\n    private OrderId $id;\n    private OrderStatus $status;\n    private Money $total;\n\n    public function place(): void\n    {\n        if ($this-&gt;total-&gt;isZero()) {\n            throw new EmptyOrderException();\n        }\n        $this-&gt;status = OrderStatus::placed();\n    }\n}\n</code></pre></p> <p>What Makes It KISS: - No annotations cluttering the code - No framework dependencies to understand - Pure business logic, nothing else - Junior developers can read and understand immediately</p> <p>Contrast with Traditional: <pre><code>// Complex: ORM annotations, framework coupling, mixed concerns\n/**\n * @ORM\\Entity(repositoryClass=\"OrderRepository\")\n * @ORM\\Table(name=\"orders\", indexes={...})\n * @ORM\\HasLifecycleCallbacks\n */\nclass Order\n{\n    /** @ORM\\Column(type=\"decimal\", precision=10, scale=2) */\n    private $total;\n\n    /** @ORM\\PrePersist */\n    public function validate() { ... }\n}\n</code></pre></p>"},{"location":"WHY-HEXAGONAL/#2103-yagni-you-arent-gonna-need-it","title":"2.10.3 YAGNI (You Aren't Gonna Need It)","text":"<p>The Principle: Don't add functionality until it's necessary.</p> <p>How Hexagonal Enforces YAGNI:</p> <p>The Protection: Hexagonal architecture prevents over-engineering by forcing you to focus on what the business needs right now, not hypothetical future scenarios.</p> <p>Example - Creating Exactly What You Need:</p> <p>Bad (YAGNI Violation): <pre><code>// Creating generic repository with 50 methods \"just in case\"\ninterface RepositoryInterface\n{\n    public function find($id);\n    public function findAll();\n    public function findBy(array $criteria);\n    public function findOneBy(array $criteria);\n    public function save($entity);\n    public function remove($entity);\n    public function count(array $criteria);\n    public function paginate($page, $limit);\n    // ... 42 more methods you don't use\n}\n</code></pre></p> <p>Good (YAGNI Compliant - Hexagonal Way): <pre><code>// Only create methods you actually need TODAY\ninterface UserRepositoryInterface\n{\n    public function save(User $user): void;\n    public function ofId(UserId $id): ?User;\n    // That's it! Create new interfaces when needed.\n}\n</code></pre></p> <p>How Hexagonal Helps: - Ports (interfaces) force you to define only what you need - Small, focused interfaces prevent premature generalization - Easy to add methods later when requirements emerge - No framework base classes forcing unused methods on you</p>"},{"location":"WHY-HEXAGONAL/#2104-soc-separation-of-concerns","title":"2.10.4 SoC (Separation of Concerns)","text":"<p>The Principle: Different concerns should be handled by different parts of the system.</p> <p>How Hexagonal Enforces SoC:</p> <p>Hexagonal Architecture is fundamentally about SoC\u2014it's built into the structure.</p> <p>The Four Concerns, Clearly Separated:</p> Concern Layer Responsibility Example Business Rules Domain \"What can/cannot happen?\" <code>Order-&gt;cancel()</code> Use Cases Application \"How to orchestrate?\" <code>PlaceOrderHandler</code> User Interface UI \"How to present/receive?\" <code>OrderController</code>, <code>CLI Command</code> External World Infrastructure \"How to persist/send?\" <code>DoctrineOrderRepository</code> <p>Real Example:</p> <p>Traditional - Mixed Concerns: <pre><code>// Controller doing EVERYTHING (UI + Business + Infrastructure)\nclass OrderController\n{\n    public function cancel(Request $request, EntityManager $em)\n    {\n        // UI concern\n        $orderId = $request-&gt;get('id');\n\n        // Infrastructure concern\n        $order = $em-&gt;getRepository(Order::class)-&gt;find($orderId);\n\n        // Business concern\n        if ($order-&gt;getStatus() === 'shipped') {\n            throw new Exception('Cannot cancel');\n        }\n        $order-&gt;setStatus('cancelled');\n\n        // Infrastructure concern\n        $em-&gt;persist($order);\n        $em-&gt;flush();\n\n        // UI concern\n        return new JsonResponse(['success' =&gt; true]);\n    }\n}\n</code></pre></p> <p>Hexagonal - Separated Concerns: <pre><code>// UI Layer - Only handles HTTP\nclass OrderController\n{\n    public function __construct(private MessageBusInterface $bus) {}\n\n    public function cancel(Request $request): JsonResponse\n    {\n        $command = new CancelOrder($request-&gt;get('id'));\n        $this-&gt;bus-&gt;dispatch($command);\n        return new JsonResponse(['success' =&gt; true]);\n    }\n}\n\n// Application Layer - Orchestration\nclass CancelOrderHandler\n{\n    public function __construct(private OrderRepositoryInterface $orders) {}\n\n    public function __invoke(CancelOrder $command): void\n    {\n        $order = $this-&gt;orders-&gt;ofId(new OrderId($command-&gt;orderId));\n        $order-&gt;cancel(); // Business logic in Domain\n        $this-&gt;orders-&gt;save($order);\n    }\n}\n\n// Domain Layer - Business Rules\nclass Order\n{\n    public function cancel(): void\n    {\n        if ($this-&gt;status-&gt;isShipped()) {\n            throw new CannotCancelShippedOrder();\n        }\n        $this-&gt;status = OrderStatus::cancelled();\n    }\n}\n\n// Infrastructure Layer - Persistence\nclass DoctrineOrderRepository implements OrderRepositoryInterface\n{\n    public function save(Order $order): void { ... }\n    public function ofId(OrderId $id): ?Order { ... }\n}\n</code></pre></p> <p>The Benefits: - Change UI: Swap REST for GraphQL without touching business logic - Change Database: Swap MySQL for MongoDB without touching business logic - Change Business Rules: Modify domain without touching infrastructure or UI - Test in Isolation: Test each concern separately</p>"},{"location":"WHY-HEXAGONAL/#2105-dependency-injection-di","title":"2.10.5 Dependency Injection (DI)","text":"<p>The Principle: Depend on abstractions, not concretions. Inject dependencies rather than creating them.</p> <p>How Hexagonal Enforces DI:</p> <p>Hexagonal Architecture is fundamentally built on Dependency Injection\u2014it's impossible to implement it without DI.</p> <p>The Pattern: - Handlers depend on interfaces (ports), not concrete implementations - Dependencies are injected via constructor - Framework handles wiring via dependency injection container - Inversion of Control is mandatory, not optional</p> <p>Example:</p> <p>Without DI (Tightly Coupled): <pre><code>// Handler creates its own dependencies - IMPOSSIBLE to test or swap\nclass PlaceOrderHandler\n{\n    public function __invoke(PlaceOrder $command): void\n    {\n        // Creating concrete implementation inside!\n        $repository = new DoctrineOrderRepository();\n        $emailer = new SmtpEmailSender();\n\n        // Now stuck with Doctrine and SMTP forever\n        $order = Order::create($command-&gt;userId, $command-&gt;items);\n        $repository-&gt;save($order);\n        $emailer-&gt;send($order-&gt;userEmail(), 'Order placed');\n    }\n}\n</code></pre></p> <p>With DI (Hexagonal Way): <pre><code>// Handler receives dependencies via constructor - testable and swappable\nclass PlaceOrderHandler\n{\n    public function __construct(\n        private OrderRepositoryInterface $orders,      // Port (abstraction)\n        private EmailSenderInterface $emailer          // Port (abstraction)\n    ) {}\n\n    public function __invoke(PlaceOrder $command): void\n    {\n        $order = Order::create($command-&gt;userId, $command-&gt;items);\n        $this-&gt;orders-&gt;save($order);\n        $this-&gt;emailer-&gt;send($order-&gt;userEmail(), 'Order placed');\n    }\n}\n\n// In tests: inject in-memory implementations\n// In production: inject Doctrine + SMTP\n// In staging: inject Doctrine + SendGrid\n</code></pre></p> <p>Why This Matters: - Testability: Inject in-memory fakes for lightning-fast tests - Flexibility: Swap implementations without changing handler code - Clarity: Dependencies are explicit in constructor - Framework Agnostic: Handler doesn't know about Symfony/Laravel/etc.</p>"},{"location":"WHY-HEXAGONAL/#2106-factory-pattern","title":"2.10.6 Factory Pattern","text":"<p>The Principle: Encapsulate complex object creation logic in dedicated factories.</p> <p>How Hexagonal Promotes Factory Pattern:</p> <p>Domain entities often have complex creation rules. Hexagonal Architecture promotes factories to keep entities clean and focused on business logic. Factories work hand-in-hand with the CQRS pattern - Command Handlers use factories to create entities from Commands, ensuring consistent object creation across all entry points (HTTP, CLI, GraphQL).</p> <p>The Pattern: - Factory handles complex entity creation - Entity constructor stays simple (just assignment) - Business rules for creation live in factory - Validation happens during creation - CQRS integration: Command Handlers delegate creation to factories</p> <p>Example:</p> <p>Without Factory (Entity Does Everything): <pre><code>// Entity constructor bloated with creation logic\nclass Order\n{\n    public function __construct(\n        UserId $userId,\n        array $items,\n        ShippingAddress $address,\n        PaymentMethod $payment\n    ) {\n        // Validation logic in constructor!\n        if (empty($items)) {\n            throw new EmptyOrderException();\n        }\n\n        // Business rules in constructor!\n        if (count($items) &gt; 100) {\n            throw new TooManyItemsException();\n        }\n\n        // Calculation in constructor!\n        $this-&gt;total = $this-&gt;calculateTotal($items);\n        $this-&gt;tax = $this-&gt;calculateTax($this-&gt;total, $address);\n\n        // Assignment\n        $this-&gt;id = OrderId::generate();\n        $this-&gt;userId = $userId;\n        $this-&gt;items = $items;\n        // ...\n    }\n}\n</code></pre></p> <p>With Factory (Clean Separation): <pre><code>// Entity: Simple, focused on behavior\nclass Order\n{\n    private function __construct(\n        private OrderId $id,\n        private UserId $userId,\n        private OrderItems $items,\n        private Money $total,\n        private OrderStatus $status\n    ) {}\n\n    // Behavior methods\n    public function cancel(): void { ... }\n    public function ship(): void { ... }\n}\n\n// Factory: Handles complex creation\nclass OrderFactory\n{\n    public function __construct(\n        private TaxCalculator $taxCalculator,\n        private DiscountCalculator $discountCalculator\n    ) {}\n\n    public function create(\n        UserId $userId,\n        array $rawItems,\n        ShippingAddress $address,\n        PaymentMethod $payment\n    ): Order {\n        // Validation\n        if (empty($rawItems)) {\n            throw new EmptyOrderException();\n        }\n\n        // Complex construction logic\n        $items = OrderItems::fromArray($rawItems);\n        $subtotal = $items-&gt;calculateTotal();\n        $discount = $this-&gt;discountCalculator-&gt;calculate($userId, $subtotal);\n        $tax = $this-&gt;taxCalculator-&gt;calculate($subtotal, $address);\n        $total = $subtotal-&gt;subtract($discount)-&gt;add($tax);\n\n        // Clean creation\n        return new Order(\n            OrderId::generate(),\n            $userId,\n            $items,\n            $total,\n            OrderStatus::pending()\n        );\n    }\n}\n\n// Usage in handler\nclass PlaceOrderHandler\n{\n    public function __construct(\n        private OrderFactory $factory,\n        private OrderRepositoryInterface $orders\n    ) {}\n\n    public function __invoke(PlaceOrder $command): void\n    {\n        $order = $this-&gt;factory-&gt;create(\n            $command-&gt;userId,\n            $command-&gt;items,\n            $command-&gt;address,\n            $command-&gt;payment\n        );\n\n        $this-&gt;orders-&gt;save($order);\n    }\n}\n</code></pre></p> <p>Benefits: - Entity Stays Clean: Focused on business behavior, not creation - Testable Creation: Test factory logic independently - Reusable: Same factory used by multiple handlers - Complex Logic Isolated: Tax, discounts, validation in one place</p>"},{"location":"WHY-HEXAGONAL/#2107-dto-pattern-data-transfer-objects","title":"2.10.7 DTO Pattern (Data Transfer Objects)","text":"<p>The Principle: Use simple data structures to transfer data between layers without coupling to business logic.</p> <p>How Hexagonal Promotes DTOs:</p> <p>Hexagonal Architecture uses DTOs extensively to maintain layer boundaries and prevent coupling.</p> <p>The Three Main DTO Types:</p> <p>1. Commands &amp; Queries (Application Layer Input): <pre><code>// Command DTO - Input to write operations\nfinal readonly class PlaceOrder\n{\n    public function __construct(\n        public string $userId,\n        public array $items,\n        public string $shippingAddress,\n        public string $paymentMethod\n    ) {}\n}\n\n// Query DTO - Input to read operations\nfinal readonly class FindOrderById\n{\n    public function __construct(\n        public string $orderId\n    ) {}\n}\n</code></pre></p> <p>2. Response DTOs (Application Layer Output): <pre><code>// Response DTO - Output from queries\nfinal readonly class OrderView\n{\n    public function __construct(\n        public string $id,\n        public string $status,\n        public float $total,\n        public array $items,\n        public string $createdAt\n    ) {}\n\n    public static function fromEntity(Order $order): self\n    {\n        return new self(\n            $order-&gt;id()-&gt;value(),\n            $order-&gt;status()-&gt;value(),\n            $order-&gt;total()-&gt;amount(),\n            $order-&gt;items()-&gt;toArray(),\n            $order-&gt;createdAt()-&gt;format('Y-m-d H:i:s')\n        );\n    }\n}\n</code></pre></p> <p>3. Input DTOs (UI Layer to Application): <pre><code>// Input DTO - From forms/API to commands\nfinal readonly class CreateUserInput\n{\n    public function __construct(\n        public string $email,\n        public string $password,\n        public string $firstName,\n        public string $lastName\n    ) {}\n\n    public function toCommand(): RegisterUser\n    {\n        return new RegisterUser(\n            $this-&gt;email,\n            $this-&gt;password,\n            $this-&gt;firstName,\n            $this-&gt;lastName\n        );\n    }\n}\n</code></pre></p> <p>Why DTOs Matter in Hexagonal:</p> <pre><code>// WITHOUT DTOs - Tight Coupling\nclass OrderController\n{\n    public function create(Request $request)\n    {\n        // Domain entity exposed to UI layer!\n        $order = new Order(\n            new UserId($request-&gt;get('user_id')),\n            $request-&gt;get('items'),\n            // ...\n        );\n\n        // UI knows about domain internals - BAD!\n    }\n}\n\n// WITH DTOs - Proper Decoupling\nclass OrderController\n{\n    public function __construct(private MessageBusInterface $bus) {}\n\n    public function create(Request $request): JsonResponse\n    {\n        // DTO: Simple data structure\n        $command = new PlaceOrder(\n            $request-&gt;get('user_id'),\n            $request-&gt;get('items'),\n            $request-&gt;get('shipping_address'),\n            $request-&gt;get('payment_method')\n        );\n\n        // Dispatch to application layer\n        $this-&gt;bus-&gt;dispatch($command);\n\n        return new JsonResponse(['success' =&gt; true]);\n    }\n}\n</code></pre> <p>Benefits: - Layer Independence: UI doesn't know about Domain entities - Versioning: Change DTOs without breaking domain - Serialization: Easy to serialize/deserialize for APIs - Validation: Validate at boundaries before reaching domain - Documentation: DTOs serve as API contracts</p>"},{"location":"WHY-HEXAGONAL/#2108-event-sourcing-pattern","title":"2.10.8 Event Sourcing Pattern","text":"<p>The Principle: Store state changes as a sequence of events rather than current state.</p> <p>How Hexagonal Promotes Event Sourcing:</p> <p>Hexagonal Architecture's separation of concerns makes Event Sourcing a natural fit. Domain events are first-class citizens.</p> <p>The Pattern: - Domain Events record what happened - Event Store persists event stream - Event Handlers react to events - Projections rebuild state from events</p> <p>Example:</p> <p>Traditional State Storage: <pre><code>// Only current state stored\nclass Order\n{\n    private OrderStatus $status = OrderStatus::PENDING;\n\n    public function place(): void\n    {\n        $this-&gt;status = OrderStatus::PLACED;\n        // Lost: WHEN it was placed, WHO placed it\n    }\n\n    public function ship(): void\n    {\n        $this-&gt;status = OrderStatus::SHIPPED;\n        // Lost: WHEN it shipped, tracking number, carrier\n    }\n}\n\n// Database stores: { status: \"SHIPPED\" }\n// History lost forever!\n</code></pre></p> <p>Event Sourcing in Hexagonal: <pre><code>// Domain Event (immutable DTO)\nfinal readonly class OrderPlaced\n{\n    public function __construct(\n        public OrderId $orderId,\n        public UserId $userId,\n        public Money $total,\n        public DateTimeImmutable $occurredAt\n    ) {}\n}\n\nfinal readonly class OrderShipped\n{\n    public function __construct(\n        public OrderId $orderId,\n        public string $trackingNumber,\n        public string $carrier,\n        public DateTimeImmutable $occurredAt\n    ) {}\n}\n\n// Entity that emits events\nclass Order\n{\n    private array $recordedEvents = [];\n    private OrderStatus $status;\n\n    public function place(): void\n    {\n        if (!$this-&gt;status-&gt;isPending()) {\n            throw new OrderAlreadyPlacedException();\n        }\n\n        $this-&gt;status = OrderStatus::placed();\n\n        // Record what happened\n        $this-&gt;recordedEvents[] = new OrderPlaced(\n            $this-&gt;id,\n            $this-&gt;userId,\n            $this-&gt;total,\n            new DateTimeImmutable()\n        );\n    }\n\n    public function ship(string $trackingNumber, string $carrier): void\n    {\n        if (!$this-&gt;status-&gt;isPlaced()) {\n            throw new CannotShipUnplacedOrderException();\n        }\n\n        $this-&gt;status = OrderStatus::shipped();\n\n        // Record what happened\n        $this-&gt;recordedEvents[] = new OrderShipped(\n            $this-&gt;id,\n            $trackingNumber,\n            $carrier,\n            new DateTimeImmutable()\n        );\n    }\n\n    public function pullEvents(): array\n    {\n        $events = $this-&gt;recordedEvents;\n        $this-&gt;recordedEvents = [];\n        return $events;\n    }\n}\n\n// Handler publishes events\nclass PlaceOrderHandler\n{\n    public function __construct(\n        private OrderRepositoryInterface $orders,\n        private EventBusInterface $eventBus\n    ) {}\n\n    public function __invoke(PlaceOrder $command): void\n    {\n        $order = Order::create($command-&gt;userId, $command-&gt;items);\n        $order-&gt;place();\n\n        $this-&gt;orders-&gt;save($order);\n\n        // Publish all domain events\n        foreach ($order-&gt;pullEvents() as $event) {\n            $this-&gt;eventBus-&gt;publish($event);\n        }\n    }\n}\n\n// Event Subscriber reacts to events\nclass SendOrderConfirmationEmail\n{\n    public function __construct(private EmailSenderInterface $emailer) {}\n\n    public function __invoke(OrderPlaced $event): void\n    {\n        $this-&gt;emailer-&gt;send(\n            $event-&gt;userId,\n            'Order Confirmation',\n            \"Your order #{$event-&gt;orderId-&gt;value()} has been placed!\"\n        );\n    }\n}\n\n// Event Store (if doing full event sourcing)\ninterface EventStoreInterface\n{\n    public function append(OrderId $orderId, array $events): void;\n    public function loadEvents(OrderId $orderId): array;\n}\n\n// Rebuild entity from events\nclass OrderEventSourcedRepository implements OrderRepositoryInterface\n{\n    public function __construct(private EventStoreInterface $eventStore) {}\n\n    public function ofId(OrderId $id): ?Order\n    {\n        $events = $this-&gt;eventStore-&gt;loadEvents($id);\n\n        if (empty($events)) {\n            return null;\n        }\n\n        // Replay events to rebuild state\n        return Order::fromEvents($events);\n    }\n}\n</code></pre></p> <p>Why Event Sourcing Fits Hexagonal:</p> Hexagonal Concept Event Sourcing Benefit Domain Events Natural part of domain model Ports Easy to swap event store implementations Adapters Event subscribers in infrastructure layer SoC Events separate \"what happened\" from \"what to do\" Testability Test event emission without infrastructure <p>Benefits: - Complete Audit Trail: Know WHEN, WHO, WHAT for everything - Time Travel: Reconstruct state at any point in time - Business Intelligence: Analyze event streams for insights - Debugging: Replay events to reproduce bugs - CQRS Ready: Events naturally separate writes from reads</p>"},{"location":"WHY-HEXAGONAL/#2109-strategy-pattern","title":"2.10.9 Strategy Pattern","text":"<p>The Principle: Define a family of algorithms, encapsulate each one, and make them interchangeable.</p> <p>How Hexagonal Promotes Strategy Pattern:</p> <p>Hexagonal Architecture's use of ports (interfaces) is essentially the Strategy pattern at the architectural level. Every port is a strategy contract.</p> <p>The Pattern: - Port Interface defines the strategy contract - Multiple Adapters implement different strategies - Dependency Injection selects which strategy to use - Runtime Switching possible via configuration or business logic</p> <p>Example 1: Payment Processing Strategies</p> <pre><code>// Port - Strategy Interface\ninterface PaymentProcessorInterface\n{\n    public function charge(Money $amount, PaymentDetails $details): PaymentResult;\n    public function refund(TransactionId $transactionId, Money $amount): RefundResult;\n}\n\n// Strategy 1: Stripe Adapter\nclass StripePaymentProcessor implements PaymentProcessorInterface\n{\n    public function __construct(private StripeClient $client) {}\n\n    public function charge(Money $amount, PaymentDetails $details): PaymentResult\n    {\n        $charge = $this-&gt;client-&gt;charges-&gt;create([\n            'amount' =&gt; $amount-&gt;cents(),\n            'currency' =&gt; $amount-&gt;currency(),\n            'source' =&gt; $details-&gt;token()\n        ]);\n\n        return PaymentResult::success($charge-&gt;id);\n    }\n\n    public function refund(TransactionId $transactionId, Money $amount): RefundResult\n    {\n        // Stripe-specific refund logic\n    }\n}\n\n// Strategy 2: PayPal Adapter\nclass PayPalPaymentProcessor implements PaymentProcessorInterface\n{\n    public function __construct(private PayPalClient $client) {}\n\n    public function charge(Money $amount, PaymentDetails $details): PaymentResult\n    {\n        $payment = $this-&gt;client-&gt;createPayment([\n            'amount' =&gt; $amount-&gt;cents(),\n            'currency_code' =&gt; $amount-&gt;currency(),\n            'payment_method_token' =&gt; $details-&gt;token()\n        ]);\n\n        return PaymentResult::success($payment-&gt;id);\n    }\n\n    public function refund(TransactionId $transactionId, Money $amount): RefundResult\n    {\n        // PayPal-specific refund logic\n    }\n}\n\n// Strategy 3: Test/Mock Adapter\nclass InMemoryPaymentProcessor implements PaymentProcessorInterface\n{\n    private array $transactions = [];\n\n    public function charge(Money $amount, PaymentDetails $details): PaymentResult\n    {\n        $id = uniqid('txn_');\n        $this-&gt;transactions[$id] = ['amount' =&gt; $amount, 'status' =&gt; 'charged'];\n        return PaymentResult::success($id);\n    }\n\n    public function refund(TransactionId $transactionId, Money $amount): RefundResult\n    {\n        $this-&gt;transactions[$transactionId-&gt;value()]['status'] = 'refunded';\n        return RefundResult::success();\n    }\n}\n\n// Handler - Strategy Consumer\nclass ProcessPaymentHandler\n{\n    public function __construct(\n        private PaymentProcessorInterface $processor  // Strategy injected!\n    ) {}\n\n    public function __invoke(ProcessPayment $command): void\n    {\n        // Business logic doesn't know WHICH processor is used\n        $result = $this-&gt;processor-&gt;charge(\n            new Money($command-&gt;amount, $command-&gt;currency),\n            new PaymentDetails($command-&gt;paymentToken)\n        );\n\n        if ($result-&gt;failed()) {\n            throw new PaymentFailedException($result-&gt;error());\n        }\n    }\n}\n\n// Configuration - Strategy Selection\n// config/services.yaml\nservices:\n    # Production: Use Stripe\n    PaymentProcessorInterface:\n        class: StripePaymentProcessor\n\n    # Or PayPal for specific regions\n    # PaymentProcessorInterface:\n    #     class: PayPalPaymentProcessor\n\n    # Or in-memory for tests\n    # PaymentProcessorInterface:\n    #     class: InMemoryPaymentProcessor\n</code></pre> <p>Example 2: Dynamic Strategy Selection Based on Business Rules</p> <pre><code>// Multiple notification strategies\ninterface NotificationSenderInterface\n{\n    public function send(UserId $userId, string $message): void;\n    public function supports(NotificationPreference $preference): bool;\n}\n\nclass EmailNotificationSender implements NotificationSenderInterface\n{\n    public function send(UserId $userId, string $message): void\n    {\n        // Send email\n    }\n\n    public function supports(NotificationPreference $preference): bool\n    {\n        return $preference-&gt;isEmail();\n    }\n}\n\nclass SmsNotificationSender implements NotificationSenderInterface\n{\n    public function send(UserId $userId, string $message): void\n    {\n        // Send SMS\n    }\n\n    public function supports(NotificationPreference $preference): bool\n    {\n        return $preference-&gt;isSms();\n    }\n}\n\nclass PushNotificationSender implements NotificationSenderInterface\n{\n    public function send(UserId $userId, string $message): void\n    {\n        // Send push notification\n    }\n\n    public function supports(NotificationPreference $preference): bool\n    {\n        return $preference-&gt;isPush();\n    }\n}\n\n// Strategy Selector (Chain of Responsibility + Strategy)\nclass NotificationService\n{\n    /** @param NotificationSenderInterface[] $senders */\n    public function __construct(\n        private iterable $senders,\n        private UserRepositoryInterface $users\n    ) {}\n\n    public function notify(UserId $userId, string $message): void\n    {\n        $user = $this-&gt;users-&gt;ofId($userId);\n        $preference = $user-&gt;notificationPreference();\n\n        // Select strategy based on business rules\n        foreach ($this-&gt;senders as $sender) {\n            if ($sender-&gt;supports($preference)) {\n                $sender-&gt;send($userId, $message);\n                return;\n            }\n        }\n\n        throw new NoSupportedNotificationMethodException();\n    }\n}\n\n// Configuration - Register all strategies\n// config/services.yaml\nservices:\n    EmailNotificationSender:\n        tags: ['notification.sender']\n\n    SmsNotificationSender:\n        tags: ['notification.sender']\n\n    PushNotificationSender:\n        tags: ['notification.sender']\n\n    NotificationService:\n        arguments:\n            $senders: !tagged_iterator notification.sender\n</code></pre> <p>Example 3: Storage Strategy</p> <pre><code>// Port - Storage Strategy\ninterface FileStorageInterface\n{\n    public function store(string $path, string $contents): void;\n    public function retrieve(string $path): string;\n    public function delete(string $path): void;\n}\n\n// Strategy 1: Local Filesystem\nclass LocalFileStorage implements FileStorageInterface\n{\n    public function __construct(private string $basePath) {}\n\n    public function store(string $path, string $contents): void\n    {\n        file_put_contents($this-&gt;basePath . '/' . $path, $contents);\n    }\n\n    public function retrieve(string $path): string\n    {\n        return file_get_contents($this-&gt;basePath . '/' . $path);\n    }\n\n    public function delete(string $path): void\n    {\n        unlink($this-&gt;basePath . '/' . $path);\n    }\n}\n\n// Strategy 2: AWS S3\nclass S3FileStorage implements FileStorageInterface\n{\n    public function __construct(private S3Client $client, private string $bucket) {}\n\n    public function store(string $path, string $contents): void\n    {\n        $this-&gt;client-&gt;putObject([\n            'Bucket' =&gt; $this-&gt;bucket,\n            'Key' =&gt; $path,\n            'Body' =&gt; $contents\n        ]);\n    }\n\n    public function retrieve(string $path): string\n    {\n        $result = $this-&gt;client-&gt;getObject([\n            'Bucket' =&gt; $this-&gt;bucket,\n            'Key' =&gt; $path\n        ]);\n        return $result['Body']-&gt;getContents();\n    }\n\n    public function delete(string $path): void\n    {\n        $this-&gt;client-&gt;deleteObject([\n            'Bucket' =&gt; $this-&gt;bucket,\n            'Key' =&gt; $path\n        ]);\n    }\n}\n\n// Strategy 3: In-Memory (for tests)\nclass InMemoryFileStorage implements FileStorageInterface\n{\n    private array $files = [];\n\n    public function store(string $path, string $contents): void\n    {\n        $this-&gt;files[$path] = $contents;\n    }\n\n    public function retrieve(string $path): string\n    {\n        return $this-&gt;files[$path] ?? throw new FileNotFoundException();\n    }\n\n    public function delete(string $path): void\n    {\n        unset($this-&gt;files[$path]);\n    }\n}\n\n// Usage in domain\nclass UploadDocumentHandler\n{\n    public function __construct(\n        private FileStorageInterface $storage,  // Strategy!\n        private DocumentRepositoryInterface $documents\n    ) {}\n\n    public function __invoke(UploadDocument $command): void\n    {\n        // Business logic doesn't know WHERE files are stored\n        $this-&gt;storage-&gt;store(\n            $command-&gt;filePath,\n            $command-&gt;fileContents\n        );\n\n        $document = Document::create($command-&gt;filePath, $command-&gt;fileName);\n        $this-&gt;documents-&gt;save($document);\n    }\n}\n</code></pre> <p>Why Strategy Pattern Fits Hexagonal:</p> Hexagonal Concept Strategy Benefit Ports Strategy interfaces (contracts) Adapters Strategy implementations (algorithms) DI Runtime strategy selection Testability Inject test strategies easily Flexibility Swap strategies per environment <p>Real-World Scenarios:</p> <pre><code>// Development environment\nFileStorageInterface -&gt; LocalFileStorage\n\n// Staging environment\nFileStorageInterface -&gt; S3FileStorage (staging bucket)\n\n// Production environment\nFileStorageInterface -&gt; S3FileStorage (production bucket)\n\n// Tests\nFileStorageInterface -&gt; InMemoryFileStorage\n</code></pre> <p>Benefits: - Algorithm Flexibility: Change algorithms without changing business logic - Configuration-Based: Select strategy via config, not code changes - Environment-Specific: Different strategies per environment (dev/staging/prod) - A/B Testing: Switch strategies to compare performance - Gradual Migration: Run old and new strategies in parallel - Open/Closed Principle: Add new strategies without modifying existing code</p> <p>The Power:</p> <p>Traditional approach requires code changes: <pre><code>// BAD: Hard-coded strategy\nclass PaymentHandler\n{\n    public function process()\n    {\n        $stripe = new StripeClient();  // Changing to PayPal? Rewrite!\n        $stripe-&gt;charge(...);\n    }\n}\n</code></pre></p> <p>Hexagonal with Strategy pattern: <pre><code>// GOOD: Strategy injected\nclass PaymentHandler\n{\n    public function __construct(private PaymentProcessorInterface $processor) {}\n\n    public function process()\n    {\n        $this-&gt;processor-&gt;charge(...);  // Changing to PayPal? Change config!\n    }\n}\n</code></pre></p> <p>Key Insight: In Hexagonal Architecture, every port is a potential strategy. The pattern is baked into the architecture itself.</p>"},{"location":"WHY-HEXAGONAL/#21010-why-these-patterns-matter-together","title":"2.10.10 Why These Patterns Matter Together","text":"<p>Hexagonal Architecture doesn't just allow these patterns\u2014it naturally promotes them:</p> <pre><code>%%{init: {'theme':'base', 'themeVariables': { 'fontSize':'12px'}}}%%\ngraph TD\n    A[\"\ud83c\udfaf Hexagonal&lt;br/&gt;Architecture\"]\n    B[\"\u2705 DRY&lt;br/&gt;Single source of truth\"]\n    C[\"\u2705 KISS&lt;br/&gt;Pure, simple code\"]\n    D[\"\u2705 YAGNI&lt;br/&gt;Build what you need\"]\n    E[\"\u2705 SoC&lt;br/&gt;Clear layer boundaries\"]\n    F[\"\ud83d\udd0c Dependency Injection&lt;br/&gt;Inject ports, not implementations\"]\n    G[\"\ud83c\udfed Factory Pattern&lt;br/&gt;Clean entity creation\"]\n    H[\"\ud83d\udce6 DTO Pattern&lt;br/&gt;Layer decoupling\"]\n    I[\"\ud83d\udcc5 Event Sourcing&lt;br/&gt;Domain events as first-class\"]\n    J[\"\u26a1 Strategy Pattern&lt;br/&gt;Swappable algorithms\"]\n\n    A ==&gt; B\n    A ==&gt; C\n    A ==&gt; D\n    A ==&gt; E\n    A ==&gt; F\n    A ==&gt; G\n    A ==&gt; H\n    A ==&gt; I\n    A ==&gt; J\n\n    style A fill:#C8E6C9,stroke:#2E7D32,stroke-width:4px,color:#000\n    style B fill:#E3F2FD,stroke:#1976D2,stroke-width:2px,color:#000\n    style C fill:#FFF9C4,stroke:#F57C00,stroke-width:2px,color:#000\n    style D fill:#F3E5F5,stroke:#7B1FA2,stroke-width:2px,color:#000\n    style E fill:#FFE0B2,stroke:#E65100,stroke-width:2px,color:#000\n    style F fill:#E1F5FE,stroke:#0277BD,stroke-width:2px,color:#000\n    style G fill:#FCE4EC,stroke:#C2185B,stroke-width:2px,color:#000\n    style H fill:#F3E5F5,stroke:#6A1B9A,stroke-width:2px,color:#000\n    style I fill:#E8F5E9,stroke:#388E3C,stroke-width:2px,color:#000\n    style J fill:#FFF3E0,stroke:#EF6C00,stroke-width:2px,color:#000</code></pre> <p>The Synergy:</p> Principle/Pattern How Hexagonal Enforces It DRY Business rules in Domain, used everywhere via handlers KISS Pure entities, simple interfaces, focused handlers YAGNI Minimal ports, add methods only when needed SoC Strict layer boundaries, clear responsibilities DI Mandatory for ports/adapters, enables testing Factory Complex creation isolated from entity behavior DTO Commands, Queries, Responses decouple layers Event Sourcing Domain events natural, easy to implement Strategy Every port is a strategy, swap via config/DI <p>The Result: - Code that's easy to understand (KISS + DTOs) - Code that's easy to maintain (DRY + SoC) - Code that's easy to test (DI + Factories + Strategy) - Code that's easy to evolve (YAGNI + Event Sourcing) - Code that's flexible (Strategy + DI for runtime swapping) - Code that survives technology changes (SoC + Ports/Adapters)</p> <p>Real-World Impact: - Change database? DI + Strategy makes it trivial (inject different repository) - Change payment provider? Strategy pattern (Stripe \u2192 PayPal via config) - Add new feature? Factory + DTOs keep it clean - Track user actions? Event Sourcing gives complete audit trail - Understand business rules? DRY means one place to look - Test complex scenarios? DI + DTOs + Strategy make tests lightning fast - A/B test algorithms? Strategy enables runtime switching</p>"},{"location":"WHY-HEXAGONAL/#211-complete-decision-tree-what-to-create-and-how","title":"2.11 Complete Decision Tree: What to Create and How \ud83c\udf33","text":"<p>This comprehensive decision tree covers ALL possible scenarios when building with hexagonal architecture. Follow the flow to know exactly what to create, how to create it, and whether you need an interface.</p>"},{"location":"WHY-HEXAGONAL/#the-master-decision-tree","title":"\ud83c\udfaf The Master Decision Tree","text":"<pre><code>What do you need to create?\n\u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\u2502 \ud83d\udce6 DOMAIN LAYER (Core Business Logic - Pure PHP)\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\u2502\n\u251c\u2500 1\ufe0f\u20e3 Entity (User, Order, Product)?\n\u2502  \u2514\u2500 \ud83c\udfaf bin/console make:hexagonal:entity user/account User [--with-repository] [--with-id-vo]\n\u2502     Generates: Entity + YAML mapping\n\u2502     Options:\n\u2502       --with-repository \u2192 adds Port interface + Doctrine adapter\n\u2502       --with-id-vo \u2192 adds UserId value object\n\u2502\n\u251c\u2500 2\ufe0f\u20e3 Value Object (Email, Money, Address)?\n\u2502  \u2514\u2500 \ud83c\udfaf bin/console make:hexagonal:value-object user/account Email\n\u2502\n\u251c\u2500 3\ufe0f\u20e3 Domain Exception (InvalidEmail, InsufficientFunds)?\n\u2502  \u2514\u2500 \ud83c\udfaf bin/console make:hexagonal:exception user/account InvalidEmailException\n\u2502\n\u251c\u2500 4\ufe0f\u20e3 Domain Event (OrderPlaced, UserRegistered)?\n\u2502  \u2514\u2500 \ud83c\udfaf bin/console make:hexagonal:domain-event order/payment OrderPlaced [--with-subscriber]\n\u2502     Options:\n\u2502       --with-subscriber \u2192 adds event subscriber in Application layer\n\u2502\n\u251c\u2500 5\ufe0f\u20e3 Domain Service (PriceCalculator, IdGenerator)?\n\u2502  \u2514\u2500 \ud83c\udfaf Create manually - Concrete class in Domain/Service/\n\u2502     No interface needed (pure business logic)\n\u2502\n\u251c\u2500 6\ufe0f\u20e3 Repository (data access)?\n\u2502  \u2514\u2500 \ud83c\udfaf bin/console make:hexagonal:repository user/account User\n\u2502     Generates: Port interface + Doctrine adapter\n\u2502\n\u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\u2502 \u2699\ufe0f APPLICATION LAYER (Use Cases &amp; Orchestration)\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\u2502\n\u251c\u2500 7\ufe0f\u20e3 Command (write operation)?\n\u2502  \u2514\u2500 \ud83c\udfaf bin/console make:hexagonal:command user/account register [--factory] [--with-tests]\n\u2502     Options:\n\u2502       --factory \u2192 adds entity factory\n\u2502       --with-tests \u2192 adds unit + integration tests\n\u2502\n\u251c\u2500 8\ufe0f\u20e3 Query (read operation)?\n\u2502  \u2514\u2500 \ud83c\udfaf bin/console make:hexagonal:query user/account find-by-id\n\u2502     Generates: Query + Handler + Response\n\u2502\n\u251c\u2500 9\ufe0f\u20e3 UseCase?\n\u2502  \u2514\u2500 \ud83c\udfaf bin/console make:hexagonal:use-case user/account CreateUser [--with-test]\n\u2502     Options:\n\u2502       --with-test \u2192 adds test (KernelTestCase)\n\u2502\n\u251c\u2500 \ud83d\udd1f Input DTO?\n\u2502  \u2514\u2500 \ud83c\udfaf bin/console make:hexagonal:input user/account CreateUserInput\n\u2502\n\u251c\u2500 1\ufe0f\u20e31\ufe0f\u20e3 Event Subscriber (business workflow)?\n\u2502  \u2514\u2500 \ud83c\udfaf bin/console make:hexagonal:event-subscriber order/payment OrderPlaced --layer=application\n\u2502\n\u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\u2502 \ud83c\udfae UI LAYER (Primary Adapters - User Interfaces)\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\u2502\n\u251c\u2500 1\ufe0f\u20e32\ufe0f\u20e3 Controller?\n\u2502  \u2514\u2500 \ud83c\udfaf bin/console make:hexagonal:controller user/account CreateUser /users/create [--with-workflow]\n\u2502     Options:\n\u2502       --with-workflow \u2192 adds Form + UseCase + Command + Input (6 files!)\n\u2502\n\u251c\u2500 1\ufe0f\u20e33\ufe0f\u20e3 Form?\n\u2502  \u2514\u2500 \ud83c\udfaf bin/console make:hexagonal:form user/account User [--with-command --action=Create]\n\u2502     Options:\n\u2502       --with-command \u2192 adds Command + Input\n\u2502\n\u251c\u2500 1\ufe0f\u20e34\ufe0f\u20e3 CLI Command?\n\u2502  \u2514\u2500 \ud83c\udfaf bin/console make:hexagonal:cli-command user/account CreateUser app:user:create [--with-use-case]\n\u2502     Options:\n\u2502       --with-use-case \u2192 adds UseCase + Command + Input\n\u2502\n\u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\u2502 \ud83d\udd0c INFRASTRUCTURE LAYER (Secondary Adapters - External Services)\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\u2502\n\u251c\u2500 1\ufe0f\u20e35\ufe0f\u20e3 External Service (Email, FileStorage, Payment, Cache, Notification, etc.)?\n\u2502  \u2514\u2500 \ud83c\udfaf Create manually - Port + Adapter pattern\n\u2502     Step 1: Create interface in Domain/Port/{Service}Interface.php\n\u2502     Step 2: Create adapter in Infrastructure/Service/{Service}Adapter.php\n\u2502     Step 3: Configure binding in config/services.yaml\n\u2502     Examples: EmailSender, FileStorage, PaymentGateway, CacheService, HttpClient\n\u2502\n\u251c\u2500 1\ufe0f\u20e36\ufe0f\u20e3 Framework Bridge (Filesystem, Mailer wrapper)?\n\u2502  \u2514\u2500 \ud83c\udfaf Create manually - Concrete class (no interface)\n\u2502     Location: Infrastructure/Bridge/{Service}Handler.php\n\u2502     Use: Simplify framework component usage\n\u2502\n\u251c\u2500 1\ufe0f\u20e37\ufe0f\u20e3 Event Subscriber (technical concerns)?\n\u2502  \u2514\u2500 \ud83c\udfaf bin/console make:hexagonal:event-subscriber shared/logging Exception --layer=infrastructure\n\u2502\n\u251c\u2500 1\ufe0f\u20e38\ufe0f\u20e3 Async Message Handler (background jobs, emails, workers)?\n\u2502  \u2514\u2500 \ud83c\udfaf bin/console make:hexagonal:message-handler user/account SendWelcomeEmail [--with-message]\n\u2502     Generates: Infrastructure/Messaging/Handler/{Name}Handler.php\n\u2502     Use for: Async emails, background jobs, queue processing\n\u2502\n\u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\u2502 \ud83e\uddea TESTING (Test Coverage)\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\u2502\n\u251c\u2500 1\ufe0f\u20e39\ufe0f\u20e3 Tests?\n\u2502  \u251c\u2500 UseCase test: bin/console make:hexagonal:use-case-test blog/post CreatePost\n\u2502  \u251c\u2500 Controller test: bin/console make:hexagonal:controller-test blog/post CreatePost /posts/create\n\u2502  \u251c\u2500 CLI test: bin/console make:hexagonal:cli-command-test blog/post CreatePost app:post:create\n\u2502  \u2514\u2500 Test config: bin/console make:hexagonal:test-config\n\u2502\n\u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\u2502 \ud83d\ude80 RAPID DEVELOPMENT (Scaffolding)\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\u2502\n\u2514\u2500 2\ufe0f\u20e30\ufe0f\u20e3 Complete CRUD (all layers)?\n   \u2514\u2500 \ud83c\udfaf bin/console make:hexagonal:crud blog/post Post [--with-tests] [--with-id-vo]\n      Generates 20+ files: Entity + Repository + 5 UseCases + 5 Controllers + Form + Tests\n</code></pre>"},{"location":"WHY-HEXAGONAL/#quick-reference-interface-decision-matrix","title":"\ud83d\udcca Quick Reference: Interface Decision Matrix","text":"What you're creating Need Interface? Why? Domain Entity \ud83c\udf2a\ufe0f NO Concrete business concept Value Object \ud83c\udf2a\ufe0f NO Immutable value Domain Exception \ud83c\udf2a\ufe0f NO Exception class Domain Event \ud83c\udf2a\ufe0f NO Immutable DTO Domain Service (pure logic) \ud83c\udf2a\ufe0f NO No external dependencies Repository \ud83c\udfaf YES Database can be swapped Command/Query Handler \ud83c\udf2a\ufe0f NO Decoupled via Messenger UseCase \ud83c\udf2a\ufe0f NO Concrete orchestrator Input DTO \ud83c\udf2a\ufe0f NO Data structure Controller \ud83c\udf2a\ufe0f NO UI adapter Form \ud83c\udf2a\ufe0f NO UI component CLI Command \ud83c\udf2a\ufe0f NO UI adapter EmailSender \ud83c\udfaf YES Can swap SMTP/SendGrid/etc FileStorage \ud83c\udfaf YES Can swap Local/S3/Cloud PaymentGateway \ud83c\udfaf YES Can swap Stripe/PayPal/etc Cache \ud83c\udfaf YES Can swap Redis/Memcached/etc HTTP Client \ud83c\udfaf YES Can swap implementations Notification \ud83c\udfaf YES Can swap SMS/Push/Email Framework Bridge \ud83c\udf2a\ufe0f NO Internal utility Parser/Serializer \ud83c\udf2a\ufe0f NO (usually) Internal utility"},{"location":"WHY-HEXAGONAL/#golden-rule-for-interfaces","title":"\ud83c\udfaf Golden Rule for Interfaces","text":"<p>Create an interface (Port) if and ONLY if: 1. \ud83c\udfaf It's an external dependency (database, API, file, email, etc.) 2. \ud83c\udfaf You want to swap implementations (MySQL \u2192 MongoDB, Local \u2192 S3) 3. \ud83c\udfaf You want to easily mock in tests (in-memory repository)</p> <p>Otherwise, use a concrete class!</p>"},{"location":"WHY-HEXAGONAL/#common-scenarios","title":"\ud83d\udca1 Common Scenarios","text":"<p>User Registration: <pre><code>bin/console make:hexagonal:entity user/account User --with-repository --with-id-vo\nbin/console make:hexagonal:command user/account register --factory\nbin/console make:hexagonal:controller user/account Register /register --with-workflow\n</code></pre></p> <p>Complete CRUD: <pre><code>bin/console make:hexagonal:crud product/catalog Product --with-tests --with-id-vo\n</code></pre></p> <p>This decision tree covers 100% of scenarios you'll encounter when building with hexagonal architecture! \ud83c\udf89</p>"},{"location":"about/","title":"About","text":"<p>Information about Hexagonal Maker Bundle.</p>"},{"location":"about/#resources","title":"Resources","text":"<ul> <li>Changelog - Version history and changes</li> <li>FAQ - Frequently asked questions</li> <li>License - MIT License</li> </ul>"},{"location":"about/#project-information","title":"Project Information","text":"<p>Author: Ahmed EBEN HASSINE Repository: github.com/ahmed-bhs/hexagonal-maker-bundle Package: packagist.org/packages/ahmed-bhs/hexagonal-maker-bundle</p>"},{"location":"about/#support","title":"Support","text":"<p>If you find this bundle helpful, consider: - Starring the repository on GitHub - Sharing it with others - Contributing improvements - Reporting issues</p> <p>Thank you for using Hexagonal Maker Bundle!</p>"},{"location":"about/changelog/","title":"Changelog","text":"<p>All notable changes to Hexagonal Maker Bundle are documented here.</p>"},{"location":"about/changelog/#unreleased","title":"[Unreleased]","text":""},{"location":"about/changelog/#added","title":"Added","text":"<ul> <li>Complete documentation site with MkDocs Material</li> <li>Comprehensive FAQ</li> <li>Step-by-step tutorials</li> </ul>"},{"location":"about/changelog/#200-2025-01-xx","title":"[2.0.0] - 2025-01-XX","text":""},{"location":"about/changelog/#added_1","title":"Added","text":"<ul> <li>NEW: <code>make:hexagonal:crud</code> - Generate complete CRUD module (30+ files)</li> <li>NEW: <code>make:hexagonal:domain-event</code> - Generate domain events</li> <li>NEW: <code>make:hexagonal:event-subscriber</code> - Generate event subscribers</li> <li>NEW: <code>make:hexagonal:message-handler</code> - Generate async message handlers</li> <li>NEW: <code>make:hexagonal:use-case-test</code> - Generate use case tests</li> <li>NEW: <code>make:hexagonal:controller-test</code> - Generate controller tests</li> <li>NEW: <code>make:hexagonal:cli-command-test</code> - Generate CLI command tests</li> <li>NEW: <code>make:hexagonal:test-config</code> - Generate test configuration</li> <li><code>--with-tests</code> option for all makers</li> <li><code>--with-factory</code> option for command maker</li> <li><code>--with-use-case</code> option for CLI command maker</li> <li><code>--with-workflow</code> option for controller maker</li> <li><code>--with-id-vo</code> option for entity and CRUD makers</li> <li>Symfony 7.x support</li> </ul>"},{"location":"about/changelog/#changed","title":"Changed","text":"<ul> <li>Improved YAML mapping templates</li> <li>Enhanced Doctrine integration guide</li> <li>Better error messages and validation</li> <li>Updated documentation structure</li> </ul>"},{"location":"about/changelog/#fixed","title":"Fixed","text":"<ul> <li>Repository interface namespace resolution</li> <li>YAML mapping indentation</li> <li>Service autowiring configuration</li> </ul>"},{"location":"about/changelog/#100-2024-xx-xx","title":"[1.0.0] - 2024-XX-XX","text":""},{"location":"about/changelog/#added_2","title":"Added","text":"<ul> <li>Initial release</li> <li>11 core maker commands:</li> <li><code>make:hexagonal:entity</code></li> <li><code>make:hexagonal:value-object</code></li> <li><code>make:hexagonal:exception</code></li> <li><code>make:hexagonal:repository</code></li> <li><code>make:hexagonal:command</code></li> <li><code>make:hexagonal:query</code></li> <li><code>make:hexagonal:use-case</code></li> <li><code>make:hexagonal:controller</code></li> <li><code>make:hexagonal:form</code></li> <li><code>make:hexagonal:cli-command</code></li> <li><code>make:hexagonal:input</code></li> <li>YAML mapping for pure domain entities</li> <li>CQRS pattern support</li> <li>Symfony 6.4+ support</li> <li>PHP 8.1+ requirement</li> </ul>"},{"location":"about/changelog/#version-history","title":"Version History","text":"Version Release Date Highlights 2.0.0 2025-01 CRUD maker, Tests, Events 1.0.0 2024-XX Initial release"},{"location":"about/changelog/#upgrade-guides","title":"Upgrade Guides","text":""},{"location":"about/changelog/#upgrading-to-20","title":"Upgrading to 2.0","text":"<p>No breaking changes! All 1.x code continues to work.</p> <p>New features: - Try <code>make:hexagonal:crud</code> for rapid development - Add <code>--with-tests</code> to generate tests automatically - Use domain events with <code>make:hexagonal:domain-event</code></p>"},{"location":"about/changelog/#upgrading-to-10","title":"Upgrading to 1.0","text":"<p>Initial release - no upgrade needed.</p>"},{"location":"about/changelog/#roadmap","title":"Roadmap","text":""},{"location":"about/changelog/#planned-features","title":"Planned Features","text":""},{"location":"about/changelog/#v21-q1-2025","title":"v2.1 (Q1 2025)","text":"<ul> <li> GraphQL adapter generator</li> <li> API Platform integration</li> <li> Custom validation rules generator</li> <li> Specification pattern support</li> </ul>"},{"location":"about/changelog/#v22-q2-2025","title":"v2.2 (Q2 2025)","text":"<ul> <li> Microservices support (gRPC, REST)</li> <li> Event Sourcing generators</li> <li> SAGA pattern support</li> <li> Multi-tenancy templates</li> </ul>"},{"location":"about/changelog/#v30-future","title":"v3.0 (Future)","text":"<ul> <li> Visual module designer</li> <li> AI-powered code suggestions</li> <li> Performance analyzers</li> <li> Architecture validation tools</li> </ul>"},{"location":"about/changelog/#contributing","title":"Contributing","text":"<p>Want to help shape the future? See Contributing Guide.</p>"},{"location":"about/changelog/#release-notes","title":"Release Notes","text":""},{"location":"about/changelog/#how-we-version","title":"How We Version","text":"<p>We follow Semantic Versioning:</p> <ul> <li>MAJOR (X.0.0) - Breaking changes</li> <li>MINOR (x.X.0) - New features (backward compatible)</li> <li>PATCH (x.x.X) - Bug fixes</li> </ul>"},{"location":"about/changelog/#support-policy","title":"Support Policy","text":"Version PHP Symfony Support Status 2.x 8.1+ 6.4+, 7.x \u2705 Active 1.x 8.1+ 6.4+ \u26a0\ufe0f Security only"},{"location":"about/changelog/#changelog-guidelines","title":"Changelog Guidelines","text":"<p>When contributing, please add entries under <code>[Unreleased]</code> section following this format:</p> <pre><code>### Added\n- New feature description\n\n### Changed\n- Changed feature description\n\n### Fixed\n- Bug fix description\n\n### Deprecated\n- Deprecated feature description\n\n### Removed\n- Removed feature description\n</code></pre> <p>Full changelog: GitHub Releases</p>"},{"location":"about/faq/","title":"FAQ - Frequently Asked Questions","text":"<p>Quick answers to common questions about Hexagonal Maker Bundle.</p>"},{"location":"about/faq/#installation-setup","title":"Installation &amp; Setup","text":""},{"location":"about/faq/#how-do-i-install-the-bundle","title":"How do I install the bundle?","text":"<pre><code>composer require ahmed-bhs/hexagonal-maker-bundle --dev\n</code></pre> <p>The bundle auto-registers with Symfony Flex.</p>"},{"location":"about/faq/#what-are-the-requirements","title":"What are the requirements?","text":"<ul> <li>PHP 8.1+</li> <li>Symfony 6.4+ or 7.x</li> <li>Doctrine ORM (for persistence)</li> </ul>"},{"location":"about/faq/#do-i-need-to-configure-anything","title":"Do I need to configure anything?","text":"<p>Yes! You must configure Doctrine YAML mappings for each module. See Installation Guide.</p>"},{"location":"about/faq/#usage","title":"Usage","text":""},{"location":"about/faq/#how-do-i-generate-my-first-module","title":"How do I generate my first module?","text":"<pre><code>bin/console make:hexagonal:entity user/account User\nbin/console make:hexagonal:repository user/account User\nbin/console make:hexagonal:command user/account create\n</code></pre> <p>See Quick Start \u2192</p>"},{"location":"about/faq/#can-i-generate-a-complete-crud-module","title":"Can I generate a complete CRUD module?","text":"<p>Yes! Use the CRUD maker:</p> <pre><code>bin/console make:hexagonal:crud blog/post Post --with-tests\n</code></pre> <p>This generates 30+ files including all layers, use cases, controllers, and tests.</p>"},{"location":"about/faq/#how-many-maker-commands-are-available","title":"How many maker commands are available?","text":"<p>19 specialized makers covering all hexagonal layers:</p> <ul> <li>Domain (Entity, ValueObject, Exception)</li> <li>Application (Command, Query, UseCase)</li> <li>Infrastructure (Repository, MessageHandler)</li> <li>UI (Controller, Form, CLI Command)</li> <li>Tests (UseCase Test, Controller Test)</li> <li>Rapid (CRUD)</li> </ul> <p>See all commands \u2192</p>"},{"location":"about/faq/#architecture","title":"Architecture","text":""},{"location":"about/faq/#why-use-hexagonal-architecture","title":"Why use hexagonal architecture?","text":"<p>Benefits:</p> <ul> <li>Pure Domain - Business logic independent of frameworks</li> <li>Easy Testing - Unit tests run 1000x faster (no database)</li> <li>Technology Freedom - Swap databases/frameworks easily</li> <li>Maintainability - Clear separation of concerns</li> </ul> <p>Read full guide \u2192</p>"},{"location":"about/faq/#whats-the-difference-between-hexagonal-and-clean-architecture","title":"What's the difference between hexagonal and clean architecture?","text":"<p>They're very similar: - Hexagonal (Alistair Cockburn) - Focuses on ports &amp; adapters - Clean (Uncle Bob) - Emphasizes dependency rule</p> <p>Both achieve the same goal: domain independence.</p>"},{"location":"about/faq/#why-yaml-mapping-instead-of-annotations","title":"Why YAML mapping instead of annotations?","text":"<p>Pure domain principle:</p> <p>Annotations pollute domain entities with infrastructure concerns (Doctrine). YAML keeps domain 100% pure PHP.</p> <pre><code>// \u2705 Pure domain - no dependencies\nfinal class User\n{\n    private string $id;\n    private string $email;\n}\n</code></pre> <p>vs</p> <pre><code>// \u274c Domain depends on Doctrine\n#[ORM\\Entity]\nfinal class User\n{\n    #[ORM\\Id]\n    private string $id;\n}\n</code></pre>"},{"location":"about/faq/#cqrs","title":"CQRS","text":""},{"location":"about/faq/#what-is-cqrs","title":"What is CQRS?","text":"<p>**C**ommand **Q**uery **R**esponsibility **S**egregation</p> <ul> <li>Commands - Change state (Create, Update, Delete)</li> <li>Queries - Read data (Find, List)</li> </ul> <p>Benefits: - Clear separation of write/read logic - Easier to optimize queries - Better scalability</p>"},{"location":"about/faq/#when-should-i-use-commands-vs-usecases","title":"When should I use Commands vs UseCases?","text":"<p>Commands (CQRS): - When using Symfony Messenger - For async processing - When you want message-based architecture</p> <p>UseCases: - Simple synchronous operations - Direct service calls - When you don't need messaging</p> <p>Both are valid! Choose based on your needs.</p>"},{"location":"about/faq/#how-do-commands-work-with-messenger","title":"How do Commands work with Messenger?","text":"<p>Commands are dispatched via Symfony Messenger:</p> <pre><code>// 1. Define command (DTO)\nfinal readonly class CreateUserCommand\n{\n    public function __construct(\n        public string $email,\n        public string $password,\n    ) {}\n}\n\n// 2. Handle with #[AsMessageHandler]\n#[AsMessageHandler]\nfinal readonly class CreateUserCommandHandler\n{\n    public function __invoke(CreateUserCommand $command): void\n    {\n        // Business logic here\n    }\n}\n\n// 3. Dispatch from controller\n$this-&gt;messageBus-&gt;dispatch(new CreateUserCommand($email, $password));\n</code></pre>"},{"location":"about/faq/#doctrine-integration","title":"Doctrine Integration","text":""},{"location":"about/faq/#where-do-i-configure-yaml-mappings","title":"Where do I configure YAML mappings?","text":"<p>In <code>config/packages/doctrine.yaml</code>:</p> <pre><code>doctrine:\n    orm:\n        mappings:\n            UserAccount:\n                type: yml\n                dir: '%kernel.project_dir%/src/User/Account/Infrastructure/Persistence/Doctrine/Orm/Mapping'\n                prefix: 'App\\User\\Account\\Domain\\Model'\n</code></pre> <p>Add one mapping per module.</p>"},{"location":"about/faq/#can-i-use-annotations-instead-of-yaml","title":"Can I use annotations instead of YAML?","text":"<p>Technically yes, but not recommended. It breaks the pure domain principle.</p>"},{"location":"about/faq/#how-do-i-handle-value-objects-in-doctrine","title":"How do I handle Value Objects in Doctrine?","text":"<p>Use <code>embedded</code> in YAML mapping:</p> <pre><code># Email.orm.yml\nApp\\Domain\\ValueObject\\Email:\n    type: embeddable\n    fields:\n        value:\n            type: string\n            length: 180\n\n# User.orm.yml\nApp\\Domain\\Model\\User:\n    embedded:\n        email:\n            class: App\\Domain\\ValueObject\\Email\n            columnPrefix: email_\n</code></pre>"},{"location":"about/faq/#can-i-use-gedmo-extensions-timestampable-sluggable","title":"Can I use Gedmo extensions (Timestampable, Sluggable)?","text":"<p>Yes! Configure them in YAML to keep domain pure:</p> <pre><code>fields:\n    createdAt:\n        type: datetime_immutable\n        gedmo:\n            timestampable:\n                on: create\n</code></pre> <p>See Gedmo guide \u2192</p>"},{"location":"about/faq/#testing","title":"Testing","text":""},{"location":"about/faq/#how-do-i-test-use-cases","title":"How do I test use cases?","text":"<p>Generate tests with <code>--with-tests</code>:</p> <pre><code>bin/console make:hexagonal:command blog/post create --with-tests\n</code></pre> <p>Or use the test maker:</p> <pre><code>bin/console make:hexagonal:use-case-test blog/post CreatePost\n</code></pre>"},{"location":"about/faq/#unit-tests-vs-integration-tests","title":"Unit tests vs Integration tests?","text":"<p>Unit Tests: - Test business logic in isolation - Use mocks for dependencies - Run extremely fast (milliseconds)</p> <p>Integration Tests: - Test full stack with real database - Use real Symfony container - Slower but more realistic</p> <p>Both are generated!</p>"},{"location":"about/faq/#how-do-i-run-tests","title":"How do I run tests?","text":"<pre><code># All tests\nvendor/bin/phpunit\n\n# Specific test\nvendor/bin/phpunit tests/Blog/Post/Application/CreatePost/CreatePostTest.php\n\n# With coverage\nXDEBUG_MODE=coverage vendor/bin/phpunit --coverage-html coverage\n</code></pre>"},{"location":"about/faq/#customization","title":"Customization","text":""},{"location":"about/faq/#can-i-customize-generated-templates","title":"Can I customize generated templates?","text":"<p>Yes! Create custom templates in <code>config/skeleton/</code>:</p> <pre><code># config/packages/hexagonal_maker.yaml\nhexagonal_maker:\n    skeleton_dir: '%kernel.project_dir%/config/skeleton'\n</code></pre> <p>See templates guide \u2192</p>"},{"location":"about/faq/#can-i-change-the-root-namespace","title":"Can I change the root namespace?","text":"<p>Yes, in configuration:</p> <pre><code>hexagonal_maker:\n    root_namespace: 'MyApp'\n</code></pre>"},{"location":"about/faq/#can-i-organize-modules-differently","title":"Can I organize modules differently?","text":"<p>Yes! Use the module path parameter:</p> <pre><code># Default: src/Blog/Post/\nbin/console make:hexagonal:entity blog/post Post\n\n# Custom: src/Module/Blog/Post/\nbin/console make:hexagonal:entity module/blog/post Post\n\n# Flat: src/BlogPost/\nbin/console make:hexagonal:entity blog-post Post\n</code></pre>"},{"location":"about/faq/#advanced","title":"Advanced","text":""},{"location":"about/faq/#how-do-i-implement-domain-events","title":"How do I implement Domain Events?","text":"<pre><code># Generate event + subscriber\nbin/console make:hexagonal:domain-event order/payment OrderPlaced --with-subscriber\n</code></pre> <p>Dispatch from entity:</p> <pre><code>class Order\n{\n    private array $events = [];\n\n    public function place(): void\n    {\n        $this-&gt;status = 'placed';\n        $this-&gt;events[] = new OrderPlacedEvent($this-&gt;id);\n    }\n\n    public function pullDomainEvents(): array\n    {\n        $events = $this-&gt;events;\n        $this-&gt;events = [];\n        return $events;\n    }\n}\n</code></pre>"},{"location":"about/faq/#can-i-use-async-processing","title":"Can I use async processing?","text":"<p>Yes! Generate message handlers:</p> <pre><code>bin/console make:hexagonal:message-handler user/account SendWelcomeEmail --with-message\n</code></pre> <p>Configure in <code>messenger.yaml</code>:</p> <pre><code>framework:\n    messenger:\n        routing:\n            'App\\User\\Account\\Application\\Message\\*': async\n</code></pre>"},{"location":"about/faq/#how-do-i-implement-multi-tenancy","title":"How do I implement multi-tenancy?","text":"<p>Use Shared Kernel for tenant-aware repositories:</p> <pre><code>// Shared/Domain/ValueObject/TenantId.php\nfinal readonly class TenantId\n{\n    public function __construct(public string $value) {}\n}\n\n// Each repository filters by tenant\ninterface UserRepositoryInterface\n{\n    public function findByTenant(TenantId $tenantId): array;\n}\n</code></pre>"},{"location":"about/faq/#comparison","title":"Comparison","text":""},{"location":"about/faq/#vs-symfony-maker-bundle","title":"vs Symfony Maker Bundle?","text":"Feature Symfony Maker Hexagonal Maker Architecture Traditional layers Hexagonal/DDD Domain Purity \u274c Coupled to Doctrine \u2705 Pure PHP CQRS \u274c No \u2705 Yes Modular \u274c Single namespace \u2705 Modules/Contexts Testing Basic \u2705 Unit + Integration <p>Use both! Hexagonal Maker extends Symfony Maker.</p>"},{"location":"about/faq/#vs-manual-architecture","title":"vs Manual Architecture?","text":"Aspect Manual Hexagonal Maker Speed Hours per module Minutes Consistency Varies by developer Enforced patterns Best Practices Requires expertise Built-in Learning Curve Steep Guided <p>Hexagonal Maker = Manual quality at automated speed</p>"},{"location":"about/faq/#troubleshooting","title":"Troubleshooting","text":""},{"location":"about/faq/#generated-files-have-wrong-namespace","title":"Generated files have wrong namespace","text":"<p>Solution: Check configuration in <code>hexagonal_maker.yaml</code>:</p> <pre><code>hexagonal_maker:\n    root_namespace: 'App'  # Must match your composer.json\n</code></pre>"},{"location":"about/faq/#doctrine-cant-find-my-entity","title":"Doctrine can't find my entity","text":"<p>Error: <code>Class \"X\" is not a valid entity or mapped super class</code></p> <p>Solution: Add YAML mapping in <code>doctrine.yaml</code> for your module.</p>"},{"location":"about/faq/#repository-autowiring-fails","title":"Repository autowiring fails","text":"<p>Error: <code>Cannot autowire... no such service exists</code></p> <p>Solution: Add interface binding in <code>services.yaml</code>:</p> <pre><code>services:\n    App\\Blog\\Post\\Domain\\Port\\PostRepositoryInterface:\n        class: App\\Blog\\Post\\Infrastructure\\Persistence\\Doctrine\\DoctrinePostRepository\n</code></pre>"},{"location":"about/faq/#tests-cant-find-classes","title":"Tests can't find classes","text":"<p>Solution: Regenerate autoload:</p> <pre><code>composer dump-autoload\n</code></pre>"},{"location":"about/faq/#contributing","title":"Contributing","text":""},{"location":"about/faq/#how-can-i-contribute","title":"How can I contribute?","text":"<p>See Contributing Guide. Ways to help:</p> <ul> <li>Report bugs</li> <li>Request features</li> <li>Submit PRs</li> <li>Improve documentation</li> <li>Share examples</li> </ul>"},{"location":"about/faq/#where-do-i-report-bugs","title":"Where do I report bugs?","text":"<p>GitHub Issues</p>"},{"location":"about/faq/#license","title":"License","text":""},{"location":"about/faq/#can-i-use-it-commercially","title":"Can I use it commercially?","text":"<p>Yes! MIT License - free for commercial use.</p>"},{"location":"about/faq/#can-i-modify-the-generated-code","title":"Can I modify the generated code?","text":"<p>Yes! Generated code is yours. No restrictions.</p> <p>Still have questions? Open a discussion</p>"},{"location":"about/license/","title":"License","text":"<p>Hexagonal Maker Bundle is open-source software licensed under the MIT License.</p>"},{"location":"about/license/#mit-license","title":"MIT License","text":"<p>Copyright \u00a9 2024-2026 Ahmed EBEN HASSINE</p> <p>Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:</p> <p>The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.</p> <p>THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p>"},{"location":"about/license/#what-this-means","title":"What This Means","text":""},{"location":"about/license/#you-can","title":"\u2705 You CAN:","text":"<ul> <li>Use commercially - Use in commercial projects</li> <li>Modify - Change the code as you wish</li> <li>Distribute - Share with others</li> <li>Sublicense - Include in your own projects</li> <li>Private use - Use privately without sharing</li> </ul>"},{"location":"about/license/#you-cannot","title":"\u274c You CANNOT:","text":"<ul> <li>Hold liable - Author is not responsible for any damages</li> <li>Use trademark - Without explicit permission</li> </ul>"},{"location":"about/license/#you-must","title":"\ud83d\udccb You MUST:","text":"<ul> <li>Include license - Include original license and copyright notice</li> <li>Include copyright - Credit the original author</li> </ul>"},{"location":"about/license/#third-party-licenses","title":"Third-Party Licenses","text":"<p>This bundle depends on:</p> <ul> <li>Symfony Components - MIT License</li> <li>Doctrine ORM - MIT License</li> </ul> <p>All dependencies retain their original licenses.</p>"},{"location":"about/license/#contributing","title":"Contributing","text":"<p>By contributing to this project, you agree that your contributions will be licensed under the MIT License.</p> <p>See Contributing Guide for details.</p>"},{"location":"about/license/#questions","title":"Questions?","text":"<p>For licensing questions, contact:</p> <ul> <li>Email: ahmedbhs123@gmail.com</li> <li>GitHub: @ahmed-bhs</li> </ul>"},{"location":"advanced/","title":"Advanced Topics","text":"<p>Deep dive into advanced hexagonal architecture patterns and techniques.</p>"},{"location":"advanced/#topics-covered","title":"Topics Covered","text":"<ul> <li>Architecture patterns and best practices</li> <li>Doctrine configuration and YAML mapping</li> <li>Testing strategies (unit, integration, functional)</li> <li>Event-driven architecture with domain events</li> <li>CQRS implementation patterns</li> <li>Repository patterns and alternatives</li> <li>Value objects and immutability</li> <li>Shared kernel organization</li> </ul>"},{"location":"advanced/#architecture-guides","title":"Architecture Guides","text":"<ul> <li>WHY-HEXAGONAL - Business case and benefits</li> <li>ARCHITECTURE - Complete architecture guide (French)</li> <li>SOLID Principles - SOLID in hexagonal architecture (French)</li> </ul> <p>These guides provide comprehensive explanations of hexagonal architecture concepts, patterns, and best practices.</p>"},{"location":"advanced/doctrine/","title":"Doctrine Integration","text":"<p>Advanced Doctrine integration patterns for hexagonal architecture.</p>"},{"location":"advanced/doctrine/#pure-domain-with-yaml-mapping","title":"Pure Domain with YAML Mapping","text":"<p>Keep domain entities pure (no annotations) using YAML mapping.</p>"},{"location":"advanced/doctrine/#entity-pure-php","title":"Entity (Pure PHP)","text":"<pre><code>&lt;?php\n// src/Blog/Post/Domain/Model/Post.php\n\nnamespace App\\Blog\\Post\\Domain\\Model;\n\nfinal class Post\n{\n    private string $id;\n    private string $title;\n    private \\DateTimeImmutable $createdAt;\n\n    public function __construct(string $id, string $title)\n    {\n        $this-&gt;id = $id;\n        $this-&gt;title = $title;\n        $this-&gt;createdAt = new \\DateTimeImmutable();\n    }\n}\n</code></pre>"},{"location":"advanced/doctrine/#yaml-mapping-infrastructure","title":"YAML Mapping (Infrastructure)","text":"<pre><code># src/Blog/Post/Infrastructure/Persistence/Doctrine/Orm/Mapping/Post.orm.yml\n\nApp\\Blog\\Post\\Domain\\Model\\Post:\n    type: entity\n    table: post\n\n    id:\n        id:\n            type: string\n            length: 36\n\n    fields:\n        title:\n            type: string\n            length: 255\n\n        createdAt:\n            type: datetime_immutable\n            column: created_at\n</code></pre>"},{"location":"advanced/doctrine/#value-objects-as-embeddables","title":"Value Objects as Embeddables","text":"<pre><code># Email.orm.yml\nApp\\Domain\\ValueObject\\Email:\n    type: embeddable\n    fields:\n        value:\n            type: string\n            length: 180\n\n# User.orm.yml\nembedded:\n    email:\n        class: App\\Domain\\ValueObject\\Email\n        columnPrefix: email_\n</code></pre>"},{"location":"advanced/doctrine/#gedmo-extensions","title":"Gedmo Extensions","text":"<p>Use Gedmo with YAML to keep domain pure:</p> <pre><code>fields:\n    createdAt:\n        type: datetime_immutable\n        gedmo:\n            timestampable:\n                on: create\n\n    slug:\n        type: string\n        gedmo:\n            slug:\n                fields: [title]\n</code></pre> <p>For complete Gedmo guide, see README.md.</p>"},{"location":"advanced/shared-kernel/","title":"Shared Kernel","text":"<p>Organize shared code across bounded contexts.</p>"},{"location":"advanced/shared-kernel/#structure","title":"Structure","text":"<pre><code>src/\n\u251c\u2500\u2500 Module/              # Bounded contexts\n\u2502   \u251c\u2500\u2500 User/\n\u2502   \u251c\u2500\u2500 Blog/\n\u2502   \u2514\u2500\u2500 Order/\n\u2514\u2500\u2500 Shared/              # Shared kernel\n    \u251c\u2500\u2500 Domain/\n    \u2502   \u251c\u2500\u2500 ValueObject/\n    \u2502   \u2514\u2500\u2500 Exception/\n    \u2514\u2500\u2500 Infrastructure/\n</code></pre>"},{"location":"advanced/shared-kernel/#shared-value-objects","title":"Shared Value Objects","text":"<pre><code>&lt;?php\n// src/Shared/Domain/ValueObject/Email.php\n\nnamespace App\\Shared\\Domain\\ValueObject;\n\nfinal readonly class Email\n{\n    public function __construct(private string $value)\n    {\n        if (!filter_var($value, FILTER_VALIDATE_EMAIL)) {\n            throw new \\InvalidArgumentException(\"Invalid email\");\n        }\n    }\n\n    public function getValue(): string\n    {\n        return $this-&gt;value;\n    }\n}\n</code></pre> <p>Use in modules:</p> <pre><code>// User module\nuse App\\Shared\\Domain\\ValueObject\\Email;\n\nclass User\n{\n    public function __construct(private Email $email) {}\n}\n\n// Newsletter module\nuse App\\Shared\\Domain\\ValueObject\\Email;\n\nclass Subscriber\n{\n    public function __construct(private Email $email) {}\n}\n</code></pre>"},{"location":"advanced/shared-kernel/#when-to-use-shared","title":"When to Use Shared","text":"<p>Move to Shared if: - Used by 3+ modules - Generic concept (Email, Money, Uuid) - No business logic specific to one context</p> <p>Keep in Module if: - Specific to one context - Contains business rules - Used by 1-2 modules only</p> <p>For detailed guide, see README.md.</p>"},{"location":"advanced/templates/","title":"Custom Templates","text":"<p>Customize code generation templates to match your team's conventions.</p>"},{"location":"advanced/templates/#configuration","title":"Configuration","text":"<pre><code># config/packages/hexagonal_maker.yaml\nhexagonal_maker:\n    skeleton_dir: '%kernel.project_dir%/config/skeleton'\n</code></pre>"},{"location":"advanced/templates/#template-structure","title":"Template Structure","text":"<pre><code>config/skeleton/\n\u2514\u2500\u2500 src/Module/\n    \u251c\u2500\u2500 Domain/\n    \u2502   \u2514\u2500\u2500 Model/\n    \u2502       \u2514\u2500\u2500 Entity.tpl.php\n    \u251c\u2500\u2500 Application/\n    \u2502   \u2514\u2500\u2500 Command/\n    \u2502       \u2514\u2500\u2500 CommandHandler.tpl.php\n    \u2514\u2500\u2500 ...\n</code></pre>"},{"location":"advanced/templates/#example-custom-template","title":"Example Custom Template","text":"<pre><code>&lt;?= \"&lt;?php\\n\" ?&gt;\n\ndeclare(strict_types=1);\n\nnamespace &lt;?= $namespace ?&gt;;\n\n// Your custom headers, comments, etc.\n\nfinal class &lt;?= $class_name ?&gt;\n{\n    // Your custom template logic\n}\n</code></pre>"},{"location":"advanced/templates/#template-variables","title":"Template Variables","text":"<p>Available variables depend on the maker. Common ones:</p> <ul> <li><code>$namespace</code> - Full namespace</li> <li><code>$class_name</code> - Class name</li> <li><code>$module</code> - Module path</li> <li><code>$entity_name</code> - Entity name</li> </ul> <p>See default templates in <code>vendor/ahmed-bhs/hexagonal-maker-bundle/src/Resources/skeleton/</code></p>"},{"location":"contributing/","title":"Contributing","text":"<p>We welcome contributions to Hexagonal Maker Bundle!</p>"},{"location":"contributing/#how-to-contribute","title":"How to Contribute","text":"<ul> <li>Overview - Contribution guidelines</li> <li>Development - Development setup and workflow</li> </ul>"},{"location":"contributing/#ways-to-contribute","title":"Ways to Contribute","text":"<ol> <li>Report Bugs - Open an issue on GitHub</li> <li>Suggest Features - Share your ideas</li> <li>Submit Pull Requests - Fix bugs or add features</li> <li>Improve Documentation - Help make docs better</li> <li>Share Examples - Contribute real-world examples</li> </ol>"},{"location":"contributing/#getting-started","title":"Getting Started","text":"<p>Read the Contributing Overview to get started with contributing to the project.</p> <p>Thank you for helping make Hexagonal Maker Bundle better!</p>"},{"location":"contributing/development/","title":"Development Guide","text":"<p>Guide for developers contributing to Hexagonal Maker Bundle.</p>"},{"location":"contributing/development/#development-environment","title":"Development Environment","text":""},{"location":"contributing/development/#requirements","title":"Requirements","text":"<ul> <li>PHP 8.1+</li> <li>Composer</li> <li>Git</li> </ul>"},{"location":"contributing/development/#setup","title":"Setup","text":"<pre><code># Clone repository\ngit clone https://github.com/ahmed-bhs/hexagonal-maker-bundle\ncd hexagonal-maker-bundle\n\n# Install dependencies\ncomposer install\n</code></pre>"},{"location":"contributing/development/#running-tests","title":"Running Tests","text":"<pre><code># All tests\nvendor/bin/phpunit\n\n# With coverage\nXDEBUG_MODE=coverage vendor/bin/phpunit --coverage-html coverage\n\n# Specific test\nvendor/bin/phpunit tests/Unit/Maker/MakeEntityTest.php\n</code></pre>"},{"location":"contributing/development/#code-quality","title":"Code Quality","text":""},{"location":"contributing/development/#phpstan-static-analysis","title":"PHPStan (Static Analysis)","text":"<pre><code>vendor/bin/phpstan analyze\n\n# Level 8 (strictest)\nvendor/bin/phpstan analyze --level=8\n</code></pre>"},{"location":"contributing/development/#code-style","title":"Code Style","text":"<pre><code># Check PSR-12 compliance\nvendor/bin/php-cs-fixer fix --dry-run\n\n# Fix automatically\nvendor/bin/php-cs-fixer fix\n</code></pre>"},{"location":"contributing/development/#project-structure","title":"Project Structure","text":"<pre><code>src/\n\u251c\u2500\u2500 Maker/               # Maker command classes\n\u2502   \u251c\u2500\u2500 MakeEntity.php\n\u2502   \u251c\u2500\u2500 MakeCommand.php\n\u2502   \u2514\u2500\u2500 ...\n\u251c\u2500\u2500 Generator/           # Code generators\n\u251c\u2500\u2500 Template/            # File templates\n\u2514\u2500\u2500 HexagonalMakerBundle.php\n</code></pre>"},{"location":"contributing/development/#creating-a-new-maker","title":"Creating a New Maker","text":"<p>See full guide in repository documentation.</p>"},{"location":"contributing/development/#submitting-changes","title":"Submitting Changes","text":"<ol> <li>Create feature branch</li> <li>Make changes</li> <li>Add tests</li> <li>Run quality checks</li> <li>Submit PR</li> </ol> <p>For detailed instructions, see the main Contributing Guide.</p>"},{"location":"contributing/overview/","title":"Contributing","text":"<p>Thank you for considering contributing to Hexagonal Maker Bundle!</p>"},{"location":"contributing/overview/#ways-to-contribute","title":"Ways to Contribute","text":""},{"location":"contributing/overview/#report-bugs","title":"\ud83d\udc1b Report Bugs","text":"<p>Found a bug? Open an issue with: - Clear title and description - Steps to reproduce - Expected vs actual behavior - Symfony/PHP versions</p>"},{"location":"contributing/overview/#request-features","title":"\u2728 Request Features","text":"<p>Have an idea? Open a feature request describing: - The problem it solves - Proposed solution - Use cases</p>"},{"location":"contributing/overview/#improve-documentation","title":"\ud83d\udcdd Improve Documentation","text":"<p>Documentation PRs are always welcome: - Fix typos - Add examples - Clarify explanations - Translate to other languages</p>"},{"location":"contributing/overview/#submit-code","title":"\ud83d\udcbb Submit Code","text":"<ol> <li>Fork the repository</li> <li>Create a feature branch (<code>git checkout -b feature/amazing-feature</code>)</li> <li>Make your changes</li> <li>Add tests</li> <li>Commit (<code>git commit -m 'Add amazing feature'</code>)</li> <li>Push (<code>git push origin feature/amazing-feature</code>)</li> <li>Open a Pull Request</li> </ol>"},{"location":"contributing/overview/#development-setup","title":"Development Setup","text":"<pre><code># Clone your fork\ngit clone https://github.com/YOUR-USERNAME/hexagonal-maker-bundle\ncd hexagonal-maker-bundle\n\n# Install dependencies\ncomposer install\n\n# Run tests\nvendor/bin/phpunit\n\n# Run static analysis\nvendor/bin/phpstan analyze\n</code></pre>"},{"location":"contributing/overview/#code-standards","title":"Code Standards","text":"<ul> <li>PSR-12 code style</li> <li>PHPStan Level 8 (strict)</li> <li>Type hints everywhere</li> <li>Readonly classes when possible</li> <li>Comprehensive tests</li> </ul>"},{"location":"contributing/overview/#pull-request-guidelines","title":"Pull Request Guidelines","text":"<ul> <li>Keep PRs focused on single feature/fix</li> <li>Update documentation if needed</li> <li>Add tests for new features</li> <li>Ensure CI passes</li> <li>Follow existing code patterns</li> </ul>"},{"location":"contributing/overview/#license","title":"License","text":"<p>By contributing, you agree that your contributions will be licensed under the MIT License.</p>"},{"location":"contributing/overview/#questions","title":"Questions?","text":"<ul> <li>GitHub Discussions: Ask here</li> <li>Email: ahmedbhs123@gmail.com</li> </ul>"},{"location":"examples/","title":"Examples","text":"<p>Real-world examples and use cases for Hexagonal Maker Bundle.</p>"},{"location":"examples/#available-examples","title":"Available Examples","text":"<ul> <li>User Registration - Complete user module with authentication</li> <li>CRUD Module - Build a complete CRUD in one command</li> <li>Testing Guide - Testing strategies and examples</li> </ul>"},{"location":"examples/#what-youll-find","title":"What You'll Find","text":"<p>Each example includes: - Step-by-step instructions - Complete code samples - Architecture explanations - Best practices - Testing strategies</p> <p>Start with the User Registration example to see a complete module from scratch.</p>"},{"location":"examples/crud-module/","title":"Example: CRUD Module","text":"<p>Generate complete CRUD module with one command.</p>"},{"location":"examples/crud-module/#quick-crud-generation","title":"Quick CRUD Generation","text":"<pre><code>bin/console make:hexagonal:crud blog/post Post --with-tests --with-id-vo --route-prefix=/posts\n</code></pre> <p>This generates 30+ files:</p> <ul> <li>Entity + Repository + ID ValueObject</li> <li>5 Use Cases (Create, Update, Delete, Get, List)</li> <li>5 Controllers + Form</li> <li>All tests</li> </ul>"},{"location":"examples/crud-module/#generated-routes","title":"Generated Routes","text":"<ul> <li><code>GET /posts</code> - List all posts</li> <li><code>GET /posts/{id}</code> - Show single post</li> <li><code>GET /posts/new</code> - Create form</li> <li><code>POST /posts/new</code> - Submit new post</li> <li><code>GET /posts/{id}/edit</code> - Edit form</li> <li><code>POST /posts/{id}/edit</code> - Submit update</li> <li><code>DELETE /posts/{id}/delete</code> - Delete post</li> </ul>"},{"location":"examples/crud-module/#next-steps","title":"Next Steps","text":"<ol> <li>Complete Doctrine mapping</li> <li>Configure module in <code>doctrine.yaml</code></li> <li>Generate migrations</li> <li>Test your CRUD!</li> </ol> <p>See Quick Start for full tutorial.</p>"},{"location":"examples/testing/","title":"Testing Examples","text":"<p>Examples of testing hexagonal architecture with generated tests.</p>"},{"location":"examples/testing/#generate-tests","title":"Generate Tests","text":"<pre><code># With command\nbin/console make:hexagonal:command blog/post create --with-tests\n\n# Standalone\nbin/console make:hexagonal:use-case-test blog/post CreatePost\nbin/console make:hexagonal:controller-test blog/post CreatePost /posts/new\n</code></pre>"},{"location":"examples/testing/#unit-test-example","title":"Unit Test Example","text":"<pre><code>&lt;?php\n\nnamespace Tests\\Blog\\Post\\Application\\Create;\n\nuse PHPUnit\\Framework\\TestCase;\n\nfinal class CreatePostHandlerTest extends TestCase\n{\n    public function testCreatesPost(): void\n    {\n        $repository = $this-&gt;createMock(PostRepositoryInterface::class);\n        $repository-&gt;expects($this-&gt;once())-&gt;method('save');\n\n        $handler = new CreatePostHandler($repository);\n        $command = new CreatePostCommand('Title', 'Content');\n\n        $handler($command);\n    }\n}\n</code></pre>"},{"location":"examples/testing/#integration-test-example","title":"Integration Test Example","text":"<pre><code>&lt;?php\n\nnamespace Tests\\Blog\\Post\\Application\\Create;\n\nuse Symfony\\Bundle\\FrameworkBundle\\Test\\KernelTestCase;\n\nfinal class CreatePostIntegrationTest extends KernelTestCase\n{\n    public function testCreatesPostInDatabase(): void\n    {\n        self::bootKernel();\n\n        $commandBus = static::getContainer()-&gt;get(MessageBusInterface::class);\n        $command = new CreatePostCommand('Title', 'Content');\n\n        $commandBus-&gt;dispatch($command);\n\n        $repository = static::getContainer()-&gt;get(PostRepositoryInterface::class);\n        $posts = $repository-&gt;findAll();\n\n        $this-&gt;assertCount(1, $posts);\n    }\n}\n</code></pre>"},{"location":"examples/testing/#run-tests","title":"Run Tests","text":"<pre><code>vendor/bin/phpunit\n</code></pre> <p>See generated test files for complete examples.</p>"},{"location":"examples/user-registration/","title":"Example: User Registration Module","text":"<p>Complete example of building a User Registration module with hexagonal architecture.</p>"},{"location":"examples/user-registration/#overview","title":"Overview","text":"<p>We'll build a user registration system with: - Email validation - Password hashing - Duplicate email prevention - Email confirmation workflow</p>"},{"location":"examples/user-registration/#step-1-generate-structure","title":"Step 1: Generate Structure","text":"<pre><code># Domain\nbin/console make:hexagonal:entity user/account User --with-repository --with-id-vo\nbin/console make:hexagonal:value-object user/account Email\nbin/console make:hexagonal:exception user/account InvalidEmailException\nbin/console make:hexagonal:exception user/account UserAlreadyExistsException\n\n# Application\nbin/console make:hexagonal:command user/account register --factory --with-tests\nbin/console make:hexagonal:query user/account find-by-email\n\n# UI\nbin/console make:hexagonal:controller user/account RegisterUser /users/register --with-workflow\n</code></pre>"},{"location":"examples/user-registration/#step-2-complete-implementation","title":"Step 2: Complete Implementation","text":"<p>See full implementation in the Quick Start Guide.</p>"},{"location":"examples/user-registration/#complete-example","title":"Complete Example","text":"<p>For a fully working example with all code, see the repository examples directory.</p>"},{"location":"getting-started/","title":"Getting Started","text":"<p>Learn how to install and use Hexagonal Maker Bundle in your Symfony projects.</p>"},{"location":"getting-started/#quick-links","title":"Quick Links","text":"<ul> <li>Installation - Install and configure the bundle</li> <li>Quick Start - Generate your first module in 2 minutes</li> <li>First Module - Complete walkthrough of building a module</li> </ul>"},{"location":"getting-started/#what-youll-learn","title":"What You'll Learn","text":"<p>In this section, you'll learn:</p> <ol> <li>How to install the bundle via Composer</li> <li>How to configure Doctrine for hexagonal architecture</li> <li>How to generate your first complete module</li> <li>How to understand the generated file structure</li> </ol>"},{"location":"getting-started/#prerequisites","title":"Prerequisites","text":"<p>Before starting, make sure you have:</p> <ul> <li>PHP 8.1 or higher</li> <li>Symfony 6.4+ or 7.x</li> <li>Basic understanding of Symfony</li> <li>Composer installed</li> </ul> <p>Let's get started!</p>"},{"location":"getting-started/first-module/","title":"First Module Tutorial","text":"<p>Complete step-by-step guide to build your first hexagonal module from scratch.</p>"},{"location":"getting-started/first-module/#what-well-build","title":"What We'll Build","text":"<p>A Blog Post module with: - CRUD operations (Create, Read, Update, Delete, List) - Pure domain entities - CQRS commands and queries - Web controllers and forms - Complete tests</p> <p>Time: 15-20 minutes</p>"},{"location":"getting-started/first-module/#prerequisites","title":"Prerequisites","text":"<ul> <li>Hexagonal Maker Bundle installed</li> <li>Doctrine configured with YAML mappings</li> <li>Database created</li> </ul> <p>See installation guide \u2192</p>"},{"location":"getting-started/first-module/#step-1-plan-the-module","title":"Step 1: Plan the Module","text":""},{"location":"getting-started/first-module/#module-structure","title":"Module Structure","text":"<pre><code>src/Blog/Post/\n\u251c\u2500\u2500 Domain/              # Business logic\n\u251c\u2500\u2500 Application/         # Use cases\n\u251c\u2500\u2500 Infrastructure/      # Technical implementations\n\u2514\u2500\u2500 UI/                  # Controllers and forms\n</code></pre>"},{"location":"getting-started/first-module/#bounded-context","title":"Bounded Context","text":"<ul> <li>Context: Blog</li> <li>Module: Post</li> <li>Aggregate Root: Post entity</li> </ul>"},{"location":"getting-started/first-module/#step-2-generate-domain-layer","title":"Step 2: Generate Domain Layer","text":""},{"location":"getting-started/first-module/#21-create-post-entity","title":"2.1 Create Post Entity","text":"<pre><code>bin/console make:hexagonal:entity blog/post Post\n</code></pre> <p>Generated: <pre><code>src/Blog/Post/Domain/Model/Post.php\nsrc/Blog/Post/Infrastructure/Persistence/Doctrine/Orm/Mapping/Post.orm.yml\n</code></pre></p> <p>Edit the entity:</p> <pre><code>&lt;?php\n// src/Blog/Post/Domain/Model/Post.php\n\ndeclare(strict_types=1);\n\nnamespace App\\Blog\\Post\\Domain\\Model;\n\nfinal class Post\n{\n    private string $id;\n    private string $title;\n    private string $content;\n    private string $status;  // draft, published\n    private \\DateTimeImmutable $createdAt;\n    private ?\\DateTimeImmutable $publishedAt;\n\n    public function __construct(\n        string $id,\n        string $title,\n        string $content\n    ) {\n        $this-&gt;id = $id;\n        $this-&gt;title = $title;\n        $this-&gt;content = $content;\n        $this-&gt;status = 'draft';\n        $this-&gt;createdAt = new \\DateTimeImmutable();\n        $this-&gt;publishedAt = null;\n    }\n\n    // Business method\n    public function publish(): void\n    {\n        if ($this-&gt;status === 'published') {\n            throw new \\DomainException('Post is already published');\n        }\n\n        $this-&gt;status = 'published';\n        $this-&gt;publishedAt = new \\DateTimeImmutable();\n    }\n\n    public function update(string $title, string $content): void\n    {\n        $this-&gt;title = $title;\n        $this-&gt;content = $content;\n    }\n\n    // Getters\n    public function getId(): string { return $this-&gt;id; }\n    public function getTitle(): string { return $this-&gt;title; }\n    public function getContent(): string { return $this-&gt;content; }\n    public function getStatus(): string { return $this-&gt;status; }\n    public function isPublished(): bool { return $this-&gt;status === 'published'; }\n}\n</code></pre>"},{"location":"getting-started/first-module/#22-complete-doctrine-mapping","title":"2.2 Complete Doctrine Mapping","text":"<pre><code># src/Blog/Post/Infrastructure/Persistence/Doctrine/Orm/Mapping/Post.orm.yml\n\nApp\\Blog\\Post\\Domain\\Model\\Post:\n    type: entity\n    repositoryClass: App\\Blog\\Post\\Infrastructure\\Persistence\\Doctrine\\DoctrinePostRepository\n    table: post\n\n    id:\n        id:\n            type: string\n            length: 36\n\n    fields:\n        title:\n            type: string\n            length: 255\n\n        content:\n            type: text\n\n        status:\n            type: string\n            length: 20\n            options:\n                default: 'draft'\n\n        createdAt:\n            type: datetime_immutable\n            column: created_at\n\n        publishedAt:\n            type: datetime_immutable\n            column: published_at\n            nullable: true\n</code></pre>"},{"location":"getting-started/first-module/#23-add-doctrine-mapping-configuration","title":"2.3 Add Doctrine Mapping Configuration","text":"<p>Edit <code>config/packages/doctrine.yaml</code>:</p> <pre><code>doctrine:\n    orm:\n        mappings:\n            BlogPost:\n                is_bundle: false\n                type: yml\n                dir: '%kernel.project_dir%/src/Blog/Post/Infrastructure/Persistence/Doctrine/Orm/Mapping'\n                prefix: 'App\\Blog\\Post\\Domain\\Model'\n                alias: BlogPost\n</code></pre>"},{"location":"getting-started/first-module/#step-3-generate-repository","title":"Step 3: Generate Repository","text":"<pre><code>bin/console make:hexagonal:repository blog/post Post\n</code></pre> <p>Generated: - <code>Domain/Port/PostRepositoryInterface.php</code> (Interface) - <code>Infrastructure/Persistence/Doctrine/DoctrinePostRepository.php</code> (Implementation)</p> <p>Complete the repository interface:</p> <pre><code>&lt;?php\n// src/Blog/Post/Domain/Port/PostRepositoryInterface.php\n\nnamespace App\\Blog\\Post\\Domain\\Port;\n\nuse App\\Blog\\Post\\Domain\\Model\\Post;\n\ninterface PostRepositoryInterface\n{\n    public function save(Post $post): void;\n    public function findById(string $id): ?Post;\n    public function findAll(): array;\n    public function delete(Post $post): void;\n}\n</code></pre> <p>Implement repository methods:</p> <pre><code>&lt;?php\n// src/Blog/Post/Infrastructure/Persistence/Doctrine/DoctrinePostRepository.php\n\nnamespace App\\Blog\\Post\\Infrastructure\\Persistence\\Doctrine;\n\nuse App\\Blog\\Post\\Domain\\Model\\Post;\nuse App\\Blog\\Post\\Domain\\Port\\PostRepositoryInterface;\nuse Doctrine\\ORM\\EntityManagerInterface;\n\nfinal readonly class DoctrinePostRepository implements PostRepositoryInterface\n{\n    public function __construct(\n        private EntityManagerInterface $entityManager\n    ) {\n    }\n\n    public function save(Post $post): void\n    {\n        $this-&gt;entityManager-&gt;persist($post);\n        $this-&gt;entityManager-&gt;flush();\n    }\n\n    public function findById(string $id): ?Post\n    {\n        return $this-&gt;entityManager-&gt;find(Post::class, $id);\n    }\n\n    public function findAll(): array\n    {\n        return $this-&gt;entityManager\n            -&gt;getRepository(Post::class)\n            -&gt;findAll();\n    }\n\n    public function delete(Post $post): void\n    {\n        $this-&gt;entityManager-&gt;remove($post);\n        $this-&gt;entityManager-&gt;flush();\n    }\n}\n</code></pre>"},{"location":"getting-started/first-module/#step-4-generate-use-cases-cqrs","title":"Step 4: Generate Use Cases (CQRS)","text":""},{"location":"getting-started/first-module/#41-create-post-command","title":"4.1 Create Post Command","text":"<pre><code>bin/console make:hexagonal:command blog/post create --factory\n</code></pre> <p>Complete the command and handler logic following the CQRS pattern.</p>"},{"location":"getting-started/first-module/#42-update-post-command","title":"4.2 Update Post Command","text":"<pre><code>bin/console make:hexagonal:command blog/post update\n</code></pre>"},{"location":"getting-started/first-module/#43-delete-post-command","title":"4.3 Delete Post Command","text":"<pre><code>bin/console make:hexagonal:command blog/post delete\n</code></pre>"},{"location":"getting-started/first-module/#44-find-post-query","title":"4.4 Find Post Query","text":"<pre><code>bin/console make:hexagonal:query blog/post find-by-id\n</code></pre>"},{"location":"getting-started/first-module/#45-list-posts-query","title":"4.5 List Posts Query","text":"<pre><code>bin/console make:hexagonal:query blog/post list-all\n</code></pre>"},{"location":"getting-started/first-module/#step-5-generate-ui-layer","title":"Step 5: Generate UI Layer","text":""},{"location":"getting-started/first-module/#51-controllers","title":"5.1 Controllers","text":"<pre><code># Create post\nbin/console make:hexagonal:controller blog/post CreatePost /posts/new\n\n# Edit post\nbin/console make:hexagonal:controller blog/post EditPost /posts/{id}/edit\n\n# Show post\nbin/console make:hexagonal:controller blog/post ShowPost /posts/{id}\n\n# List posts\nbin/console make:hexagonal:controller blog/post ListPosts /posts\n\n# Delete post\nbin/console make:hexagonal:controller blog/post DeletePost /posts/{id}/delete\n</code></pre>"},{"location":"getting-started/first-module/#52-forms","title":"5.2 Forms","text":"<pre><code>bin/console make:hexagonal:form blog/post Post\n</code></pre>"},{"location":"getting-started/first-module/#step-6-create-database-schema","title":"Step 6: Create Database Schema","text":"<pre><code># Validate mapping\nbin/console doctrine:schema:validate\n\n# Generate migration\nbin/console doctrine:migrations:diff\n\n# Execute migration\nbin/console doctrine:migrations:migrate\n</code></pre>"},{"location":"getting-started/first-module/#step-7-test-your-module","title":"Step 7: Test Your Module","text":""},{"location":"getting-started/first-module/#manual-testing-via-cli","title":"Manual Testing via CLI","text":"<p>Create a test CLI command:</p> <pre><code>bin/console make:hexagonal:cli-command blog/post CreatePost app:post:create\n</code></pre> <p>Run:</p> <pre><code>bin/console app:post:create --title=\"My First Post\" --content=\"Hello World\"\n</code></pre>"},{"location":"getting-started/first-module/#alternative-use-crud-maker","title":"Alternative: Use CRUD Maker \u26a1","text":"<p>Instead of steps 4-5, generate everything at once:</p> <pre><code>bin/console make:hexagonal:crud blog/post Post --with-tests\n</code></pre> <p>This generates: - Entity + Repository - 5 Use Cases (Create, Update, Delete, Get, List) - 5 Controllers + Form - All tests</p>"},{"location":"getting-started/first-module/#next-steps","title":"Next Steps","text":"<p>Congratulations! You've built a complete hexagonal module. Now:</p> <ol> <li>Add tests - Unit and integration tests</li> <li>Add validation - Input DTOs with constraints</li> <li>Add domain events - Event-driven architecture</li> <li>Explore all makers - Learn advanced features</li> </ol>"},{"location":"getting-started/first-module/#common-patterns","title":"Common Patterns","text":""},{"location":"getting-started/first-module/#validation","title":"Validation","text":"<p>Use Input DTOs with Symfony Validator:</p> <pre><code>bin/console make:hexagonal:input blog/post CreatePostInput\n</code></pre> <pre><code>&lt;?php\n\nnamespace App\\Blog\\Post\\Application\\Input;\n\nuse Symfony\\Component\\Validator\\Constraints as Assert;\n\nfinal readonly class CreatePostInput\n{\n    public function __construct(\n        #[Assert\\NotBlank]\n        #[Assert\\Length(min: 3, max: 255)]\n        public string $title,\n\n        #[Assert\\NotBlank]\n        #[Assert\\Length(min: 10)]\n        public string $content,\n    ) {\n    }\n}\n</code></pre>"},{"location":"getting-started/first-module/#domain-events","title":"Domain Events","text":"<p>Generate domain event:</p> <pre><code>bin/console make:hexagonal:domain-event blog/post PostPublished --with-subscriber\n</code></pre> <p>Dispatch from entity:</p> <pre><code>public function publish(): void\n{\n    $this-&gt;status = 'published';\n    $this-&gt;publishedAt = new \\DateTimeImmutable();\n\n    // Dispatch event\n    $this-&gt;recordEvent(new PostPublishedEvent($this-&gt;id, $this-&gt;title));\n}\n</code></pre>"},{"location":"getting-started/first-module/#async-processing","title":"Async Processing","text":"<p>Generate message handler for async tasks:</p> <pre><code>bin/console make:hexagonal:message-handler blog/post SendNotification\n</code></pre> <p>Configure routing in <code>messenger.yaml</code>:</p> <pre><code>framework:\n    messenger:\n        routing:\n            'App\\Blog\\Post\\Application\\Message\\SendNotificationMessage': async\n</code></pre>"},{"location":"getting-started/first-module/#troubleshooting","title":"Troubleshooting","text":"<p>See Installation Guide - Troubleshooting</p>"},{"location":"getting-started/installation/","title":"Installation","text":"<p>Complete installation and configuration guide for Hexagonal Maker Bundle.</p>"},{"location":"getting-started/installation/#requirements","title":"Requirements","text":"<ul> <li>PHP: 8.1 or higher</li> <li>Symfony: 6.4+ or 7.x</li> <li>Composer: Latest version</li> </ul>"},{"location":"getting-started/installation/#step-1-install-via-composer","title":"Step 1: Install via Composer","text":"<pre><code>composer require ahmed-bhs/hexagonal-maker-bundle --dev\n</code></pre> <p>The <code>--dev</code> flag ensures the bundle is only installed in development environment.</p>"},{"location":"getting-started/installation/#step-2-enable-the-bundle","title":"Step 2: Enable the Bundle","text":""},{"location":"getting-started/installation/#with-symfony-flex-automatic","title":"With Symfony Flex (Automatic)","text":"<p>If you're using Symfony Flex, the bundle is auto-registered. Skip to Step 3.</p>"},{"location":"getting-started/installation/#without-symfony-flex-manual","title":"Without Symfony Flex (Manual)","text":"<p>Add the bundle to <code>config/bundles.php</code>:</p> <pre><code>&lt;?php\n\nreturn [\n    // ... other bundles ...\n    AhmedBhs\\HexagonalMakerBundle\\HexagonalMakerBundle::class =&gt; ['dev' =&gt; true],\n];\n</code></pre>"},{"location":"getting-started/installation/#step-3-configure-doctrine-required","title":"Step 3: Configure Doctrine (Required)","text":"<p>Hexagonal Maker Bundle uses YAML mapping to keep domain entities pure (no annotations).</p>"},{"location":"getting-started/installation/#31-create-doctrine-configuration","title":"3.1 Create Doctrine Configuration","text":"<p>Edit <code>config/packages/doctrine.yaml</code>:</p> <pre><code>doctrine:\n    dbal:\n        url: '%env(resolve:DATABASE_URL)%'\n        # Use utf8mb4 for full Unicode support\n        charset: utf8mb4\n        default_table_options:\n            charset: utf8mb4\n            collate: utf8mb4_unicode_ci\n\n    orm:\n        auto_generate_proxy_classes: true\n        naming_strategy: doctrine.orm.naming_strategy.underscore_number_aware\n        auto_mapping: true\n\n        # IMPORTANT: Add YAML mappings for each module\n        mappings: {}\n            # Example mappings will be added per module\n            # See section 3.2 below\n</code></pre>"},{"location":"getting-started/installation/#32-add-module-mappings","title":"3.2 Add Module Mappings","text":"<p>Each time you create a new module (e.g., <code>User/Account</code>), add its mapping:</p> <pre><code>doctrine:\n    orm:\n        mappings:\n            # User Account Module\n            UserAccount:\n                is_bundle: false\n                type: yml\n                dir: '%kernel.project_dir%/src/User/Account/Infrastructure/Persistence/Doctrine/Orm/Mapping'\n                prefix: 'App\\User\\Account\\Domain\\Model'\n                alias: UserAccount\n\n            # Blog Post Module (example)\n            BlogPost:\n                is_bundle: false\n                type: yml\n                dir: '%kernel.project_dir%/src/Blog/Post/Infrastructure/Persistence/Doctrine/Orm/Mapping'\n                prefix: 'App\\Blog\\Post\\Domain\\Model'\n                alias: BlogPost\n\n            # Add more modules as needed...\n</code></pre> <p>Pattern: - <code>dir</code>: Path to YAML mapping files (Infrastructure layer) - <code>prefix</code>: Namespace of domain entities (Domain layer) - <code>alias</code>: Short alias for DQL queries</p>"},{"location":"getting-started/installation/#step-4-configure-symfony-messenger-optional","title":"Step 4: Configure Symfony Messenger (Optional)","text":"<p>For CQRS commands and queries, configure Symfony Messenger.</p> <p>Edit <code>config/packages/messenger.yaml</code>:</p> <pre><code>framework:\n    messenger:\n        default_bus: command.bus\n\n        buses:\n            command.bus:\n                middleware:\n                    - validation\n                    - doctrine_transaction\n\n            query.bus:\n                middleware:\n                    - validation\n\n            event.bus:\n                default_middleware: allow_no_handlers\n                middleware:\n                    - validation\n\n        transports:\n            async: '%env(MESSENGER_TRANSPORT_DSN)%'\n\n        routing:\n            # Route commands to command.bus\n            'App\\*\\Application\\*\\*Command': command.bus\n\n            # Route queries to query.bus\n            'App\\*\\Application\\*\\*Query': query.bus\n\n            # Route async messages to async transport\n            'App\\*\\Infrastructure\\Messaging\\*': async\n</code></pre>"},{"location":"getting-started/installation/#configure-transport-optional-for-async","title":"Configure Transport (Optional - for async)","text":"<p>In <code>.env</code>:</p> <pre><code>###&gt; symfony/messenger ###\n# For async processing (optional)\nMESSENGER_TRANSPORT_DSN=doctrine://default?auto_setup=false\n# Or use RabbitMQ, Redis, etc.\n# MESSENGER_TRANSPORT_DSN=amqp://guest:guest@localhost:5672/%2f/messages\n###&lt; symfony/messenger ###\n</code></pre>"},{"location":"getting-started/installation/#step-5-configure-bundle-optional","title":"Step 5: Configure Bundle (Optional)","text":"<p>Create <code>config/packages/hexagonal_maker.yaml</code> to customize skeleton templates:</p> <pre><code>hexagonal_maker:\n    # Directory where custom skeleton templates are stored\n    skeleton_dir: '%kernel.project_dir%/config/skeleton'\n\n    # Root source directory (default: 'src')\n    root_dir: 'src'\n\n    # Root namespace (default: 'App')\n    root_namespace: 'App'\n</code></pre>"},{"location":"getting-started/installation/#step-6-verify-installation","title":"Step 6: Verify Installation","text":"<p>Check that maker commands are available:</p> <pre><code>bin/console list make:hexagonal\n</code></pre> <p>Expected output:</p> <pre><code>make:hexagonal:cli-command         Generate a CLI command\nmake:hexagonal:command             Generate a CQRS command\nmake:hexagonal:controller          Generate a web controller\nmake:hexagonal:controller-test     Generate a controller test\nmake:hexagonal:crud                Generate complete CRUD module\nmake:hexagonal:domain-event        Generate a domain event\nmake:hexagonal:entity              Generate a domain entity\nmake:hexagonal:event-subscriber    Generate an event subscriber\nmake:hexagonal:exception           Generate a domain exception\nmake:hexagonal:form                Generate a Symfony form\nmake:hexagonal:input               Generate an input DTO\nmake:hexagonal:message-handler     Generate a message handler\nmake:hexagonal:query               Generate a CQRS query\nmake:hexagonal:repository          Generate a repository\nmake:hexagonal:test-config         Generate test configuration\nmake:hexagonal:use-case            Generate a use case\nmake:hexagonal:use-case-test       Generate a use case test\nmake:hexagonal:value-object        Generate a value object\n</code></pre>"},{"location":"getting-started/installation/#directory-structure","title":"Directory Structure","text":"<p>After installation, your project will generate code in this structure:</p> <pre><code>src/\n\u251c\u2500\u2500 Module/              # Recommended: organize by bounded context\n\u2502   \u251c\u2500\u2500 User/\n\u2502   \u2502   \u2514\u2500\u2500 Account/     # Sub-domain module\n\u2502   \u2502       \u251c\u2500\u2500 Domain/\n\u2502   \u2502       \u2502   \u251c\u2500\u2500 Model/\n\u2502   \u2502       \u2502   \u251c\u2500\u2500 ValueObject/\n\u2502   \u2502       \u2502   \u251c\u2500\u2500 Exception/\n\u2502   \u2502       \u2502   \u2514\u2500\u2500 Port/\n\u2502   \u2502       \u251c\u2500\u2500 Application/\n\u2502   \u2502       \u2502   \u251c\u2500\u2500 Command/\n\u2502   \u2502       \u2502   \u251c\u2500\u2500 Query/\n\u2502   \u2502       \u2502   \u2514\u2500\u2500 UseCase/\n\u2502   \u2502       \u251c\u2500\u2500 Infrastructure/\n\u2502   \u2502       \u2502   \u2514\u2500\u2500 Persistence/\n\u2502   \u2502       \u2502       \u2514\u2500\u2500 Doctrine/\n\u2502   \u2502       \u2502           \u251c\u2500\u2500 DoctrineUserRepository.php\n\u2502   \u2502       \u2502           \u2514\u2500\u2500 Orm/Mapping/\n\u2502   \u2502       \u2502               \u2514\u2500\u2500 User.orm.yml\n\u2502   \u2502       \u2514\u2500\u2500 UI/\n\u2502   \u2502           \u251c\u2500\u2500 Http/Web/\n\u2502   \u2502           \u2502   \u251c\u2500\u2500 Controller/\n\u2502   \u2502           \u2502   \u2514\u2500\u2500 Form/\n\u2502   \u2502           \u2514\u2500\u2500 Cli/\n\u2502   \u2514\u2500\u2500 Blog/\n\u2502       \u2514\u2500\u2500 Post/        # Another module\n\u2514\u2500\u2500 Shared/              # Shared kernel (optional)\n    \u251c\u2500\u2500 Domain/\n    \u251c\u2500\u2500 Application/\n    \u2514\u2500\u2500 Infrastructure/\n</code></pre> <p>Or simpler flat structure:</p> <pre><code>src/\n\u251c\u2500\u2500 User/Account/        # Module without \"Module/\" prefix\n\u251c\u2500\u2500 Blog/Post/\n\u2514\u2500\u2500 Shared/\n</code></pre>"},{"location":"getting-started/installation/#configuration-files-summary","title":"Configuration Files Summary","text":""},{"location":"getting-started/installation/#essential-files","title":"Essential Files","text":"<pre><code>config/\n\u251c\u2500\u2500 packages/\n\u2502   \u251c\u2500\u2500 doctrine.yaml              \u2190 REQUIRED: Add YAML mappings\n\u2502   \u251c\u2500\u2500 messenger.yaml             \u2190 Optional: CQRS buses\n\u2502   \u2514\u2500\u2500 hexagonal_maker.yaml       \u2190 Optional: Custom templates\n\u2514\u2500\u2500 services.yaml                  \u2190 Service configuration\n</code></pre>"},{"location":"getting-started/installation/#recommended-services-configuration","title":"Recommended Services Configuration","text":"<pre><code># config/services.yaml\nservices:\n    _defaults:\n        autowire: true\n        autoconfigure: true\n\n    # Make controllers public\n    App\\:\n        resource: '../src/'\n        exclude:\n            - '../src/DependencyInjection/'\n            - '../src/*/Domain/Model/'  # Exclude entities\n            - '../src/Kernel.php'\n\n    # Repository interfaces autowiring\n    App\\User\\Account\\Domain\\Port\\UserRepositoryInterface:\n        class: App\\User\\Account\\Infrastructure\\Persistence\\Doctrine\\DoctrineUserRepository\n\n    # OR use bind for automatic interface resolution\n    _defaults:\n        bind:\n            $commandBus: '@messenger.bus.command'\n            $queryBus: '@messenger.bus.query'\n            $eventBus: '@messenger.bus.event'\n</code></pre>"},{"location":"getting-started/installation/#database-setup","title":"Database Setup","text":""},{"location":"getting-started/installation/#1-configure-database-url","title":"1. Configure Database URL","text":"<p>In <code>.env</code>:</p> <pre><code>DATABASE_URL=\"mysql://user:password@127.0.0.1:3306/hexagonal_app?serverVersion=8.0\"\n</code></pre>"},{"location":"getting-started/installation/#2-create-database","title":"2. Create Database","text":"<pre><code>bin/console doctrine:database:create\n</code></pre>"},{"location":"getting-started/installation/#3-generate-migrations","title":"3. Generate Migrations","text":"<p>After creating entities with makers:</p> <pre><code># Validate mapping\nbin/console doctrine:schema:validate\n\n# Generate migration\nbin/console doctrine:migrations:diff\n\n# Execute migration\nbin/console doctrine:migrations:migrate\n</code></pre>"},{"location":"getting-started/installation/#testing-setup-optional","title":"Testing Setup (Optional)","text":""},{"location":"getting-started/installation/#1-install-phpunit","title":"1. Install PHPUnit","text":"<pre><code>composer require --dev phpunit/phpunit symfony/phpunit-bridge\n</code></pre>"},{"location":"getting-started/installation/#2-configure-test-environment","title":"2. Configure Test Environment","text":"<pre><code># Generate test configuration\nbin/console make:hexagonal:test-config\n</code></pre> <p>This creates: - <code>config/packages/test/doctrine.yaml</code> (test database) - <code>.env.test</code> (test environment variables)</p>"},{"location":"getting-started/installation/#3-create-test-database","title":"3. Create Test Database","text":"<pre><code>bin/console doctrine:database:create --env=test\nbin/console doctrine:schema:create --env=test\n</code></pre>"},{"location":"getting-started/installation/#next-steps","title":"Next Steps","text":"<p>Installation complete! Now:</p> <ol> <li>Quick Start - Generate your first module</li> <li>First Module Tutorial - Complete step-by-step guide</li> <li>Maker Commands - Learn all 19 commands</li> </ol>"},{"location":"getting-started/installation/#troubleshooting","title":"Troubleshooting","text":""},{"location":"getting-started/installation/#bundle-not-found-in-binconsole-list","title":"Bundle not found in <code>bin/console list</code>","text":"<p>Solution: Clear cache and check <code>config/bundles.php</code></p> <pre><code>bin/console cache:clear\n</code></pre>"},{"location":"getting-started/installation/#doctrine-mapping-errors","title":"Doctrine mapping errors","text":"<p>Error: <code>The class 'X' was not found in the chain configured namespaces</code></p> <p>Solution: Ensure YAML mapping is configured in <code>config/packages/doctrine.yaml</code> for your module</p>"},{"location":"getting-started/installation/#autowiring-fails-for-repositories","title":"Autowiring fails for repositories","text":"<p>Error: <code>Cannot autowire service \"X\": argument \"$repository\" references interface but no such service exists</code></p> <p>Solution: Add interface alias in <code>config/services.yaml</code>:</p> <pre><code>services:\n    App\\User\\Account\\Domain\\Port\\UserRepositoryInterface:\n        class: App\\User\\Account\\Infrastructure\\Persistence\\Doctrine\\DoctrineUserRepository\n</code></pre>"},{"location":"getting-started/installation/#commands-not-generating-files","title":"Commands not generating files","text":"<p>Solution: Check permissions on <code>src/</code> directory:</p> <pre><code>chmod -R 755 src/\n</code></pre>"},{"location":"getting-started/installation/#uninstallation","title":"Uninstallation","text":"<p>To remove the bundle:</p> <pre><code>composer remove ahmed-bhs/hexagonal-maker-bundle\n</code></pre> <p>Then remove from <code>config/bundles.php</code> if added manually.</p>"},{"location":"getting-started/quick-start/","title":"Quick Start","text":"<p>Get started with Hexagonal Maker Bundle in 2 minutes.</p>"},{"location":"getting-started/quick-start/#installation","title":"Installation","text":"<pre><code>composer require ahmed-bhs/hexagonal-maker-bundle --dev\n</code></pre> <p>The bundle auto-registers via Symfony Flex. If not using Flex, add to <code>config/bundles.php</code>:</p> <pre><code>return [\n    // ...\n    AhmedBhs\\HexagonalMakerBundle\\HexagonalMakerBundle::class =&gt; ['dev' =&gt; true],\n];\n</code></pre>"},{"location":"getting-started/quick-start/#first-module-user-registration","title":"First Module: User Registration","text":"<p>Let's build a complete User Registration module with all hexagonal layers.</p>"},{"location":"getting-started/quick-start/#step-1-domain-layer-pure-business-logic","title":"Step 1: Domain Layer (Pure Business Logic)","text":"<pre><code># Create User entity (pure PHP, no Doctrine annotations)\nbin/console make:hexagonal:entity user/account User\n\n# Create Email value object\nbin/console make:hexagonal:value-object user/account Email\n\n# Create business exception\nbin/console make:hexagonal:exception user/account InvalidEmailException\n</code></pre> <p>Generated: <pre><code>src/User/Account/\n\u251c\u2500\u2500 Domain/\n\u2502   \u251c\u2500\u2500 Model/\n\u2502   \u2502   \u2514\u2500\u2500 User.php                    # Pure PHP entity\n\u2502   \u251c\u2500\u2500 ValueObject/\n\u2502   \u2502   \u2514\u2500\u2500 Email.php                   # Immutable value object\n\u2502   \u2514\u2500\u2500 Exception/\n\u2502       \u2514\u2500\u2500 InvalidEmailException.php   # Business exception\n</code></pre></p>"},{"location":"getting-started/quick-start/#step-2-repository-port-adapter","title":"Step 2: Repository (Port + Adapter)","text":"<pre><code># Generate repository interface + Doctrine implementation\nbin/console make:hexagonal:repository user/account User\n</code></pre> <p>Generated: <pre><code>src/User/Account/\n\u251c\u2500\u2500 Domain/Port/\n\u2502   \u2514\u2500\u2500 UserRepositoryInterface.php           # Interface (Port)\n\u2514\u2500\u2500 Infrastructure/Persistence/Doctrine/\n    \u251c\u2500\u2500 DoctrineUserRepository.php            # Implementation (Adapter)\n    \u2514\u2500\u2500 Orm/Mapping/\n        \u2514\u2500\u2500 User.orm.yml                      # Doctrine YAML mapping\n</code></pre></p>"},{"location":"getting-started/quick-start/#step-3-application-layer-use-cases","title":"Step 3: Application Layer (Use Cases)","text":"<pre><code># Generate registration command with factory\nbin/console make:hexagonal:command user/account register --factory\n\n# Generate query to find user\nbin/console make:hexagonal:query user/account find-by-id\n</code></pre> <p>Generated: <pre><code>src/User/Account/Application/\n\u251c\u2500\u2500 Register/\n\u2502   \u251c\u2500\u2500 RegisterCommand.php           # Command DTO\n\u2502   \u251c\u2500\u2500 RegisterCommandHandler.php    # Handler with business logic\n\u2502   \u2514\u2500\u2500 UserFactory.php               # Factory for creating users\n\u2514\u2500\u2500 FindById/\n    \u251c\u2500\u2500 FindByIdQuery.php             # Query DTO\n    \u251c\u2500\u2500 FindByIdQueryHandler.php      # Query handler\n    \u2514\u2500\u2500 FindByIdResponse.php          # Response DTO\n</code></pre></p>"},{"location":"getting-started/quick-start/#step-4-ui-layer-controllers","title":"Step 4: UI Layer (Controllers)","text":"<pre><code># Generate web controller\nbin/console make:hexagonal:controller user/account RegisterUser /users/register\n\n# Generate Symfony form\nbin/console make:hexagonal:form user/account User\n</code></pre> <p>Generated: <pre><code>src/User/Account/UI/\n\u2514\u2500\u2500 Http/Web/\n    \u251c\u2500\u2500 Controller/\n    \u2502   \u2514\u2500\u2500 RegisterUserController.php   # Web controller\n    \u2514\u2500\u2500 Form/\n        \u2514\u2500\u2500 UserType.php                 # Symfony form\n</code></pre></p>"},{"location":"getting-started/quick-start/#configure-doctrine-mapping","title":"Configure Doctrine Mapping","text":"<p>Add YAML mapping configuration to <code>config/packages/doctrine.yaml</code>:</p> <pre><code>doctrine:\n    dbal:\n        url: '%env(resolve:DATABASE_URL)%'\n\n    orm:\n        auto_generate_proxy_classes: true\n        naming_strategy: doctrine.orm.naming_strategy.underscore_number_aware\n        auto_mapping: true\n        mappings:\n            UserAccount:\n                is_bundle: false\n                type: yml\n                dir: '%kernel.project_dir%/src/User/Account/Infrastructure/Persistence/Doctrine/Orm/Mapping'\n                prefix: 'App\\User\\Account\\Domain\\Model'\n                alias: UserAccount\n</code></pre>"},{"location":"getting-started/quick-start/#complete-the-implementation","title":"Complete the Implementation","text":""},{"location":"getting-started/quick-start/#1-edit-user-entity","title":"1. Edit User Entity","text":"<pre><code>// src/User/Account/Domain/Model/User.php\n&lt;?php\n\ndeclare(strict_types=1);\n\nnamespace App\\User\\Account\\Domain\\Model;\n\nuse App\\User\\Account\\Domain\\ValueObject\\Email;\n\nfinal class User\n{\n    private string $id;\n    private Email $email;\n    private string $passwordHash;\n    private \\DateTimeImmutable $createdAt;\n\n    public function __construct(\n        string $id,\n        Email $email,\n        string $passwordHash\n    ) {\n        $this-&gt;id = $id;\n        $this-&gt;email = $email;\n        $this-&gt;passwordHash = $passwordHash;\n        $this-&gt;createdAt = new \\DateTimeImmutable();\n    }\n\n    public function getId(): string\n    {\n        return $this-&gt;id;\n    }\n\n    public function getEmail(): Email\n    {\n        return $this-&gt;email;\n    }\n\n    // Business methods...\n    public function changeEmail(Email $newEmail): void\n    {\n        $this-&gt;email = $newEmail;\n    }\n}\n</code></pre>"},{"location":"getting-started/quick-start/#2-complete-email-value-object","title":"2. Complete Email Value Object","text":"<pre><code>// src/User/Account/Domain/ValueObject/Email.php\n&lt;?php\n\ndeclare(strict_types=1);\n\nnamespace App\\User\\Account\\Domain\\ValueObject;\n\nuse App\\User\\Account\\Domain\\Exception\\InvalidEmailException;\n\nfinal readonly class Email\n{\n    private string $value;\n\n    public function __construct(string $value)\n    {\n        if (!filter_var($value, FILTER_VALIDATE_EMAIL)) {\n            throw new InvalidEmailException(\"Invalid email: $value\");\n        }\n\n        $this-&gt;value = strtolower($value);\n    }\n\n    public function getValue(): string\n    {\n        return $this-&gt;value;\n    }\n\n    public function __toString(): string\n    {\n        return $this-&gt;value;\n    }\n}\n</code></pre>"},{"location":"getting-started/quick-start/#3-complete-doctrine-mapping","title":"3. Complete Doctrine Mapping","text":"<pre><code># src/User/Account/Infrastructure/Persistence/Doctrine/Orm/Mapping/User.orm.yml\nApp\\User\\Account\\Domain\\Model\\User:\n    type: entity\n    repositoryClass: App\\User\\Account\\Infrastructure\\Persistence\\Doctrine\\DoctrineUserRepository\n    table: user\n\n    id:\n        id:\n            type: string\n            length: 36\n\n    fields:\n        email:\n            type: string\n            length: 180\n            unique: true\n            # Email VO will be stored as string\n\n        passwordHash:\n            type: string\n            length: 255\n            column: password_hash\n\n        createdAt:\n            type: datetime_immutable\n            column: created_at\n</code></pre>"},{"location":"getting-started/quick-start/#4-implement-handler","title":"4. Implement Handler","text":"<pre><code>// src/User/Account/Application/Register/RegisterCommandHandler.php\n&lt;?php\n\ndeclare(strict_types=1);\n\nnamespace App\\User\\Account\\Application\\Register;\n\nuse App\\User\\Account\\Domain\\Port\\UserRepositoryInterface;\nuse Symfony\\Component\\Messenger\\Attribute\\AsMessageHandler;\n\n#[AsMessageHandler]\nfinal readonly class RegisterCommandHandler\n{\n    public function __construct(\n        private UserFactory $factory,\n        private UserRepositoryInterface $repository,\n    ) {\n    }\n\n    public function __invoke(RegisterCommand $command): void\n    {\n        // Use factory to create user\n        $user = $this-&gt;factory-&gt;create(\n            email: $command-&gt;email,\n            password: $command-&gt;password\n        );\n\n        // Save via repository\n        $this-&gt;repository-&gt;save($user);\n    }\n}\n</code></pre>"},{"location":"getting-started/quick-start/#generate-database-schema","title":"Generate Database Schema","text":"<pre><code># Validate mapping\nbin/console doctrine:schema:validate\n\n# Generate migration\nbin/console doctrine:migrations:diff\n\n# Execute migration\nbin/console doctrine:migrations:migrate\n</code></pre>"},{"location":"getting-started/quick-start/#test-your-module","title":"Test Your Module","text":""},{"location":"getting-started/quick-start/#option-1-web-interface","title":"Option 1: Web Interface","text":"<p>Create a controller action:</p> <pre><code>// src/User/Account/UI/Http/Web/Controller/RegisterUserController.php\nuse Symfony\\Component\\Messenger\\MessageBusInterface;\n\n#[Route('/users/register', name: 'user_register', methods: ['GET', 'POST'])]\npublic function register(Request $request, MessageBusInterface $commandBus): Response\n{\n    $form = $this-&gt;createForm(UserType::class);\n    $form-&gt;handleRequest($request);\n\n    if ($form-&gt;isSubmitted() &amp;&amp; $form-&gt;isValid()) {\n        $data = $form-&gt;getData();\n\n        $command = new RegisterCommand(\n            email: $data['email'],\n            password: $data['password']\n        );\n\n        $commandBus-&gt;dispatch($command);\n\n        return $this-&gt;redirectToRoute('user_success');\n    }\n\n    return $this-&gt;render('user/register.html.twig', [\n        'form' =&gt; $form,\n    ]);\n}\n</code></pre>"},{"location":"getting-started/quick-start/#option-2-cli-command","title":"Option 2: CLI Command","text":"<pre><code>bin/console make:hexagonal:cli-command user/account RegisterUser app:user:register\n</code></pre> <p>Then test:</p> <pre><code>bin/console app:user:register --email=test@example.com --password=secret\n</code></pre>"},{"location":"getting-started/quick-start/#whats-next","title":"What's Next?","text":"<p>You've built a complete hexagonal module! Next steps:</p> <ol> <li>Add more use cases - Update, Delete, List</li> <li>Add tests - Unit and integration tests</li> <li>Add validation - Input DTOs with constraints</li> <li>Add domain events - Event-driven architecture</li> <li>Generate complete CRUD - Use the CRUD maker</li> </ol>"},{"location":"getting-started/quick-start/#quick-crud-alternative","title":"Quick CRUD Alternative","text":"<p>Want to skip manual generation? Use the CRUD maker:</p> <pre><code>bin/console make:hexagonal:crud user/account User --with-tests --with-id-vo\n</code></pre> <p>This generates everything in one command: - Entity + Repository + ValueObjects - 5 Use Cases (Create, Update, Delete, Get, List) - 5 Controllers + Form - All tests</p> <p>Learn more about CRUD maker \u2192</p>"},{"location":"getting-started/quick-start/#troubleshooting","title":"Troubleshooting","text":""},{"location":"getting-started/quick-start/#doctrine-mapping-not-found","title":"Doctrine mapping not found","text":"<p>Error: <code>Class \"App\\User\\Account\\Domain\\Model\\User\" sub class of \"X\" is not a valid entity or mapped super class.</code></p> <p>Solution: Add mapping configuration to <code>config/packages/doctrine.yaml</code> (see Configure Doctrine Mapping above)</p>"},{"location":"getting-started/quick-start/#entity-not-persisted","title":"Entity not persisted","text":"<p>Error: <code>A new entity was found through the relationship...</code></p> <p>Solution: Add <code>cascade: ['persist']</code> in your YAML mapping or call <code>$entityManager-&gt;persist()</code> explicitly</p>"},{"location":"getting-started/quick-start/#service-autowiring-failed","title":"Service autowiring failed","text":"<p>Error: <code>Cannot autowire service \"X\": argument \"$repository\" references interface \"UserRepositoryInterface\" but no such service exists.</code></p> <p>Solution: Configure service alias in <code>config/services.yaml</code>:</p> <pre><code>services:\n    App\\User\\Account\\Domain\\Port\\UserRepositoryInterface:\n        class: App\\User\\Account\\Infrastructure\\Persistence\\Doctrine\\DoctrineUserRepository\n</code></pre> <p>Or use <code>_defaults: autowire: true</code> with <code>bind</code> for automatic resolution.</p>"},{"location":"getting-started/quick-start/#next-steps","title":"Next Steps","text":"<ul> <li>Installation Guide - Detailed installation and configuration</li> <li>First Module Tutorial - Step-by-step guide with full code</li> <li>Maker Commands Reference - All 19 commands documented</li> <li>Architecture Guide - Deep dive into hexagonal architecture</li> </ul>"},{"location":"makers/","title":"Maker Commands","text":"<p>Complete reference for all 19 maker commands.</p>"},{"location":"makers/#command-categories","title":"Command Categories","text":""},{"location":"makers/#domain-layer","title":"Domain Layer","text":"<ul> <li><code>make:hexagonal:entity</code> - Pure PHP entities</li> <li><code>make:hexagonal:value-object</code> - Immutable value objects</li> <li><code>make:hexagonal:exception</code> - Business exceptions</li> <li><code>make:hexagonal:domain-event</code> - Domain events</li> </ul>"},{"location":"makers/#application-layer","title":"Application Layer","text":"<ul> <li><code>make:hexagonal:command</code> - CQRS commands + handlers</li> <li><code>make:hexagonal:query</code> - CQRS queries + handlers + responses</li> <li><code>make:hexagonal:repository</code> - Repository port + adapter</li> <li><code>make:hexagonal:input</code> - Input DTOs</li> <li><code>make:hexagonal:use-case</code> - Use cases</li> </ul>"},{"location":"makers/#ui-layer","title":"UI Layer","text":"<ul> <li><code>make:hexagonal:controller</code> - Web controllers</li> <li><code>make:hexagonal:form</code> - Symfony forms</li> <li><code>make:hexagonal:cli-command</code> - Console commands</li> </ul>"},{"location":"makers/#infrastructure-layer","title":"Infrastructure Layer","text":"<ul> <li><code>make:hexagonal:message-handler</code> - Async message handlers</li> <li><code>make:hexagonal:event-subscriber</code> - Event subscribers</li> </ul>"},{"location":"makers/#testing","title":"Testing","text":"<ul> <li><code>make:hexagonal:use-case-test</code> - Use case tests</li> <li><code>make:hexagonal:controller-test</code> - Controller tests</li> <li><code>make:hexagonal:cli-command-test</code> - CLI command tests</li> <li><code>make:hexagonal:test-config</code> - Test configuration</li> </ul>"},{"location":"makers/#rapid-development","title":"Rapid Development","text":"<ul> <li><code>make:hexagonal:crud</code> - Complete CRUD module (20+ files)</li> </ul> <p>See detailed documentation \u2192</p>"},{"location":"makers/commands/","title":"Maker Commands Reference","text":"<p>Complete reference for all 19 maker commands in Hexagonal Maker Bundle.</p>"},{"location":"makers/commands/#quick-reference","title":"Quick Reference","text":"Command Layer What it generates make:hexagonal:entity Domain Pure PHP entities + YAML mapping make:hexagonal:value-object Domain Immutable value objects make:hexagonal:exception Domain Business exceptions make:hexagonal:repository Domain + Infra Repository port + Doctrine adapter make:hexagonal:command Application CQRS commands + handlers make:hexagonal:query Application CQRS queries + handlers + responses make:hexagonal:use-case Application Use cases (application services) make:hexagonal:input Application Input DTOs with validation make:hexagonal:controller UI Web controllers make:hexagonal:form UI Symfony forms make:hexagonal:cli-command UI Console commands make:hexagonal:domain-event Domain Domain events make:hexagonal:event-subscriber App/Infra Event subscribers make:hexagonal:message-handler Infrastructure Async message handlers make:hexagonal:use-case-test Tests Use case tests make:hexagonal:controller-test Tests Controller tests make:hexagonal:cli-command-test Tests CLI command tests make:hexagonal:test-config Config Test configuration setup make:hexagonal:crud All Complete CRUD module (30+ files)"},{"location":"makers/commands/#domain-layer","title":"Domain Layer","text":""},{"location":"makers/commands/#entity","title":"Entity","text":"<p>Generate a pure domain entity with Doctrine YAML mapping.</p> <pre><code>bin/console make:hexagonal:entity &lt;module&gt; &lt;name&gt;\n</code></pre> <p>Example:</p> <pre><code>bin/console make:hexagonal:entity user/account User\n</code></pre> <p>Generated: - <code>Domain/Model/User.php</code> - Pure PHP entity - <code>Infrastructure/Persistence/Doctrine/Orm/Mapping/User.orm.yml</code> - Doctrine mapping</p> <p>Options:</p> <pre><code># With repository\n--with-repository\n\n# With ID value object\n--with-id-vo\n\n# Combined\nbin/console make:hexagonal:entity blog/post Post --with-repository --with-id-vo\n</code></pre>"},{"location":"makers/commands/#value-object","title":"Value Object","text":"<p>Generate an immutable value object.</p> <pre><code>bin/console make:hexagonal:value-object &lt;module&gt; &lt;name&gt;\n</code></pre> <p>Example:</p> <pre><code>bin/console make:hexagonal:value-object user/account Email\n</code></pre> <p>Generated: - <code>Domain/ValueObject/Email.php</code> - Immutable readonly class</p> <p>Template:</p> <pre><code>&lt;?php\n\ndeclare(strict_types=1);\n\nnamespace App\\User\\Account\\Domain\\ValueObject;\n\nfinal readonly class Email\n{\n    private string $value;\n\n    public function __construct(string $value)\n    {\n        // Validation logic\n        $this-&gt;value = $value;\n    }\n\n    public function getValue(): string\n    {\n        return $this-&gt;value;\n    }\n}\n</code></pre>"},{"location":"makers/commands/#exception","title":"Exception","text":"<p>Generate a domain exception for business rule violations.</p> <pre><code>bin/console make:hexagonal:exception &lt;module&gt; &lt;name&gt;\n</code></pre> <p>Example:</p> <pre><code>bin/console make:hexagonal:exception user/account InvalidEmailException\n</code></pre> <p>Generated: - <code>Domain/Exception/InvalidEmailException.php</code></p>"},{"location":"makers/commands/#repository","title":"Repository","text":"<p>Generate repository interface (Port) and Doctrine implementation (Adapter).</p> <pre><code>bin/console make:hexagonal:repository &lt;module&gt; &lt;entity&gt;\n</code></pre> <p>Example:</p> <pre><code>bin/console make:hexagonal:repository user/account User\n</code></pre> <p>Generated: - <code>Domain/Port/UserRepositoryInterface.php</code> - Interface (Port) - <code>Infrastructure/Persistence/Doctrine/DoctrineUserRepository.php</code> - Implementation (Adapter)</p>"},{"location":"makers/commands/#application-layer","title":"Application Layer","text":""},{"location":"makers/commands/#command","title":"Command","text":"<p>Generate CQRS command for write operations.</p> <pre><code>bin/console make:hexagonal:command &lt;module&gt; &lt;name&gt; [options]\n</code></pre> <p>Example:</p> <pre><code>bin/console make:hexagonal:command blog/post create\n</code></pre> <p>Generated: - <code>Application/Create/CreateCommand.php</code> - Command DTO - <code>Application/Create/CreateCommandHandler.php</code> - Handler with <code>#[AsMessageHandler]</code></p> <p>Options:</p> <pre><code># With factory pattern\n--factory\n\n# With tests\n--with-tests\n\n# Combined\nbin/console make:hexagonal:command user/account register --factory --with-tests\n</code></pre> <p>With Factory Generated: - <code>Application/Register/RegisterCommand.php</code> - <code>Application/Register/RegisterCommandHandler.php</code> - <code>Application/Register/UserFactory.php</code> - Factory for creating entities</p>"},{"location":"makers/commands/#query","title":"Query","text":"<p>Generate CQRS query for read operations.</p> <pre><code>bin/console make:hexagonal:query &lt;module&gt; &lt;name&gt;\n</code></pre> <p>Example:</p> <pre><code>bin/console make:hexagonal:query blog/post find-by-id\n</code></pre> <p>Generated: - <code>Application/FindById/FindByIdQuery.php</code> - Query DTO - <code>Application/FindById/FindByIdQueryHandler.php</code> - Handler - <code>Application/FindById/FindByIdResponse.php</code> - Response DTO</p>"},{"location":"makers/commands/#use-case","title":"Use Case","text":"<p>Generate a use case (application service).</p> <pre><code>bin/console make:hexagonal:use-case &lt;module&gt; &lt;name&gt;\n</code></pre> <p>Example:</p> <pre><code>bin/console make:hexagonal:use-case blog/post PublishPost\n</code></pre> <p>Generated: - <code>Application/UseCase/PublishPostUseCase.php</code></p> <p>Options:</p> <pre><code># With test\n--with-test\n\nbin/console make:hexagonal:use-case blog/post CreatePost --with-test\n</code></pre>"},{"location":"makers/commands/#input","title":"Input","text":"<p>Generate input DTO with validation.</p> <pre><code>bin/console make:hexagonal:input &lt;module&gt; &lt;name&gt;\n</code></pre> <p>Example:</p> <pre><code>bin/console make:hexagonal:input blog/post CreatePostInput\n</code></pre> <p>Generated: - <code>Application/Input/CreatePostInput.php</code> - DTO with Symfony Validator constraints</p>"},{"location":"makers/commands/#ui-layer","title":"UI Layer","text":""},{"location":"makers/commands/#controller","title":"Controller","text":"<p>Generate web controller.</p> <pre><code>bin/console make:hexagonal:controller &lt;module&gt; &lt;name&gt; &lt;route&gt;\n</code></pre> <p>Example:</p> <pre><code>bin/console make:hexagonal:controller blog/post CreatePost /posts/new\n</code></pre> <p>Generated: - <code>UI/Http/Web/Controller/CreatePostController.php</code></p> <p>Options:</p> <pre><code># With complete workflow (Form + UseCase + Command + Input)\n--with-workflow\n\nbin/console make:hexagonal:controller blog/post CreatePost /posts/new --with-workflow\n</code></pre> <p>With Workflow Generated: - Controller - Form - UseCase - Command + Handler - Input DTO</p>"},{"location":"makers/commands/#form","title":"Form","text":"<p>Generate Symfony form type.</p> <pre><code>bin/console make:hexagonal:form &lt;module&gt; &lt;name&gt;\n</code></pre> <p>Example:</p> <pre><code>bin/console make:hexagonal:form blog/post Post\n</code></pre> <p>Generated: - <code>UI/Http/Web/Form/PostType.php</code></p> <p>Options:</p> <pre><code># With command workflow\n--with-command --action=Create\n\nbin/console make:hexagonal:form blog/post Post --with-command --action=Create\n</code></pre> <p>With Command Generated: - Form - Command + Handler - Input DTO</p>"},{"location":"makers/commands/#cli-command","title":"CLI Command","text":"<p>Generate console command.</p> <pre><code>bin/console make:hexagonal:cli-command &lt;module&gt; &lt;name&gt; &lt;command-name&gt;\n</code></pre> <p>Example:</p> <pre><code>bin/console make:hexagonal:cli-command blog/post CreatePost app:post:create\n</code></pre> <p>Generated: - <code>UI/Cli/CreatePostCommand.php</code></p> <p>Options:</p> <pre><code># With use case workflow\n--with-use-case\n\nbin/console make:hexagonal:cli-command blog/post CreatePost app:post:create --with-use-case\n</code></pre>"},{"location":"makers/commands/#infrastructure-layer","title":"Infrastructure Layer","text":""},{"location":"makers/commands/#message-handler","title":"Message Handler","text":"<p>Generate async message handler.</p> <pre><code>bin/console make:hexagonal:message-handler &lt;module&gt; &lt;name&gt;\n</code></pre> <p>Example:</p> <pre><code>bin/console make:hexagonal:message-handler user/account SendWelcomeEmail\n</code></pre> <p>Generated: - <code>Infrastructure/Messaging/Handler/SendWelcomeEmailHandler.php</code></p> <p>Options:</p> <pre><code># With message class\n--with-message\n\nbin/console make:hexagonal:message-handler user/account SendEmail --with-message\n</code></pre>"},{"location":"makers/commands/#events","title":"Events","text":""},{"location":"makers/commands/#domain-event","title":"Domain Event","text":"<p>Generate domain event.</p> <pre><code>bin/console make:hexagonal:domain-event &lt;module&gt; &lt;name&gt;\n</code></pre> <p>Example:</p> <pre><code>bin/console make:hexagonal:domain-event order/payment OrderPlaced\n</code></pre> <p>Generated: - <code>Domain/Event/OrderPlacedEvent.php</code> - Immutable event</p> <p>Options:</p> <pre><code># With subscriber\n--with-subscriber\n\nbin/console make:hexagonal:domain-event order/payment OrderPlaced --with-subscriber\n</code></pre>"},{"location":"makers/commands/#event-subscriber","title":"Event Subscriber","text":"<p>Generate event subscriber.</p> <pre><code>bin/console make:hexagonal:event-subscriber &lt;module&gt; &lt;name&gt; --layer=&lt;application|infrastructure&gt;\n</code></pre> <p>Example:</p> <pre><code># Application layer (business workflow)\nbin/console make:hexagonal:event-subscriber order/payment OrderPlaced --layer=application\n\n# Infrastructure layer (technical concerns)\nbin/console make:hexagonal:event-subscriber shared/logging Exception --layer=infrastructure\n</code></pre>"},{"location":"makers/commands/#tests","title":"Tests","text":""},{"location":"makers/commands/#use-case-test","title":"Use Case Test","text":"<p>Generate use case test.</p> <pre><code>bin/console make:hexagonal:use-case-test &lt;module&gt; &lt;name&gt;\n</code></pre> <p>Example:</p> <pre><code>bin/console make:hexagonal:use-case-test blog/post CreatePost\n</code></pre> <p>Generated: - <code>tests/Blog/Post/Application/CreatePost/CreatePostTest.php</code> - KernelTestCase</p>"},{"location":"makers/commands/#controller-test","title":"Controller Test","text":"<p>Generate controller test.</p> <pre><code>bin/console make:hexagonal:controller-test &lt;module&gt; &lt;name&gt; &lt;route&gt;\n</code></pre> <p>Example:</p> <pre><code>bin/console make:hexagonal:controller-test blog/post CreatePost /posts/new\n</code></pre> <p>Generated: - <code>tests/Blog/Post/UI/Http/Web/Controller/CreatePostControllerTest.php</code> - WebTestCase</p>"},{"location":"makers/commands/#cli-command-test","title":"CLI Command Test","text":"<p>Generate CLI command test.</p> <pre><code>bin/console make:hexagonal:cli-command-test &lt;module&gt; &lt;name&gt; &lt;command-name&gt;\n</code></pre> <p>Example:</p> <pre><code>bin/console make:hexagonal:cli-command-test blog/post CreatePost app:post:create\n</code></pre> <p>Generated: - <code>tests/Blog/Post/UI/Cli/CreatePostCommandTest.php</code> - CommandTester</p>"},{"location":"makers/commands/#configuration","title":"Configuration","text":""},{"location":"makers/commands/#test-config","title":"Test Config","text":"<p>Generate test environment configuration.</p> <pre><code>bin/console make:hexagonal:test-config\n</code></pre> <p>Generated: - <code>config/packages/test/doctrine.yaml</code> - Test database config - <code>.env.test</code> - Test environment variables</p>"},{"location":"makers/commands/#rapid-development","title":"Rapid Development","text":""},{"location":"makers/commands/#crud","title":"CRUD","text":"<p>Generate complete CRUD module.</p> <pre><code>bin/console make:hexagonal:crud &lt;module&gt; &lt;entity&gt; [options]\n</code></pre> <p>Example:</p> <pre><code>bin/console make:hexagonal:crud blog/post Post --with-tests --with-id-vo\n</code></pre> <p>Generated (30+ files):</p> <p>Domain: - Entity - Repository Interface - ID ValueObject (with <code>--with-id-vo</code>)</p> <p>Infrastructure: - Doctrine Repository - YAML Mapping</p> <p>Application: - 5 Use Cases (Create, Update, Delete, Get, List) - 5 Commands + Handlers - 5 Input DTOs</p> <p>UI: - 5 Controllers - 1 Form</p> <p>Tests (with <code>--with-tests</code>): - 5 Use Case Tests - 5 Controller Tests</p> <p>Routes: - <code>GET /posts</code> - List - <code>GET /posts/{id}</code> - Show - <code>GET /posts/new</code> - Create form - <code>POST /posts/new</code> - Submit - <code>GET /posts/{id}/edit</code> - Edit form - <code>POST /posts/{id}/edit</code> - Update - <code>DELETE /posts/{id}/delete</code> - Delete</p>"},{"location":"makers/commands/#options-summary","title":"Options Summary","text":"Option Available For Description <code>--with-repository</code> Entity Generate repository with entity <code>--with-id-vo</code> Entity, CRUD Generate ID value object <code>--factory</code> Command Generate factory pattern <code>--with-tests</code> Command, UseCase, CRUD Generate tests <code>--with-use-case</code> CLI Command Generate use case workflow <code>--with-workflow</code> Controller Generate complete workflow <code>--with-command</code> Form Generate command workflow <code>--with-message</code> Message Handler Generate message class <code>--with-subscriber</code> Domain Event Generate event subscriber <code>--layer</code> Event Subscriber Choose application or infrastructure <code>--action</code> Form Specify action (Create, Update, etc.)"},{"location":"makers/commands/#module-path-format","title":"Module Path Format","text":"<p>All commands use the module path format: <code>&lt;context&gt;/&lt;module&gt;</code></p> <p>Examples: - <code>user/account</code> \u2192 <code>src/User/Account/</code> - <code>blog/post</code> \u2192 <code>src/Blog/Post/</code> - <code>order/payment</code> \u2192 <code>src/Order/Payment/</code></p> <p>Flexibility: - <code>module/user/account</code> \u2192 <code>src/Module/User/Account/</code> - <code>shared/common</code> \u2192 <code>src/Shared/Common/</code></p>"},{"location":"makers/commands/#next-steps","title":"Next Steps","text":"<ul> <li>Quick Start - Build your first module</li> <li>Examples - Real-world usage</li> <li>Architecture Guide - Understand the patterns</li> </ul>"}]}